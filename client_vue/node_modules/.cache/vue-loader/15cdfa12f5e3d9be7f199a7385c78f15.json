{"remainingRequest":"/app/node_modules/vue-loader-v16/dist/index.js??ref--1-2!/app/src/components/Search.vue?vue&type=script&lang=js","dependencies":[{"path":"/app/src/components/Search.vue","mtime":1641198370377},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1640299636612},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1640299636618},{"path":"/app/node_modules/vue-cli-plugin-quasar/lib/loader.js.transform-quasar-imports.js","mtime":1640775278388},{"path":"/app/node_modules/vue-cli-plugin-quasar/lib/loader.vue.auto-import-quasar.js","mtime":1640775278388},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1640299636612},{"path":"/app/node_modules/vue-loader-v16/dist/index.js","mtime":1640299655523}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBDb250YWluZXIgZnJvbSAiQC9jb21wb25lbnRzL0NvbnRhaW5lci52dWUiOwppbXBvcnQgeyBnZXRSYXRpbmdDb2xvciB9IGZyb20gIkAvdXRpbHMiOwppbXBvcnQgQ29tbWVudHNBUEkgZnJvbSAiQC9hcGkvY29tbWVudHMiOwppbXBvcnQgUGFnaW5hdGlvbiBmcm9tICJAL2NvbXBvbmVudHMvQ29tbWVudHMvUGFnaW5hdGlvbiI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk15Q29tbWVudHNDb21wb25lbnQiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb3VudGVkOiBmYWxzZSwKICAgICAgY29tbWVudHM6IFtdLAogICAgICBwYWdlOiAxLAogICAgICBwZXJQYWdlOiAxMCwKICAgICAgdG90YWw6IDAsCiAgICAgIHRvdGFsUGFnZXM6IDAsCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgQ29udGFpbmVyLAogICAgUGFnaW5hdGlvbiwKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlc2V0SGVpZ2h0KG9mZnNldCkgewogICAgICByZXR1cm4geyBtaW5IZWlnaHQ6IGBjYWxjKDEwMHZoIC0gJHsob2Zmc2V0IHx8IDApICsgNzB9cHgpYCB9OwogICAgfSwKICAgIGdldENvbG9yKHJhdGUpIHsKICAgICAgcmV0dXJuIGdldFJhdGluZ0NvbG9yKHJhdGUpOwogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNTA5ODEwOTMKICAgICIkcm91dGUucXVlcnkucGFnZSI6IHsKICAgICAgaGFuZGxlcjogYXN5bmMgZnVuY3Rpb24gKHBhZ2UpIHsKICAgICAgICBpZiAodGhpcy4kcm91dGUubmFtZSAhPT0gIlNlYXJjaCIpIHJldHVybjsgLy8gdG8gcHJldmVudCBlcnJvciB3aGVuIHF1aXR0aW5nIHRoaXMgcGFnZS4KCiAgICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHRoaXMucGFnZSA9IHBhZ2UgfHwgMTsKICAgICAgICAgIGNvbnN0IHsgc2l0ZSB9ID0gdGhpcy4kcm91dGUucXVlcnk7CiAgICAgICAgICBjb25zdCBjb21tZW50UmVzID0gYXdhaXQgQ29tbWVudHNBUEkuc2VhcmNoKHsKICAgICAgICAgICAgc2l0ZSwKICAgICAgICAgICAgcGFnZTogdGhpcy5wYWdlLAogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmNvbW1lbnRzID0gY29tbWVudFJlcy5jb21tZW50czsKICAgICAgICAgIHRoaXMucGVyUGFnZSA9IGNvbW1lbnRSZXMucGVyUGFnZTsKICAgICAgICAgIHRoaXMudG90YWwgPSBjb21tZW50UmVzLnRvdGFsOwogICAgICAgICAgdGhpcy50b3RhbFBhZ2VzID0gY29tbWVudFJlcy50b3RhbFBhZ2VzOwoKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGNvbW1lbnRSZXMpOwogICAgICAgICAgLy8gY29uc29sZS5sb2coc2l0ZSk7CiAgICAgICAgICB0aGlzLm1vdW50ZWQgPSB0cnVlOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAvLyB3aW5kb3cuZXJyID0gZXJyb3I7CiAgICAgICAgICB0aGlzLm1vdW50ZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["/app/src/components/Search.vue"],"names":[],"mappings":"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","file":"/app/src/components/Search.vue","sourceRoot":"","sourcesContent":["<template>\n  <q-page padding :style-fn=\"resetHeight\" class=\"bg-white\">\n    <q-spinner-audio\n      v-if=\"!mounted\"\n      class=\"fixed-center\"\n      color=\"primary\"\n      size=\"4em\"\n    />\n    <Container style=\"max-width: 700px\" v-if=\"mounted && comments.length\">\n      <div class=\"text-bold text-h5 q-mb-md\" v-if=\"$route.query.site\">\n        Here are your results for \"{{ $route.query.site }}\"\n      </div>\n      <div\n        class=\"column items-start q-mb-lg\"\n        v-for=\"comment in comments\"\n        :key=\"comment.max_id\"\n      >\n        <router-link\n          class=\"row yl-lu text-bold text-h6 text-accent\"\n          :to=\"`/sites/${comment.site_link}`\"\n        >\n          {{ comment.site_name }}&nbsp;|&nbsp;{{ comment.site_link }}\n        </router-link>\n        <div class=\"row items-center q-mt-xs\">\n          <q-rating\n            size=\"2em\"\n            icon=\"star_border\"\n            icon-selected=\"star\"\n            readonly\n            :modelValue=\"+comment.rating_avg\"\n            :color=\"getColor(+comment.rating_avg)\"\n          />\n          <span class=\"yl-divider\"></span>\n          {{ comment.comments_total }} comment<span\n            v-if=\"comment.comments_total > 1\"\n          >\n            s\n          </span>\n          <span class=\"yl-divider\">|</span> YowlScore\n          {{ +(+comment.rating_avg).toFixed(1) }}\n          <!-- https://stackoverflow.com/a/12830454 -->\n          <span class=\"yl-divider\">|</span>\n          <router-link\n            :to=\"`/comments/add?site_link=${comment.site_link}&site_name=${comment.site_name}`\"\n            class=\"yl-lu text-accent\"\n          >\n            Write a review\n          </router-link>\n        </div>\n      </div>\n\n      <Pagination\n        v-if=\"totalPages > 1\"\n        :page=\"+page\"\n        :totalPages=\"totalPages\"\n        :limit=\"5\"\n        :link=\"`/search`\"\n        :query=\"{ site: $route.query.site || '' }\"\n      />\n    </Container>\n    <Container style=\"max-width: 700px\" v-if=\"mounted && !comments.length\">\n      <div class=\"text-bold text-h5 q-mb-md\">\n        Oops, we couldn’t find any results matching \"{{ $route.query.site }}\"\n      </div>\n    </Container>\n  </q-page>\n</template>\n\n<style lang=\"scss\" scoped>\n.yl-divider {\n  margin: 0 8px;\n}\n</style>\n\n<script>\nimport Container from \"@/components/Container.vue\";\nimport { getRatingColor } from \"@/utils\";\nimport CommentsAPI from \"@/api/comments\";\nimport Pagination from \"@/components/Comments/Pagination\";\n\nexport default {\n  name: \"MyCommentsComponent\",\n  data() {\n    return {\n      mounted: false,\n      comments: [],\n      page: 1,\n      perPage: 10,\n      total: 0,\n      totalPages: 0,\n    };\n  },\n  components: {\n    Container,\n    Pagination,\n  },\n  methods: {\n    resetHeight(offset) {\n      return { minHeight: `calc(100vh - ${(offset || 0) + 70}px)` };\n    },\n    getColor(rate) {\n      return getRatingColor(rate);\n    },\n  },\n  watch: {\n    // https://stackoverflow.com/a/50981093\n    \"$route.query.page\": {\n      handler: async function (page) {\n        if (this.$route.name !== \"Search\") return; // to prevent error when quitting this page.\n\n        this.mounted = false;\n        try {\n          this.page = page || 1;\n          const { site } = this.$route.query;\n          const commentRes = await CommentsAPI.search({\n            site,\n            page: this.page,\n          });\n          this.comments = commentRes.comments;\n          this.perPage = commentRes.perPage;\n          this.total = commentRes.total;\n          this.totalPages = commentRes.totalPages;\n\n          // console.log(commentRes);\n          // console.log(site);\n          this.mounted = true;\n        } catch (error) {\n          // window.err = error;\n          this.mounted = true;\n        }\n      },\n      deep: true,\n      immediate: true,\n    },\n  },\n};\n</script>\n"]}]}