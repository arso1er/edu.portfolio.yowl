{"remainingRequest":"/app/node_modules/thread-loader/dist/cjs.js!/app/node_modules/babel-loader/lib/index.js!/app/node_modules/vue-cli-plugin-quasar/lib/loader.js.transform-quasar-imports.js!/app/node_modules/quasar/src/components/editor/editor-caret.js","dependencies":[{"path":"/app/node_modules/quasar/src/components/editor/editor-caret.js","mtime":1640793220809},{"path":"/app/babel.config.js","mtime":1641198370373},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1640299636612},{"path":"/app/node_modules/thread-loader/dist/cjs.js","mtime":1640299636617},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1640299636618},{"path":"/app/node_modules/vue-cli-plugin-quasar/lib/loader.js.transform-quasar-imports.js","mtime":1640775278388}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL2FwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudGVzdC5qcyI7CmltcG9ydCB7IG5vb3AgfSBmcm9tICcuLi8uLi91dGlscy9ldmVudC5qcyc7CgpmdW5jdGlvbiBnZXRCbG9ja0VsZW1lbnQoZWwsIHBhcmVudCkgewogIGlmIChwYXJlbnQgJiYgZWwgPT09IHBhcmVudCkgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICB2YXIgbm9kZU5hbWUgPSBlbC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwoKICBpZiAoWydkaXYnLCAnbGknLCAndWwnLCAnb2wnLCAnYmxvY2txdW90ZSddLmluY2x1ZGVzKG5vZGVOYW1lKSA9PT0gdHJ1ZSkgewogICAgcmV0dXJuIGVsOwogIH0KCiAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUgPyB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCkgOiBlbC5jdXJyZW50U3R5bGUsCiAgICAgIGRpc3BsYXkgPSBzdHlsZS5kaXNwbGF5OwoKICBpZiAoZGlzcGxheSA9PT0gJ2Jsb2NrJyB8fCBkaXNwbGF5ID09PSAndGFibGUnKSB7CiAgICByZXR1cm4gZWw7CiAgfQoKICByZXR1cm4gZ2V0QmxvY2tFbGVtZW50KGVsLnBhcmVudE5vZGUpOwp9CgpmdW5jdGlvbiBpc0NoaWxkT2YoZWwsIHBhcmVudCwgb3JTYW1lKSB7CiAgcmV0dXJuICFlbCB8fCBlbCA9PT0gZG9jdW1lbnQuYm9keSA/IGZhbHNlIDogb3JTYW1lID09PSB0cnVlICYmIGVsID09PSBwYXJlbnQgfHwgKHBhcmVudCA9PT0gZG9jdW1lbnQgPyBkb2N1bWVudC5ib2R5IDogcGFyZW50KS5jb250YWlucyhlbC5wYXJlbnROb2RlKTsKfQoKZnVuY3Rpb24gY3JlYXRlUmFuZ2Uobm9kZSwgY2hhcnMsIHJhbmdlKSB7CiAgaWYgKCFyYW5nZSkgewogICAgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpOwogICAgcmFuZ2Uuc2VsZWN0Tm9kZShub2RlKTsKICAgIHJhbmdlLnNldFN0YXJ0KG5vZGUsIDApOwogIH0KCiAgaWYgKGNoYXJzLmNvdW50ID09PSAwKSB7CiAgICByYW5nZS5zZXRFbmQobm9kZSwgY2hhcnMuY291bnQpOwogIH0gZWxzZSBpZiAoY2hhcnMuY291bnQgPiAwKSB7CiAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHsKICAgICAgaWYgKG5vZGUudGV4dENvbnRlbnQubGVuZ3RoIDwgY2hhcnMuY291bnQpIHsKICAgICAgICBjaGFycy5jb3VudCAtPSBub2RlLnRleHRDb250ZW50Lmxlbmd0aDsKICAgICAgfSBlbHNlIHsKICAgICAgICByYW5nZS5zZXRFbmQobm9kZSwgY2hhcnMuY291bnQpOwogICAgICAgIGNoYXJzLmNvdW50ID0gMDsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgZm9yICh2YXIgbHAgPSAwOyBjaGFycy5jb3VudCAhPT0gMCAmJiBscCA8IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGg7IGxwKyspIHsKICAgICAgICByYW5nZSA9IGNyZWF0ZVJhbmdlKG5vZGUuY2hpbGROb2Rlc1tscF0sIGNoYXJzLCByYW5nZSk7CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiByYW5nZTsKfQoKdmFyIHVybFJlZ2V4ID0gL15odHRwcz86XC9cLy87Cgp2YXIgQ2FyZXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIENhcmV0KGVsLCBlVm0pIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDYXJldCk7CgogICAgdGhpcy5lbCA9IGVsOwogICAgdGhpcy5lVm0gPSBlVm07CiAgICB0aGlzLl9yYW5nZSA9IG51bGw7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQ2FyZXQsIFt7CiAgICBrZXk6ICJzZWxlY3Rpb24iLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIGlmICh0aGlzLmVsKSB7CiAgICAgICAgdmFyIHNlbCA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpOyAvLyBvbmx5IHdoZW4gdGhlIHNlbGVjdGlvbiBpbiBlbGVtZW50CgogICAgICAgIGlmIChpc0NoaWxkT2Yoc2VsLmFuY2hvck5vZGUsIHRoaXMuZWwsIHRydWUpICYmIGlzQ2hpbGRPZihzZWwuZm9jdXNOb2RlLCB0aGlzLmVsLCB0cnVlKSkgewogICAgICAgICAgcmV0dXJuIHNlbDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogImhhc1NlbGVjdGlvbiIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uICE9PSBudWxsID8gdGhpcy5zZWxlY3Rpb24udG9TdHJpbmcoKS5sZW5ndGggPiAwIDogZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAicmFuZ2UiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBzZWwgPSB0aGlzLnNlbGVjdGlvbjsKCiAgICAgIGlmIChzZWwgIT09IG51bGwgJiYgc2VsLnJhbmdlQ291bnQpIHsKICAgICAgICByZXR1cm4gc2VsLmdldFJhbmdlQXQoMCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLl9yYW5nZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwYXJlbnQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciByYW5nZSA9IHRoaXMucmFuZ2U7CgogICAgICBpZiAocmFuZ2UgIT09IG51bGwpIHsKICAgICAgICB2YXIgbm9kZSA9IHJhbmdlLnN0YXJ0Q29udGFpbmVyOwogICAgICAgIHJldHVybiBub2RlLm5vZGVUeXBlID09PSBkb2N1bWVudC5FTEVNRU5UX05PREUgPyBub2RlIDogbm9kZS5wYXJlbnROb2RlOwogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJibG9ja1BhcmVudCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50OwoKICAgICAgaWYgKHBhcmVudCAhPT0gbnVsbCkgewogICAgICAgIHJldHVybiBnZXRCbG9ja0VsZW1lbnQocGFyZW50LCB0aGlzLmVsKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfSwgewogICAga2V5OiAic2F2ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZSgpIHsKICAgICAgdmFyIHJhbmdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0aGlzLnJhbmdlOwoKICAgICAgaWYgKHJhbmdlICE9PSBudWxsKSB7CiAgICAgICAgdGhpcy5fcmFuZ2UgPSByYW5nZTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInJlc3RvcmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc3RvcmUoKSB7CiAgICAgIHZhciByYW5nZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdGhpcy5fcmFuZ2U7CiAgICAgIHZhciByID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSwKICAgICAgICAgIHNlbCA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpOwoKICAgICAgaWYgKHJhbmdlICE9PSBudWxsKSB7CiAgICAgICAgci5zZXRTdGFydChyYW5nZS5zdGFydENvbnRhaW5lciwgcmFuZ2Uuc3RhcnRPZmZzZXQpOwogICAgICAgIHIuc2V0RW5kKHJhbmdlLmVuZENvbnRhaW5lciwgcmFuZ2UuZW5kT2Zmc2V0KTsKICAgICAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7CiAgICAgICAgc2VsLmFkZFJhbmdlKHIpOwogICAgICB9IGVsc2UgewogICAgICAgIHNlbC5zZWxlY3RBbGxDaGlsZHJlbih0aGlzLmVsKTsKICAgICAgICBzZWwuY29sbGFwc2VUb0VuZCgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2F2ZVBvc2l0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlUG9zaXRpb24oKSB7CiAgICAgIHZhciBjaGFyQ291bnQgPSAtMSwKICAgICAgICAgIG5vZGU7CiAgICAgIHZhciBzZWxlY3Rpb24gPSBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKSwKICAgICAgICAgIHBhcmVudEVsID0gdGhpcy5lbC5wYXJlbnROb2RlOwoKICAgICAgaWYgKHNlbGVjdGlvbi5mb2N1c05vZGUgJiYgaXNDaGlsZE9mKHNlbGVjdGlvbi5mb2N1c05vZGUsIHBhcmVudEVsKSkgewogICAgICAgIG5vZGUgPSBzZWxlY3Rpb24uZm9jdXNOb2RlOwogICAgICAgIGNoYXJDb3VudCA9IHNlbGVjdGlvbi5mb2N1c09mZnNldDsKCiAgICAgICAgd2hpbGUgKG5vZGUgJiYgbm9kZSAhPT0gcGFyZW50RWwpIHsKICAgICAgICAgIGlmIChub2RlICE9PSB0aGlzLmVsICYmIG5vZGUucHJldmlvdXNTaWJsaW5nKSB7CiAgICAgICAgICAgIG5vZGUgPSBub2RlLnByZXZpb3VzU2libGluZzsKICAgICAgICAgICAgY2hhckNvdW50ICs9IG5vZGUudGV4dENvbnRlbnQubGVuZ3RoOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuc2F2ZWRQb3MgPSBjaGFyQ291bnQ7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVzdG9yZVBvc2l0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXN0b3JlUG9zaXRpb24oKSB7CiAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDA7CgogICAgICBpZiAodGhpcy5zYXZlZFBvcyA+IDAgJiYgdGhpcy5zYXZlZFBvcyA8IGxlbmd0aCkgewogICAgICAgIHZhciBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCksCiAgICAgICAgICAgIHJhbmdlID0gY3JlYXRlUmFuZ2UodGhpcy5lbCwgewogICAgICAgICAgY291bnQ6IHRoaXMuc2F2ZWRQb3MKICAgICAgICB9KTsKCiAgICAgICAgaWYgKHJhbmdlKSB7CiAgICAgICAgICByYW5nZS5jb2xsYXBzZShmYWxzZSk7CiAgICAgICAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7CiAgICAgICAgICBzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2UpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImhhc1BhcmVudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFzUGFyZW50KG5hbWUsIHNwYW5MZXZlbCkgewogICAgICB2YXIgZWwgPSBzcGFuTGV2ZWwgPyB0aGlzLnBhcmVudCA6IHRoaXMuYmxvY2tQYXJlbnQ7CiAgICAgIHJldHVybiBlbCAhPT0gbnVsbCA/IGVsLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSA6IGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogImhhc1BhcmVudHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhc1BhcmVudHMobGlzdCwgcmVjdXJzaXZlKSB7CiAgICAgIHZhciBlbCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogdGhpcy5wYXJlbnQ7CgogICAgICBpZiAoZWwgPT09IG51bGwpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGlmIChlbCAhPT0gbnVsbCAmJiBsaXN0LmluY2x1ZGVzKGVsLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpID09PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiByZWN1cnNpdmUgPT09IHRydWUgPyB0aGlzLmhhc1BhcmVudHMobGlzdCwgcmVjdXJzaXZlLCBlbC5wYXJlbnROb2RlKSA6IGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogImlzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpcyhjbWQsIHBhcmFtKSB7CiAgICAgIGlmICh0aGlzLnNlbGVjdGlvbiA9PT0gbnVsbCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgc3dpdGNoIChjbWQpIHsKICAgICAgICBjYXNlICdmb3JtYXRCbG9jayc6CiAgICAgICAgICByZXR1cm4gcGFyYW0gPT09ICdESVYnICYmIHRoaXMucGFyZW50ID09PSB0aGlzLmVsIHx8IHRoaXMuaGFzUGFyZW50KHBhcmFtLCBwYXJhbSA9PT0gJ1BSRScpOwoKICAgICAgICBjYXNlICdsaW5rJzoKICAgICAgICAgIHJldHVybiB0aGlzLmhhc1BhcmVudCgnQScsIHRydWUpOwoKICAgICAgICBjYXNlICdmb250U2l6ZSc6CiAgICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlDb21tYW5kVmFsdWUoY21kKSA9PT0gcGFyYW07CgogICAgICAgIGNhc2UgJ2ZvbnROYW1lJzoKICAgICAgICAgIHZhciByZXMgPSBkb2N1bWVudC5xdWVyeUNvbW1hbmRWYWx1ZShjbWQpOwogICAgICAgICAgcmV0dXJuIHJlcyA9PT0gIlwiIi5jb25jYXQocGFyYW0sICJcIiIpIHx8IHJlcyA9PT0gcGFyYW07CgogICAgICAgIGNhc2UgJ2Z1bGxzY3JlZW4nOgogICAgICAgICAgcmV0dXJuIHRoaXMuZVZtLmluRnVsbHNjcmVlbi52YWx1ZTsKCiAgICAgICAgY2FzZSAndmlld3NvdXJjZSc6CiAgICAgICAgICByZXR1cm4gdGhpcy5lVm0uaXNWaWV3aW5nU291cmNlLnZhbHVlOwoKICAgICAgICBjYXNlIHZvaWQgMDoKICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHZhciBzdGF0ZSA9IGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN0YXRlKGNtZCk7CiAgICAgICAgICByZXR1cm4gcGFyYW0gIT09IHZvaWQgMCA/IHN0YXRlID09PSBwYXJhbSA6IHN0YXRlOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0UGFyZW50QXR0cmlidXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQYXJlbnRBdHRyaWJ1dGUoYXR0cmliKSB7CiAgICAgIGlmICh0aGlzLnBhcmVudCAhPT0gbnVsbCkgewogICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXRBdHRyaWJ1dGUoYXR0cmliKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYW4obmFtZSkgewogICAgICBpZiAobmFtZSA9PT0gJ291dGRlbnQnKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaGFzUGFyZW50cyhbJ2Jsb2NrcXVvdGUnLCAnbGknXSwgdHJ1ZSk7CiAgICAgIH0KCiAgICAgIGlmIChuYW1lID09PSAnaW5kZW50JykgewogICAgICAgIHJldHVybiB0aGlzLmhhc1BhcmVudHMoWydsaSddLCB0cnVlKTsKICAgICAgfQoKICAgICAgaWYgKG5hbWUgPT09ICdsaW5rJykgewogICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbiAhPT0gbnVsbCB8fCB0aGlzLmlzKCdsaW5rJyk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJhcHBseSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYXBwbHkoY21kLCBwYXJhbSkgewogICAgICB2YXIgZG9uZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogbm9vcDsKCiAgICAgIGlmIChjbWQgPT09ICdmb3JtYXRCbG9jaycpIHsKICAgICAgICBpZiAoWydCTE9DS1FVT1RFJywgJ0gxJywgJ0gyJywgJ0gzJywgJ0g0JywgJ0g1JywgJ0g2J10uaW5jbHVkZXMocGFyYW0pICYmIHRoaXMuaXMoY21kLCBwYXJhbSkpIHsKICAgICAgICAgIGNtZCA9ICdvdXRkZW50JzsKICAgICAgICAgIHBhcmFtID0gbnVsbDsKICAgICAgICB9CgogICAgICAgIGlmIChwYXJhbSA9PT0gJ1BSRScgJiYgdGhpcy5pcyhjbWQsICdQUkUnKSkgewogICAgICAgICAgcGFyYW0gPSAnUCc7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGNtZCA9PT0gJ3ByaW50JykgewogICAgICAgIGRvbmUoKTsKICAgICAgICB2YXIgd2luID0gd2luZG93Lm9wZW4oKTsKICAgICAgICB3aW4uZG9jdW1lbnQud3JpdGUoIlxuICAgICAgICA8IWRvY3R5cGUgaHRtbD5cbiAgICAgICAgPGh0bWw+XG4gICAgICAgICAgPGhlYWQ+XG4gICAgICAgICAgICA8dGl0bGU+UHJpbnQgLSAiLmNvbmNhdChkb2N1bWVudC50aXRsZSwgIjwvdGl0bGU+XG4gICAgICAgICAgPC9oZWFkPlxuICAgICAgICAgIDxib2R5PlxuICAgICAgICAgICAgPGRpdj4iKS5jb25jYXQodGhpcy5lbC5pbm5lckhUTUwsICI8L2Rpdj5cbiAgICAgICAgICA8L2JvZHk+XG4gICAgICAgIDwvaHRtbD5cbiAgICAgICIpKTsKICAgICAgICB3aW4ucHJpbnQoKTsKICAgICAgICB3aW4uY2xvc2UoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAoY21kID09PSAnbGluaycpIHsKICAgICAgICB2YXIgbGluayA9IHRoaXMuZ2V0UGFyZW50QXR0cmlidXRlKCdocmVmJyk7CgogICAgICAgIGlmIChsaW5rID09PSBudWxsKSB7CiAgICAgICAgICB2YXIgc2VsZWN0aW9uID0gdGhpcy5zZWxlY3RXb3JkKHRoaXMuc2VsZWN0aW9uKTsKICAgICAgICAgIHZhciB1cmwgPSBzZWxlY3Rpb24gPyBzZWxlY3Rpb24udG9TdHJpbmcoKSA6ICcnOwoKICAgICAgICAgIGlmICghdXJsLmxlbmd0aCkgewogICAgICAgICAgICBpZiAoIXRoaXMucmFuZ2UgfHwgIXRoaXMucmFuZ2UuY2xvbmVDb250ZW50cygpLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpKSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5lVm0uZWRpdExpbmtVcmwudmFsdWUgPSB1cmxSZWdleC50ZXN0KHVybCkgPyB1cmwgOiAnaHR0cHM6Ly8nOwogICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NyZWF0ZUxpbmsnLCBmYWxzZSwgdGhpcy5lVm0uZWRpdExpbmtVcmwudmFsdWUpOwogICAgICAgICAgdGhpcy5zYXZlKHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5lVm0uZWRpdExpbmtVcmwudmFsdWUgPSBsaW5rOwogICAgICAgICAgdGhpcy5yYW5nZS5zZWxlY3ROb2RlQ29udGVudHModGhpcy5wYXJlbnQpOwogICAgICAgICAgdGhpcy5zYXZlKCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAoY21kID09PSAnZnVsbHNjcmVlbicpIHsKICAgICAgICB0aGlzLmVWbS50b2dnbGVGdWxsc2NyZWVuKCk7CiAgICAgICAgZG9uZSgpOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmIChjbWQgPT09ICd2aWV3c291cmNlJykgewogICAgICAgIHRoaXMuZVZtLmlzVmlld2luZ1NvdXJjZS52YWx1ZSA9IHRoaXMuZVZtLmlzVmlld2luZ1NvdXJjZS52YWx1ZSA9PT0gZmFsc2U7CiAgICAgICAgdGhpcy5lVm0uc2V0Q29udGVudCh0aGlzLmVWbS5wcm9wcy5tb2RlbFZhbHVlKTsKICAgICAgICBkb25lKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBkb2N1bWVudC5leGVjQ29tbWFuZChjbWQsIGZhbHNlLCBwYXJhbSk7CiAgICAgIGRvbmUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZWxlY3RXb3JkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3RXb3JkKHNlbCkgewogICAgICBpZiAoc2VsID09PSBudWxsIHx8IHNlbC5pc0NvbGxhcHNlZCAhPT0gdHJ1ZSB8fAogICAgICAvKiBJRSAxMSAqLwogICAgICBzZWwubW9kaWZ5ID09PSB2b2lkIDApIHsKICAgICAgICByZXR1cm4gc2VsOwogICAgICB9IC8vIERldGVjdCBpZiBzZWxlY3Rpb24gaXMgYmFja3dhcmRzCgoKICAgICAgdmFyIHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTsKICAgICAgcmFuZ2Uuc2V0U3RhcnQoc2VsLmFuY2hvck5vZGUsIHNlbC5hbmNob3JPZmZzZXQpOwogICAgICByYW5nZS5zZXRFbmQoc2VsLmZvY3VzTm9kZSwgc2VsLmZvY3VzT2Zmc2V0KTsKICAgICAgdmFyIGRpcmVjdGlvbiA9IHJhbmdlLmNvbGxhcHNlZCA/IFsnYmFja3dhcmQnLCAnZm9yd2FyZCddIDogWydmb3J3YXJkJywgJ2JhY2t3YXJkJ107CiAgICAgIHJhbmdlLmRldGFjaCgpOyAvLyBtb2RpZnkoKSB3b3JrcyBvbiB0aGUgZm9jdXMgb2YgdGhlIHNlbGVjdGlvbgoKICAgICAgdmFyIGVuZE5vZGUgPSBzZWwuZm9jdXNOb2RlLAogICAgICAgICAgZW5kT2Zmc2V0ID0gc2VsLmZvY3VzT2Zmc2V0OwogICAgICBzZWwuY29sbGFwc2Uoc2VsLmFuY2hvck5vZGUsIHNlbC5hbmNob3JPZmZzZXQpOwogICAgICBzZWwubW9kaWZ5KCdtb3ZlJywgZGlyZWN0aW9uWzBdLCAnY2hhcmFjdGVyJyk7CiAgICAgIHNlbC5tb2RpZnkoJ21vdmUnLCBkaXJlY3Rpb25bMV0sICd3b3JkJyk7CiAgICAgIHNlbC5leHRlbmQoZW5kTm9kZSwgZW5kT2Zmc2V0KTsKICAgICAgc2VsLm1vZGlmeSgnZXh0ZW5kJywgZGlyZWN0aW9uWzFdLCAnY2hhcmFjdGVyJyk7CiAgICAgIHNlbC5tb2RpZnkoJ2V4dGVuZCcsIGRpcmVjdGlvblswXSwgJ3dvcmQnKTsKICAgICAgcmV0dXJuIHNlbDsKICAgIH0KICB9XSk7CgogIHJldHVybiBDYXJldDsKfSgpOwoKZXhwb3J0IHsgQ2FyZXQgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["/app/node_modules/quasar/src/components/editor/editor-caret.js"],"names":["noop","getBlockElement","el","parent","nodeName","toLowerCase","includes","style","window","getComputedStyle","currentStyle","display","parentNode","isChildOf","orSame","document","body","contains","createRange","node","chars","range","selectNode","setStart","count","setEnd","nodeType","Node","TEXT_NODE","textContent","length","lp","childNodes","urlRegex","Caret","eVm","_range","sel","getSelection","anchorNode","focusNode","selection","toString","rangeCount","getRangeAt","startContainer","ELEMENT_NODE","r","startOffset","endContainer","endOffset","removeAllRanges","addRange","selectAllChildren","collapseToEnd","charCount","parentEl","focusOffset","previousSibling","savedPos","collapse","name","spanLevel","blockParent","list","recursive","hasParents","cmd","param","hasParent","queryCommandValue","res","inFullscreen","value","isViewingSource","state","queryCommandState","attrib","getAttribute","is","done","win","open","write","title","innerHTML","print","close","link","getParentAttribute","selectWord","url","cloneContents","querySelector","editLinkUrl","test","execCommand","save","selectNodeContents","toggleFullscreen","setContent","props","modelValue","isCollapsed","modify","anchorOffset","direction","collapsed","detach","endNode","extend"],"mappings":"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","sourcesContent":["import { noop } from '../../utils/event.js'\n\nfunction getBlockElement (el, parent) {\n  if (parent && el === parent) {\n    return null\n  }\n\n  const nodeName = el.nodeName.toLowerCase()\n\n  if ([ 'div', 'li', 'ul', 'ol', 'blockquote' ].includes(nodeName) === true) {\n    return el\n  }\n\n  const\n    style = window.getComputedStyle\n      ? window.getComputedStyle(el)\n      : el.currentStyle,\n    display = style.display\n\n  if (display === 'block' || display === 'table') {\n    return el\n  }\n\n  return getBlockElement(el.parentNode)\n}\n\nfunction isChildOf (el, parent, orSame) {\n  return !el || el === document.body\n    ? false\n    : (orSame === true && el === parent) || (parent === document ? document.body : parent).contains(el.parentNode)\n}\n\nfunction createRange (node, chars, range) {\n  if (!range) {\n    range = document.createRange()\n    range.selectNode(node)\n    range.setStart(node, 0)\n  }\n\n  if (chars.count === 0) {\n    range.setEnd(node, chars.count)\n  }\n  else if (chars.count > 0) {\n    if (node.nodeType === Node.TEXT_NODE) {\n      if (node.textContent.length < chars.count) {\n        chars.count -= node.textContent.length\n      }\n      else {\n        range.setEnd(node, chars.count)\n        chars.count = 0\n      }\n    }\n    else {\n      for (let lp = 0; chars.count !== 0 && lp < node.childNodes.length; lp++) {\n        range = createRange(node.childNodes[ lp ], chars, range)\n      }\n    }\n  }\n\n  return range\n}\n\nconst urlRegex = /^https?:\\/\\//\n\nexport default class Caret {\n  constructor (el, eVm) {\n    this.el = el\n    this.eVm = eVm\n    this._range = null\n  }\n\n  get selection () {\n    if (this.el) {\n      const sel = document.getSelection()\n\n      // only when the selection in element\n      if (isChildOf(sel.anchorNode, this.el, true) && isChildOf(sel.focusNode, this.el, true)) {\n        return sel\n      }\n    }\n\n    return null\n  }\n\n  get hasSelection () {\n    return this.selection !== null\n      ? this.selection.toString().length > 0\n      : false\n  }\n\n  get range () {\n    const sel = this.selection\n\n    if (sel !== null && sel.rangeCount) {\n      return sel.getRangeAt(0)\n    }\n\n    return this._range\n  }\n\n  get parent () {\n    const range = this.range\n\n    if (range !== null) {\n      const node = range.startContainer\n\n      return node.nodeType === document.ELEMENT_NODE\n        ? node\n        : node.parentNode\n    }\n\n    return null\n  }\n\n  get blockParent () {\n    const parent = this.parent\n\n    if (parent !== null) {\n      return getBlockElement(parent, this.el)\n    }\n\n    return null\n  }\n\n  save (range = this.range) {\n    if (range !== null) {\n      this._range = range\n    }\n  }\n\n  restore (range = this._range) {\n    const\n      r = document.createRange(),\n      sel = document.getSelection()\n\n    if (range !== null) {\n      r.setStart(range.startContainer, range.startOffset)\n      r.setEnd(range.endContainer, range.endOffset)\n      sel.removeAllRanges()\n      sel.addRange(r)\n    }\n    else {\n      sel.selectAllChildren(this.el)\n      sel.collapseToEnd()\n    }\n  }\n\n  savePosition () {\n    let charCount = -1, node\n    const\n      selection = document.getSelection(),\n      parentEl = this.el.parentNode\n\n    if (selection.focusNode && isChildOf(selection.focusNode, parentEl)) {\n      node = selection.focusNode\n      charCount = selection.focusOffset\n\n      while (node && node !== parentEl) {\n        if (node !== this.el && node.previousSibling) {\n          node = node.previousSibling\n          charCount += node.textContent.length\n        }\n        else {\n          node = node.parentNode\n        }\n      }\n    }\n\n    this.savedPos = charCount\n  }\n\n  restorePosition (length = 0) {\n    if (this.savedPos > 0 && this.savedPos < length) {\n      const\n        selection = window.getSelection(),\n        range = createRange(this.el, { count: this.savedPos })\n\n      if (range) {\n        range.collapse(false)\n        selection.removeAllRanges()\n        selection.addRange(range)\n      }\n    }\n  }\n\n  hasParent (name, spanLevel) {\n    const el = spanLevel\n      ? this.parent\n      : this.blockParent\n\n    return el !== null\n      ? el.nodeName.toLowerCase() === name.toLowerCase()\n      : false\n  }\n\n  hasParents (list, recursive, el = this.parent) {\n    if (el === null) {\n      return false\n    }\n\n    if (el !== null && list.includes(el.nodeName.toLowerCase()) === true) {\n      return true\n    }\n\n    return recursive === true\n      ? this.hasParents(list, recursive, el.parentNode)\n      : false\n  }\n\n  is (cmd, param) {\n    if (this.selection === null) {\n      return false\n    }\n\n    switch (cmd) {\n      case 'formatBlock':\n        return (param === 'DIV' && this.parent === this.el)\n          || this.hasParent(param, param === 'PRE')\n      case 'link':\n        return this.hasParent('A', true)\n      case 'fontSize':\n        return document.queryCommandValue(cmd) === param\n      case 'fontName':\n        const res = document.queryCommandValue(cmd)\n        return res === `\"${ param }\"` || res === param\n      case 'fullscreen':\n        return this.eVm.inFullscreen.value\n      case 'viewsource':\n        return this.eVm.isViewingSource.value\n      case void 0:\n        return false\n      default:\n        const state = document.queryCommandState(cmd)\n        return param !== void 0 ? state === param : state\n    }\n  }\n\n  getParentAttribute (attrib) {\n    if (this.parent !== null) {\n      return this.parent.getAttribute(attrib)\n    }\n\n    return null\n  }\n\n  can (name) {\n    if (name === 'outdent') {\n      return this.hasParents([ 'blockquote', 'li' ], true)\n    }\n\n    if (name === 'indent') {\n      return this.hasParents([ 'li' ], true)\n    }\n\n    if (name === 'link') {\n      return this.selection !== null || this.is('link')\n    }\n  }\n\n  apply (cmd, param, done = noop) {\n    if (cmd === 'formatBlock') {\n      if ([ 'BLOCKQUOTE', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6' ].includes(param) && this.is(cmd, param)) {\n        cmd = 'outdent'\n        param = null\n      }\n\n      if (param === 'PRE' && this.is(cmd, 'PRE')) {\n        param = 'P'\n      }\n    }\n    else if (cmd === 'print') {\n      done()\n\n      const win = window.open()\n\n      win.document.write(`\n        <!doctype html>\n        <html>\n          <head>\n            <title>Print - ${ document.title }</title>\n          </head>\n          <body>\n            <div>${ this.el.innerHTML }</div>\n          </body>\n        </html>\n      `)\n      win.print()\n      win.close()\n\n      return\n    }\n    else if (cmd === 'link') {\n      const link = this.getParentAttribute('href')\n\n      if (link === null) {\n        const selection = this.selectWord(this.selection)\n        const url = selection ? selection.toString() : ''\n\n        if (!url.length) {\n          if (!this.range || !this.range.cloneContents().querySelector('img')) {\n            return\n          }\n        }\n\n        this.eVm.editLinkUrl.value = urlRegex.test(url) ? url : 'https://'\n        document.execCommand('createLink', false, this.eVm.editLinkUrl.value)\n\n        this.save(selection.getRangeAt(0))\n      }\n      else {\n        this.eVm.editLinkUrl.value = link\n\n        this.range.selectNodeContents(this.parent)\n        this.save()\n      }\n\n      return\n    }\n    else if (cmd === 'fullscreen') {\n      this.eVm.toggleFullscreen()\n      done()\n\n      return\n    }\n    else if (cmd === 'viewsource') {\n      this.eVm.isViewingSource.value = this.eVm.isViewingSource.value === false\n      this.eVm.setContent(this.eVm.props.modelValue)\n      done()\n\n      return\n    }\n\n    document.execCommand(cmd, false, param)\n\n    done()\n  }\n\n  selectWord (sel) {\n    if (sel === null || sel.isCollapsed !== true || /* IE 11 */ sel.modify === void 0) {\n      return sel\n    }\n\n    // Detect if selection is backwards\n    const range = document.createRange()\n    range.setStart(sel.anchorNode, sel.anchorOffset)\n    range.setEnd(sel.focusNode, sel.focusOffset)\n    const direction = range.collapsed ? [ 'backward', 'forward' ] : [ 'forward', 'backward' ]\n    range.detach()\n\n    // modify() works on the focus of the selection\n    const\n      endNode = sel.focusNode,\n      endOffset = sel.focusOffset\n    sel.collapse(sel.anchorNode, sel.anchorOffset)\n    sel.modify('move', direction[ 0 ], 'character')\n    sel.modify('move', direction[ 1 ], 'word')\n    sel.extend(endNode, endOffset)\n    sel.modify('extend', direction[ 1 ], 'character')\n    sel.modify('extend', direction[ 0 ], 'word')\n\n    return sel\n  }\n}\n"]}]}