{"remainingRequest":"/app/node_modules/babel-loader/lib/index.js!/app/node_modules/vue-cli-plugin-quasar/lib/loader.js.transform-quasar-imports.js!/app/node_modules/vue-cli-plugin-quasar/lib/loader.vue.auto-import-quasar.js??ref--1-0!/app/node_modules/cache-loader/dist/cjs.js??ref--1-1!/app/node_modules/vue-loader-v16/dist/index.js??ref--1-2!/app/src/components/Search.vue?vue&type=script&lang=js","dependencies":[{"path":"/app/src/components/Search.vue","mtime":1641198370377},{"path":"/app/babel.config.js","mtime":1641198370373},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1640299636612},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1640299636618},{"path":"/app/node_modules/vue-cli-plugin-quasar/lib/loader.js.transform-quasar-imports.js","mtime":1640775278388},{"path":"/app/node_modules/vue-cli-plugin-quasar/lib/loader.vue.auto-import-quasar.js","mtime":1640775278388},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1640299636612},{"path":"/app/node_modules/vue-loader-v16/dist/index.js","mtime":1640299655523}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2guanMiOwppbXBvcnQgQ29udGFpbmVyIGZyb20gIkAvY29tcG9uZW50cy9Db250YWluZXIudnVlIjsKaW1wb3J0IHsgZ2V0UmF0aW5nQ29sb3IgfSBmcm9tICJAL3V0aWxzIjsKaW1wb3J0IENvbW1lbnRzQVBJIGZyb20gIkAvYXBpL2NvbW1lbnRzIjsKaW1wb3J0IFBhZ2luYXRpb24gZnJvbSAiQC9jb21wb25lbnRzL0NvbW1lbnRzL1BhZ2luYXRpb24iOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk15Q29tbWVudHNDb21wb25lbnQiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb3VudGVkOiBmYWxzZSwKICAgICAgY29tbWVudHM6IFtdLAogICAgICBwYWdlOiAxLAogICAgICBwZXJQYWdlOiAxMCwKICAgICAgdG90YWw6IDAsCiAgICAgIHRvdGFsUGFnZXM6IDAKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBDb250YWluZXI6IENvbnRhaW5lciwKICAgIFBhZ2luYXRpb246IFBhZ2luYXRpb24KICB9LAogIG1ldGhvZHM6IHsKICAgIHJlc2V0SGVpZ2h0OiBmdW5jdGlvbiByZXNldEhlaWdodChvZmZzZXQpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBtaW5IZWlnaHQ6ICJjYWxjKDEwMHZoIC0gIi5jb25jYXQoKG9mZnNldCB8fCAwKSArIDcwLCAicHgpIikKICAgICAgfTsKICAgIH0sCiAgICBnZXRDb2xvcjogZnVuY3Rpb24gZ2V0Q29sb3IocmF0ZSkgewogICAgICByZXR1cm4gZ2V0UmF0aW5nQ29sb3IocmF0ZSk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzUwOTgxMDkzCiAgICAiJHJvdXRlLnF1ZXJ5LnBhZ2UiOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2hhbmRsZXIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocGFnZSkgewogICAgICAgICAgdmFyIHNpdGUsIGNvbW1lbnRSZXM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMuJHJvdXRlLm5hbWUgIT09ICJTZWFyY2giKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIC8vIHRvIHByZXZlbnQgZXJyb3Igd2hlbiBxdWl0dGluZyB0aGlzIHBhZ2UuCiAgICAgICAgICAgICAgICAgIHRoaXMubW91bnRlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzsKICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlID0gcGFnZSB8fCAxOwogICAgICAgICAgICAgICAgICBzaXRlID0gdGhpcy4kcm91dGUucXVlcnkuc2l0ZTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIHJldHVybiBDb21tZW50c0FQSS5zZWFyY2goewogICAgICAgICAgICAgICAgICAgIHNpdGU6IHNpdGUsCiAgICAgICAgICAgICAgICAgICAgcGFnZTogdGhpcy5wYWdlCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgY29tbWVudFJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAgIHRoaXMuY29tbWVudHMgPSBjb21tZW50UmVzLmNvbW1lbnRzOwogICAgICAgICAgICAgICAgICB0aGlzLnBlclBhZ2UgPSBjb21tZW50UmVzLnBlclBhZ2U7CiAgICAgICAgICAgICAgICAgIHRoaXMudG90YWwgPSBjb21tZW50UmVzLnRvdGFsOwogICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsUGFnZXMgPSBjb21tZW50UmVzLnRvdGFsUGFnZXM7IC8vIGNvbnNvbGUubG9nKGNvbW1lbnRSZXMpOwogICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzaXRlKTsKCiAgICAgICAgICAgICAgICAgIHRoaXMubW91bnRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE2OwogICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDMpOwogICAgICAgICAgICAgICAgICAvLyB3aW5kb3cuZXJyID0gZXJyb3I7CiAgICAgICAgICAgICAgICAgIHRoaXMubW91bnRlZCA9IHRydWU7CgogICAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlLCB0aGlzLCBbWzMsIDE2XV0pOwogICAgICAgIH0pKTsKCiAgICAgICAgZnVuY3Rpb24gaGFuZGxlcihfeCkgewogICAgICAgICAgcmV0dXJuIF9oYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gaGFuZGxlcjsKICAgICAgfSgpLAogICAgICBkZWVwOiB0cnVlLAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0KICB9Cn07"},{"version":3,"sources":["/app/src/components/Search.vue"],"names":[],"mappings":";;;;;AA2EA,OAAO,SAAP,MAAsB,4BAAtB;AACA,SAAS,cAAT,QAA+B,SAA/B;AACA,OAAO,WAAP,MAAwB,gBAAxB;AACA,OAAO,UAAP,MAAuB,kCAAvB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,qBADO;AAEb,EAAA,IAFa,kBAEN;AACL,WAAO;AACL,MAAA,OAAO,EAAE,KADJ;AAEL,MAAA,QAAQ,EAAE,EAFL;AAGL,MAAA,IAAI,EAAE,CAHD;AAIL,MAAA,OAAO,EAAE,EAJJ;AAKL,MAAA,KAAK,EAAE,CALF;AAML,MAAA,UAAU,EAAE;AANP,KAAP;AAQD,GAXY;AAYb,EAAA,UAAU,EAAE;AACV,IAAA,SAAS,EAAT,SADU;AAEV,IAAA,UAAU,EAAV;AAFU,GAZC;AAgBb,EAAA,OAAO,EAAE;AACP,IAAA,WADO,uBACK,MADL,EACa;AAClB,aAAO;AAAE,QAAA,SAAS,yBAAkB,CAAC,MAAK,IAAK,CAAX,IAAgB,EAAlC;AAAX,OAAP;AACD,KAHM;AAIP,IAAA,QAJO,oBAIE,IAJF,EAIQ;AACb,aAAO,cAAc,CAAC,IAAD,CAArB;AACD;AANM,GAhBI;AAwBb,EAAA,KAAK,EAAE;AACL;AACA,yBAAqB;AACnB,MAAA,OAAO;AAAA,+EAAE,iBAAgB,IAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACH,KAAK,MAAL,CAAY,IAAZ,KAAqB,QADlB;AAAA;AAAA;AAAA;;AAAA;;AAAA;AACoC;AAE3C,uBAAK,OAAL,GAAe,KAAf;AAHO;AAKL,uBAAK,IAAL,GAAY,IAAG,IAAK,CAApB;AACQ,kBAAA,IANH,GAMY,KAAK,MAAL,CAAY,KANxB,CAMG,IANH;AAAA;AAAA,yBAOoB,WAAW,CAAC,MAAZ,CAAmB;AAC1C,oBAAA,IAAI,EAAJ,IAD0C;AAE1C,oBAAA,IAAI,EAAE,KAAK;AAF+B,mBAAnB,CAPpB;;AAAA;AAOC,kBAAA,UAPD;AAWL,uBAAK,QAAL,GAAgB,UAAU,CAAC,QAA3B;AACA,uBAAK,OAAL,GAAe,UAAU,CAAC,OAA1B;AACA,uBAAK,KAAL,GAAa,UAAU,CAAC,KAAxB;AACA,uBAAK,UAAL,GAAkB,UAAU,CAAC,UAA7B,CAdK,CAgBL;AACA;;AACA,uBAAK,OAAL,GAAe,IAAf;AAlBK;AAAA;;AAAA;AAAA;AAAA;AAoBL;AACA,uBAAK,OAAL,GAAe,IAAf;;AArBK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,SADY;AAyBnB,MAAA,IAAI,EAAE,IAzBa;AA0BnB,MAAA,SAAS,EAAE;AA1BQ;AAFhB;AAxBM,CAAf","sourcesContent":["<template>\n  <q-page padding :style-fn=\"resetHeight\" class=\"bg-white\">\n    <q-spinner-audio\n      v-if=\"!mounted\"\n      class=\"fixed-center\"\n      color=\"primary\"\n      size=\"4em\"\n    />\n    <Container style=\"max-width: 700px\" v-if=\"mounted && comments.length\">\n      <div class=\"text-bold text-h5 q-mb-md\" v-if=\"$route.query.site\">\n        Here are your results for \"{{ $route.query.site }}\"\n      </div>\n      <div\n        class=\"column items-start q-mb-lg\"\n        v-for=\"comment in comments\"\n        :key=\"comment.max_id\"\n      >\n        <router-link\n          class=\"row yl-lu text-bold text-h6 text-accent\"\n          :to=\"`/sites/${comment.site_link}`\"\n        >\n          {{ comment.site_name }}&nbsp;|&nbsp;{{ comment.site_link }}\n        </router-link>\n        <div class=\"row items-center q-mt-xs\">\n          <q-rating\n            size=\"2em\"\n            icon=\"star_border\"\n            icon-selected=\"star\"\n            readonly\n            :modelValue=\"+comment.rating_avg\"\n            :color=\"getColor(+comment.rating_avg)\"\n          />\n          <span class=\"yl-divider\"></span>\n          {{ comment.comments_total }} comment<span\n            v-if=\"comment.comments_total > 1\"\n          >\n            s\n          </span>\n          <span class=\"yl-divider\">|</span> YowlScore\n          {{ +(+comment.rating_avg).toFixed(1) }}\n          <!-- https://stackoverflow.com/a/12830454 -->\n          <span class=\"yl-divider\">|</span>\n          <router-link\n            :to=\"`/comments/add?site_link=${comment.site_link}&site_name=${comment.site_name}`\"\n            class=\"yl-lu text-accent\"\n          >\n            Write a review\n          </router-link>\n        </div>\n      </div>\n\n      <Pagination\n        v-if=\"totalPages > 1\"\n        :page=\"+page\"\n        :totalPages=\"totalPages\"\n        :limit=\"5\"\n        :link=\"`/search`\"\n        :query=\"{ site: $route.query.site || '' }\"\n      />\n    </Container>\n    <Container style=\"max-width: 700px\" v-if=\"mounted && !comments.length\">\n      <div class=\"text-bold text-h5 q-mb-md\">\n        Oops, we couldnâ€™t find any results matching \"{{ $route.query.site }}\"\n      </div>\n    </Container>\n  </q-page>\n</template>\n\n<style lang=\"scss\" scoped>\n.yl-divider {\n  margin: 0 8px;\n}\n</style>\n\n<script>\nimport Container from \"@/components/Container.vue\";\nimport { getRatingColor } from \"@/utils\";\nimport CommentsAPI from \"@/api/comments\";\nimport Pagination from \"@/components/Comments/Pagination\";\n\nexport default {\n  name: \"MyCommentsComponent\",\n  data() {\n    return {\n      mounted: false,\n      comments: [],\n      page: 1,\n      perPage: 10,\n      total: 0,\n      totalPages: 0,\n    };\n  },\n  components: {\n    Container,\n    Pagination,\n  },\n  methods: {\n    resetHeight(offset) {\n      return { minHeight: `calc(100vh - ${(offset || 0) + 70}px)` };\n    },\n    getColor(rate) {\n      return getRatingColor(rate);\n    },\n  },\n  watch: {\n    // https://stackoverflow.com/a/50981093\n    \"$route.query.page\": {\n      handler: async function (page) {\n        if (this.$route.name !== \"Search\") return; // to prevent error when quitting this page.\n\n        this.mounted = false;\n        try {\n          this.page = page || 1;\n          const { site } = this.$route.query;\n          const commentRes = await CommentsAPI.search({\n            site,\n            page: this.page,\n          });\n          this.comments = commentRes.comments;\n          this.perPage = commentRes.perPage;\n          this.total = commentRes.total;\n          this.totalPages = commentRes.totalPages;\n\n          // console.log(commentRes);\n          // console.log(site);\n          this.mounted = true;\n        } catch (error) {\n          // window.err = error;\n          this.mounted = true;\n        }\n      },\n      deep: true,\n      immediate: true,\n    },\n  },\n};\n</script>\n"],"sourceRoot":""}]}