{"remainingRequest":"/app/node_modules/babel-loader/lib/index.js!/app/node_modules/vue-cli-plugin-quasar/lib/loader.js.transform-quasar-imports.js!/app/node_modules/vue-cli-plugin-quasar/lib/loader.vue.auto-import-quasar.js??ref--1-0!/app/node_modules/cache-loader/dist/cjs.js??ref--1-1!/app/node_modules/vue-loader-v16/dist/index.js??ref--1-2!/app/src/components/Comments/UserComments.vue?vue&type=script&lang=js","dependencies":[{"path":"/app/src/components/Comments/UserComments.vue","mtime":1641198370373},{"path":"/app/babel.config.js","mtime":1641198370373},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1640299636612},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1640299636618},{"path":"/app/node_modules/vue-cli-plugin-quasar/lib/loader.js.transform-quasar-imports.js","mtime":1640775278388},{"path":"/app/node_modules/vue-cli-plugin-quasar/lib/loader.vue.auto-import-quasar.js","mtime":1640775278388},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1640299636612},{"path":"/app/node_modules/vue-loader-v16/dist/index.js","mtime":1640299655523}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgQ29udGFpbmVyIGZyb20gIkAvY29tcG9uZW50cy9Db250YWluZXIudnVlIjsKaW1wb3J0IHsgZ2V0UmF0aW5nQ29sb3IgfSBmcm9tICJAL3V0aWxzIjsKaW1wb3J0IFVzZXJzQVBJIGZyb20gIkAvYXBpL3VzZXJzIjsKaW1wb3J0IENvbW1lbnRzQVBJIGZyb20gIkAvYXBpL2NvbW1lbnRzIjsKaW1wb3J0IEVycm9yNDA0IGZyb20gIkAvdmlld3MvRXJyb3I0MDQudnVlIjsKaW1wb3J0IFBhZ2luYXRpb24gZnJvbSAiQC9jb21wb25lbnRzL0NvbW1lbnRzL1BhZ2luYXRpb24iOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk15Q29tbWVudHNDb21wb25lbnQiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb3VudGVkOiBmYWxzZSwKICAgICAgdXNlcjogbnVsbCwKICAgICAgY29tbWVudHM6IFtdLAogICAgICBwYWdlOiAxLAogICAgICBwZXJQYWdlOiAxMCwKICAgICAgdG90YWw6IDAsCiAgICAgIHRvdGFsUGFnZXM6IDAKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBDb250YWluZXI6IENvbnRhaW5lciwKICAgIEVycm9yNDA0OiBFcnJvcjQwNCwKICAgIFBhZ2luYXRpb246IFBhZ2luYXRpb24KICB9LAogIG1ldGhvZHM6IHsKICAgIHJlc2V0SGVpZ2h0OiBmdW5jdGlvbiByZXNldEhlaWdodChvZmZzZXQpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBtaW5IZWlnaHQ6ICJjYWxjKDEwMHZoIC0gIi5jb25jYXQoKG9mZnNldCB8fCAwKSArIDcwLCAicHgpIikKICAgICAgfTsKICAgIH0sCiAgICBnZXRDb2xvcjogZnVuY3Rpb24gZ2V0Q29sb3IocmF0ZSkgewogICAgICByZXR1cm4gZ2V0UmF0aW5nQ29sb3IocmF0ZSk7CiAgICB9LAogICAgZ2V0RGF0ZTogZnVuY3Rpb24gZ2V0RGF0ZShzdHIpIHsKICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShzdHIpOwogICAgICB2YXIgZGF0ZU9wdGlvbnMgPSB7CiAgICAgICAgLy8gd2Vla2RheTogImxvbmciLAogICAgICAgIHllYXI6ICJudW1lcmljIiwKICAgICAgICBtb250aDogInNob3J0IiwKICAgICAgICBkYXk6ICJudW1lcmljIgogICAgICB9OwogICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoImVuLVVTIiwgZGF0ZU9wdGlvbnMpOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS81MDk4MTA5MwogICAgIiRyb3V0ZS5xdWVyeS5wYWdlIjogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9oYW5kbGVyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHBhZ2UpIHsKICAgICAgICAgIHZhciB1c2VySWQsIHVzZXJSZXMsIGNvbW1lbnRSZXM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMuJHJvdXRlLm5hbWUgIT09ICJVc2VyQ29tbWVudHMiKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIC8vIHRvIHByZXZlbnQgZXJyb3Igd2hlbiBxdWl0dGluZyB0aGlzIHBhZ2UuCiAgICAgICAgICAgICAgICAgIHRoaXMubW91bnRlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzsKICAgICAgICAgICAgICAgICAgdXNlcklkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJzQVBJLnNob3codXNlcklkKTsKCiAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgIHVzZXJSZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgICB0aGlzLnVzZXIgPSB1c2VyUmVzLnVzZXI7CiAgICAgICAgICAgICAgICAgIHRoaXMucGFnZSA9IHBhZ2UgfHwgMTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICByZXR1cm4gQ29tbWVudHNBUEkuaW5kZXgoewogICAgICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJJZCwKICAgICAgICAgICAgICAgICAgICBwYWdlOiB0aGlzLnBhZ2UKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgY29tbWVudFJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAgIHRoaXMuY29tbWVudHMgPSBjb21tZW50UmVzLmNvbW1lbnRzOwogICAgICAgICAgICAgICAgICB0aGlzLnBlclBhZ2UgPSBjb21tZW50UmVzLnBlclBhZ2U7CiAgICAgICAgICAgICAgICAgIHRoaXMudG90YWwgPSBjb21tZW50UmVzLnRvdGFsOwogICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsUGFnZXMgPSBjb21tZW50UmVzLnRvdGFsUGFnZXM7CiAgICAgICAgICAgICAgICAgIHRoaXMubW91bnRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDIwOwogICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDMpOwogICAgICAgICAgICAgICAgICAvLyB3aW5kb3cuZXJyID0gZXJyb3I7CiAgICAgICAgICAgICAgICAgIHRoaXMubW91bnRlZCA9IHRydWU7CgogICAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlLCB0aGlzLCBbWzMsIDIwXV0pOwogICAgICAgIH0pKTsKCiAgICAgICAgZnVuY3Rpb24gaGFuZGxlcihfeCkgewogICAgICAgICAgcmV0dXJuIF9oYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gaGFuZGxlcjsKICAgICAgfSgpLAogICAgICBkZWVwOiB0cnVlLAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0KICB9Cn07"},{"version":3,"sources":["/app/src/components/Comments/UserComments.vue"],"names":[],"mappings":";;;AAkFA,OAAO,SAAP,MAAsB,4BAAtB;AACA,SAAS,cAAT,QAA+B,SAA/B;AACA,OAAO,QAAP,MAAqB,aAArB;AACA,OAAO,WAAP,MAAwB,gBAAxB;AACA,OAAO,QAAP,MAAqB,sBAArB;AACA,OAAO,UAAP,MAAuB,kCAAvB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,qBADO;AAEb,EAAA,IAFa,kBAEN;AACL,WAAO;AACL,MAAA,OAAO,EAAE,KADJ;AAEL,MAAA,IAAI,EAAE,IAFD;AAGL,MAAA,QAAQ,EAAE,EAHL;AAIL,MAAA,IAAI,EAAE,CAJD;AAKL,MAAA,OAAO,EAAE,EALJ;AAML,MAAA,KAAK,EAAE,CANF;AAOL,MAAA,UAAU,EAAE;AAPP,KAAP;AASD,GAZY;AAab,EAAA,UAAU,EAAE;AACV,IAAA,SAAS,EAAT,SADU;AAEV,IAAA,QAAQ,EAAR,QAFU;AAGV,IAAA,UAAU,EAAV;AAHU,GAbC;AAkBb,EAAA,OAAO,EAAE;AACP,IAAA,WADO,uBACK,MADL,EACa;AAClB,aAAO;AAAE,QAAA,SAAS,yBAAkB,CAAC,MAAK,IAAK,CAAX,IAAgB,EAAlC;AAAX,OAAP;AACD,KAHM;AAIP,IAAA,QAJO,oBAIE,IAJF,EAIQ;AACb,aAAO,cAAc,CAAC,IAAD,CAArB;AACD,KANM;AAOP,IAAA,OAPO,mBAOC,GAPD,EAOM;AACX,UAAM,IAAG,GAAI,IAAI,IAAJ,CAAS,GAAT,CAAb;AACA,UAAM,WAAU,GAAI;AAClB;AACA,QAAA,IAAI,EAAE,SAFY;AAGlB,QAAA,KAAK,EAAE,OAHW;AAIlB,QAAA,GAAG,EAAE;AAJa,OAApB;AAMA,aAAO,IAAI,CAAC,kBAAL,CAAwB,OAAxB,EAAiC,WAAjC,CAAP;AACD;AAhBM,GAlBI;AAoCb,EAAA,KAAK,EAAE;AACL;AACA,yBAAqB;AACnB,MAAA,OAAO;AAAA,+EAAE,iBAAgB,IAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACH,KAAK,MAAL,CAAY,IAAZ,KAAqB,cADlB;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAC0C;AAEjD,uBAAK,OAAL,GAAe,KAAf;AAHO;AAKC,kBAAA,MALD,GAKU,KAAK,MAAL,CAAY,MAAZ,CAAmB,EAL7B;AAAA;AAAA,yBAMiB,QAAQ,CAAC,IAAT,CAAc,MAAd,CANjB;;AAAA;AAMC,kBAAA,OAND;AAOL,uBAAK,IAAL,GAAY,OAAO,CAAC,IAApB;AAEA,uBAAK,IAAL,GAAY,IAAG,IAAK,CAApB;AATK;AAAA,yBAUoB,WAAW,CAAC,KAAZ,CAAkB;AACzC,oBAAA,IAAI,EAAE,MADmC;AAEzC,oBAAA,IAAI,EAAE,KAAK;AAF8B,mBAAlB,CAVpB;;AAAA;AAUC,kBAAA,UAVD;AAcL,uBAAK,QAAL,GAAgB,UAAU,CAAC,QAA3B;AACA,uBAAK,OAAL,GAAe,UAAU,CAAC,OAA1B;AACA,uBAAK,KAAL,GAAa,UAAU,CAAC,KAAxB;AACA,uBAAK,UAAL,GAAkB,UAAU,CAAC,UAA7B;AAEA,uBAAK,OAAL,GAAe,IAAf;AAnBK;AAAA;;AAAA;AAAA;AAAA;AAqBL;AACA,uBAAK,OAAL,GAAe,IAAf;;AAtBK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,SADY;AA0BnB,MAAA,IAAI,EAAE,IA1Ba;AA2BnB,MAAA,SAAS,EAAE;AA3BQ;AAFhB;AApCM,CAAf","sourcesContent":["<template>\n  <q-page padding :style-fn=\"resetHeight\" class=\"bg-secondary\">\n    <q-spinner-audio\n      v-if=\"!mounted\"\n      class=\"fixed-center\"\n      color=\"white\"\n      size=\"4em\"\n    />\n    <Container style=\"max-width: 700px\" v-if=\"mounted && user\">\n      <q-card bordered class=\"yl-mc-card\">\n        <q-item>\n          <q-item-section avatar>\n            <q-avatar>\n              <img :src=\"$store.state.env.apiBaseUrl + user.picture\" />\n            </q-avatar>\n          </q-item-section>\n\n          <q-item-section>\n            <q-item-label class=\"text-bold\">{{ user.name }}</q-item-label>\n            <q-item-label>\n              {{ total }} comment<span v-if=\"total > 1\">s</span>\n            </q-item-label>\n          </q-item-section>\n        </q-item>\n      </q-card>\n\n      <q-card class=\"q-mt-lg\" v-for=\"comment in comments\" :key=\"comment.id\">\n        <q-card-section>\n          <div>\n            Comment on\n            <router-link\n              :to=\"`/sites/${comment.site_link}`\"\n              class=\"text-bold yl-lu\"\n              >{{ comment.site_name }}</router-link\n            >\n          </div>\n          <div class=\"row items-center justify-between q-mt-sm\">\n            <q-rating\n              size=\"2em\"\n              icon=\"star_border\"\n              icon-selected=\"star\"\n              readonly\n              :modelValue=\"comment.rating\"\n              :color=\"getColor(comment.rating)\"\n            />\n            <div class=\"text-grey\">{{ getDate(comment.created_at) }}</div>\n          </div>\n        </q-card-section>\n\n        <q-separator inset />\n\n        <q-card-section>\n          <router-link\n            :to=\"`/comments/${comment.id}`\"\n            class=\"text-bold q-pb-sm yl-lu\"\n          >\n            {{ comment.title }}\n          </router-link>\n          <div v-html=\"comment.content\" />\n        </q-card-section>\n      </q-card>\n\n      <Pagination\n        v-if=\"totalPages > 1\"\n        :page=\"+page\"\n        :totalPages=\"totalPages\"\n        :limit=\"5\"\n        :link=\"`/users/${$route.params.id}`\"\n      />\n    </Container>\n    <Error404 v-if=\"mounted && !user\" />\n  </q-page>\n</template>\n\n<style lang=\"scss\" scoped>\n.yl-mc-card {\n  width: fit-content;\n  margin: 0 auto;\n}\n</style>\n\n<script>\nimport Container from \"@/components/Container.vue\";\nimport { getRatingColor } from \"@/utils\";\nimport UsersAPI from \"@/api/users\";\nimport CommentsAPI from \"@/api/comments\";\nimport Error404 from \"@/views/Error404.vue\";\nimport Pagination from \"@/components/Comments/Pagination\";\n\nexport default {\n  name: \"MyCommentsComponent\",\n  data() {\n    return {\n      mounted: false,\n      user: null,\n      comments: [],\n      page: 1,\n      perPage: 10,\n      total: 0,\n      totalPages: 0,\n    };\n  },\n  components: {\n    Container,\n    Error404,\n    Pagination,\n  },\n  methods: {\n    resetHeight(offset) {\n      return { minHeight: `calc(100vh - ${(offset || 0) + 70}px)` };\n    },\n    getColor(rate) {\n      return getRatingColor(rate);\n    },\n    getDate(str) {\n      const date = new Date(str);\n      const dateOptions = {\n        // weekday: \"long\",\n        year: \"numeric\",\n        month: \"short\",\n        day: \"numeric\",\n      };\n      return date.toLocaleDateString(\"en-US\", dateOptions);\n    },\n  },\n  watch: {\n    // https://stackoverflow.com/a/50981093\n    \"$route.query.page\": {\n      handler: async function (page) {\n        if (this.$route.name !== \"UserComments\") return; // to prevent error when quitting this page.\n\n        this.mounted = false;\n        try {\n          const userId = this.$route.params.id;\n          const userRes = await UsersAPI.show(userId);\n          this.user = userRes.user;\n\n          this.page = page || 1;\n          const commentRes = await CommentsAPI.index({\n            user: userId,\n            page: this.page,\n          });\n          this.comments = commentRes.comments;\n          this.perPage = commentRes.perPage;\n          this.total = commentRes.total;\n          this.totalPages = commentRes.totalPages;\n\n          this.mounted = true;\n        } catch (error) {\n          // window.err = error;\n          this.mounted = true;\n        }\n      },\n      deep: true,\n      immediate: true,\n    },\n  },\n};\n</script>\n"],"sourceRoot":""}]}