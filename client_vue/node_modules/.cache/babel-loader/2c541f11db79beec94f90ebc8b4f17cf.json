{"remainingRequest":"/app/node_modules/babel-loader/lib/index.js!/app/node_modules/vue-cli-plugin-quasar/lib/loader.js.transform-quasar-imports.js!/app/node_modules/quasar/src/components/virtual-scroll/use-virtual-scroll.js","dependencies":[{"path":"/app/node_modules/quasar/src/components/virtual-scroll/use-virtual-scroll.js","mtime":1640793220809},{"path":"/app/babel.config.js","mtime":1641198370373},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1640299636612},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1640299636618},{"path":"/app/node_modules/vue-cli-plugin-quasar/lib/loader.js.transform-quasar-imports.js","mtime":1640775278388}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mbGF0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkudW5zY29wYWJsZXMuZmxhdC5qcyI7CmltcG9ydCB7IGgsIHJlZiwgY29tcHV0ZWQsIHdhdGNoLCBvbkFjdGl2YXRlZCwgb25CZWZvcmVNb3VudCwgb25CZWZvcmVVbm1vdW50LCBuZXh0VGljaywgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJzsKaW1wb3J0IGRlYm91bmNlIGZyb20gJy4uLy4uL3V0aWxzL2RlYm91bmNlLmpzJzsKaW1wb3J0IHsgbm9vcCB9IGZyb20gJy4uLy4uL3V0aWxzL2V2ZW50LmpzJzsKaW1wb3J0IHsgcnRsSGFzU2Nyb2xsQnVnIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9ydGwuanMnOwp2YXIgYWdnQnVja2V0U2l6ZSA9IDEwMDA7CnZhciBzY3JvbGxUb0VkZ2VzID0gWydzdGFydCcsICdjZW50ZXInLCAnZW5kJywgJ3N0YXJ0LWZvcmNlJywgJ2NlbnRlci1mb3JjZScsICdlbmQtZm9yY2UnXTsKdmFyIGlkID0gMTsKdmFyIGZpbHRlclByb3RvID0gQXJyYXkucHJvdG90eXBlLmZpbHRlcjsKdmFyIHNldE92ZXJmbG93QW5jaG9yID0gX19RVUFTQVJfU1NSX18gfHwgd2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkub3ZlcmZsb3dBbmNob3IgPT09IHZvaWQgMCA/IG5vb3AgOiBmdW5jdGlvbiAoaWQsIGluZGV4KSB7CiAgdmFyIHNzSWQgPSBpZCArICdfc3MnOwogIHZhciBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3NJZCk7CgogIGlmIChzdHlsZVNoZWV0ID09PSBudWxsKSB7CiAgICBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICAgIHN0eWxlU2hlZXQudHlwZSA9ICd0ZXh0L2Nzcyc7CiAgICBzdHlsZVNoZWV0LmlkID0gc3NJZDsKICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVTaGVldCk7CiAgfQoKICBpZiAoc3R5bGVTaGVldC5xQ2hpbGRJbmRleCAhPT0gaW5kZXgpIHsKICAgIHN0eWxlU2hlZXQucUNoaWxkSW5kZXggPSBpbmRleDsKICAgIHN0eWxlU2hlZXQuaW5uZXJIVE1MID0gIiMiLmNvbmNhdChpZCwgIiA+ICo6bnRoLWNoaWxkKCIpLmNvbmNhdChpbmRleCwgIikgeyBvdmVyZmxvdy1hbmNob3I6IGF1dG8gfSIpOwogIH0KfTsKCmZ1bmN0aW9uIHN1bUZuKGFjYywgaCkgewogIHJldHVybiBhY2MgKyBoOwp9CgpmdW5jdGlvbiBnZXRTY3JvbGxEZXRhaWxzKHBhcmVudCwgY2hpbGQsIGJlZm9yZVJlZiwgYWZ0ZXJSZWYsIGhvcml6b250YWwsIHJ0bCwgc3RpY2t5U3RhcnQsIHN0aWNreUVuZCkgewogIHZhciBwYXJlbnRDYWxjID0gcGFyZW50ID09PSB3aW5kb3cgPyBkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA6IHBhcmVudCwKICAgICAgcHJvcEVsU2l6ZSA9IGhvcml6b250YWwgPT09IHRydWUgPyAnb2Zmc2V0V2lkdGgnIDogJ29mZnNldEhlaWdodCcsCiAgICAgIGRldGFpbHMgPSB7CiAgICBzY3JvbGxTdGFydDogMCwKICAgIHNjcm9sbFZpZXdTaXplOiAtc3RpY2t5U3RhcnQgLSBzdGlja3lFbmQsCiAgICBzY3JvbGxNYXhTaXplOiAwLAogICAgb2Zmc2V0U3RhcnQ6IC1zdGlja3lTdGFydCwKICAgIG9mZnNldEVuZDogLXN0aWNreUVuZAogIH07CgogIGlmIChob3Jpem9udGFsID09PSB0cnVlKSB7CiAgICBpZiAocGFyZW50ID09PSB3aW5kb3cpIHsKICAgICAgZGV0YWlscy5zY3JvbGxTdGFydCA9IHdpbmRvdy5wYWdlWE9mZnNldCB8fCB3aW5kb3cuc2Nyb2xsWCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgfHwgMDsKICAgICAgZGV0YWlscy5zY3JvbGxWaWV3U2l6ZSArPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7CiAgICB9IGVsc2UgewogICAgICBkZXRhaWxzLnNjcm9sbFN0YXJ0ID0gcGFyZW50Q2FsYy5zY3JvbGxMZWZ0OwogICAgICBkZXRhaWxzLnNjcm9sbFZpZXdTaXplICs9IHBhcmVudENhbGMuY2xpZW50V2lkdGg7CiAgICB9CgogICAgZGV0YWlscy5zY3JvbGxNYXhTaXplID0gcGFyZW50Q2FsYy5zY3JvbGxXaWR0aDsKCiAgICBpZiAocnRsID09PSB0cnVlKSB7CiAgICAgIGRldGFpbHMuc2Nyb2xsU3RhcnQgPSAocnRsSGFzU2Nyb2xsQnVnID09PSB0cnVlID8gZGV0YWlscy5zY3JvbGxNYXhTaXplIC0gZGV0YWlscy5zY3JvbGxWaWV3U2l6ZSA6IDApIC0gZGV0YWlscy5zY3JvbGxTdGFydDsKICAgIH0KICB9IGVsc2UgewogICAgaWYgKHBhcmVudCA9PT0gd2luZG93KSB7CiAgICAgIGRldGFpbHMuc2Nyb2xsU3RhcnQgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgd2luZG93LnNjcm9sbFkgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgfHwgMDsKICAgICAgZGV0YWlscy5zY3JvbGxWaWV3U2l6ZSArPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0OwogICAgfSBlbHNlIHsKICAgICAgZGV0YWlscy5zY3JvbGxTdGFydCA9IHBhcmVudENhbGMuc2Nyb2xsVG9wOwogICAgICBkZXRhaWxzLnNjcm9sbFZpZXdTaXplICs9IHBhcmVudENhbGMuY2xpZW50SGVpZ2h0OwogICAgfQoKICAgIGRldGFpbHMuc2Nyb2xsTWF4U2l6ZSA9IHBhcmVudENhbGMuc2Nyb2xsSGVpZ2h0OwogIH0KCiAgaWYgKGJlZm9yZVJlZiAhPT0gbnVsbCkgewogICAgZm9yICh2YXIgZWwgPSBiZWZvcmVSZWYucHJldmlvdXNFbGVtZW50U2libGluZzsgZWwgIT09IG51bGw7IGVsID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZykgewogICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdxLXZpcnR1YWwtc2Nyb2xsLS1za2lwJykgPT09IGZhbHNlKSB7CiAgICAgICAgZGV0YWlscy5vZmZzZXRTdGFydCArPSBlbFtwcm9wRWxTaXplXTsKICAgICAgfQogICAgfQogIH0KCiAgaWYgKGFmdGVyUmVmICE9PSBudWxsKSB7CiAgICBmb3IgKHZhciBfZWwgPSBhZnRlclJlZi5uZXh0RWxlbWVudFNpYmxpbmc7IF9lbCAhPT0gbnVsbDsgX2VsID0gX2VsLm5leHRFbGVtZW50U2libGluZykgewogICAgICBpZiAoX2VsLmNsYXNzTGlzdC5jb250YWlucygncS12aXJ0dWFsLXNjcm9sbC0tc2tpcCcpID09PSBmYWxzZSkgewogICAgICAgIGRldGFpbHMub2Zmc2V0RW5kICs9IF9lbFtwcm9wRWxTaXplXTsKICAgICAgfQogICAgfQogIH0KCiAgaWYgKGNoaWxkICE9PSBwYXJlbnQpIHsKICAgIHZhciBwYXJlbnRSZWN0ID0gcGFyZW50Q2FsYy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwKICAgICAgICBjaGlsZFJlY3QgPSBjaGlsZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKCiAgICBpZiAoaG9yaXpvbnRhbCA9PT0gdHJ1ZSkgewogICAgICBkZXRhaWxzLm9mZnNldFN0YXJ0ICs9IGNoaWxkUmVjdC5sZWZ0IC0gcGFyZW50UmVjdC5sZWZ0OwogICAgICBkZXRhaWxzLm9mZnNldEVuZCAtPSBjaGlsZFJlY3Qud2lkdGg7CiAgICB9IGVsc2UgewogICAgICBkZXRhaWxzLm9mZnNldFN0YXJ0ICs9IGNoaWxkUmVjdC50b3AgLSBwYXJlbnRSZWN0LnRvcDsKICAgICAgZGV0YWlscy5vZmZzZXRFbmQgLT0gY2hpbGRSZWN0LmhlaWdodDsKICAgIH0KCiAgICBpZiAocGFyZW50ICE9PSB3aW5kb3cpIHsKICAgICAgZGV0YWlscy5vZmZzZXRTdGFydCArPSBkZXRhaWxzLnNjcm9sbFN0YXJ0OwogICAgfQoKICAgIGRldGFpbHMub2Zmc2V0RW5kICs9IGRldGFpbHMuc2Nyb2xsTWF4U2l6ZSAtIGRldGFpbHMub2Zmc2V0U3RhcnQ7CiAgfQoKICByZXR1cm4gZGV0YWlsczsKfQoKZnVuY3Rpb24gc2V0U2Nyb2xsKHBhcmVudCwgc2Nyb2xsLCBob3Jpem9udGFsLCBydGwpIHsKICBpZiAoc2Nyb2xsID09PSAnZW5kJykgewogICAgc2Nyb2xsID0gKHBhcmVudCA9PT0gd2luZG93ID8gZG9jdW1lbnQuYm9keSA6IHBhcmVudClbaG9yaXpvbnRhbCA9PT0gdHJ1ZSA/ICdzY3JvbGxXaWR0aCcgOiAnc2Nyb2xsSGVpZ2h0J107CiAgfQoKICBpZiAocGFyZW50ID09PSB3aW5kb3cpIHsKICAgIGlmIChob3Jpem9udGFsID09PSB0cnVlKSB7CiAgICAgIGlmIChydGwgPT09IHRydWUpIHsKICAgICAgICBzY3JvbGwgPSAocnRsSGFzU2Nyb2xsQnVnID09PSB0cnVlID8gZG9jdW1lbnQuYm9keS5zY3JvbGxXaWR0aCAtIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCA6IDApIC0gc2Nyb2xsOwogICAgICB9CgogICAgICB3aW5kb3cuc2Nyb2xsVG8oc2Nyb2xsLCB3aW5kb3cucGFnZVlPZmZzZXQgfHwgd2luZG93LnNjcm9sbFkgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgfHwgMCk7CiAgICB9IGVsc2UgewogICAgICB3aW5kb3cuc2Nyb2xsVG8od2luZG93LnBhZ2VYT2Zmc2V0IHx8IHdpbmRvdy5zY3JvbGxYIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCB8fCAwLCBzY3JvbGwpOwogICAgfQogIH0gZWxzZSBpZiAoaG9yaXpvbnRhbCA9PT0gdHJ1ZSkgewogICAgaWYgKHJ0bCA9PT0gdHJ1ZSkgewogICAgICBzY3JvbGwgPSAocnRsSGFzU2Nyb2xsQnVnID09PSB0cnVlID8gcGFyZW50LnNjcm9sbFdpZHRoIC0gcGFyZW50Lm9mZnNldFdpZHRoIDogMCkgLSBzY3JvbGw7CiAgICB9CgogICAgcGFyZW50LnNjcm9sbExlZnQgPSBzY3JvbGw7CiAgfSBlbHNlIHsKICAgIHBhcmVudC5zY3JvbGxUb3AgPSBzY3JvbGw7CiAgfQp9CgpmdW5jdGlvbiBzdW1TaXplKHNpemVBZ2csIHNpemUsIGZyb20sIHRvKSB7CiAgaWYgKGZyb20gPj0gdG8pIHsKICAgIHJldHVybiAwOwogIH0KCiAgdmFyIGxhc3RUbyA9IHNpemUubGVuZ3RoLAogICAgICBmcm9tQWdnID0gTWF0aC5mbG9vcihmcm9tIC8gYWdnQnVja2V0U2l6ZSksCiAgICAgIHRvQWdnID0gTWF0aC5mbG9vcigodG8gLSAxKSAvIGFnZ0J1Y2tldFNpemUpICsgMTsKICB2YXIgdG90YWwgPSBzaXplQWdnLnNsaWNlKGZyb21BZ2csIHRvQWdnKS5yZWR1Y2Uoc3VtRm4sIDApOwoKICBpZiAoZnJvbSAlIGFnZ0J1Y2tldFNpemUgIT09IDApIHsKICAgIHRvdGFsIC09IHNpemUuc2xpY2UoZnJvbUFnZyAqIGFnZ0J1Y2tldFNpemUsIGZyb20pLnJlZHVjZShzdW1GbiwgMCk7CiAgfQoKICBpZiAodG8gJSBhZ2dCdWNrZXRTaXplICE9PSAwICYmIHRvICE9PSBsYXN0VG8pIHsKICAgIHRvdGFsIC09IHNpemUuc2xpY2UodG8sIHRvQWdnICogYWdnQnVja2V0U2l6ZSkucmVkdWNlKHN1bUZuLCAwKTsKICB9CgogIHJldHVybiB0b3RhbDsKfQoKdmFyIGNvbW1vblZpcnRTY3JvbGxQcm9wcyA9IHsKICB2aXJ0dWFsU2Nyb2xsU2xpY2VTaXplOiB7CiAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLAogICAgZGVmYXVsdDogbnVsbAogIH0sCiAgdmlydHVhbFNjcm9sbFNsaWNlUmF0aW9CZWZvcmU6IHsKICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sCiAgICBkZWZhdWx0OiAxCiAgfSwKICB2aXJ0dWFsU2Nyb2xsU2xpY2VSYXRpb0FmdGVyOiB7CiAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLAogICAgZGVmYXVsdDogMQogIH0sCiAgdmlydHVhbFNjcm9sbEl0ZW1TaXplOiB7CiAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLAogICAgZGVmYXVsdDogMjQKICB9LAogIHZpcnR1YWxTY3JvbGxTdGlja3lTaXplU3RhcnQ6IHsKICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sCiAgICBkZWZhdWx0OiAwCiAgfSwKICB2aXJ0dWFsU2Nyb2xsU3RpY2t5U2l6ZUVuZDogewogICAgdHlwZTogW051bWJlciwgU3RyaW5nXSwKICAgIGRlZmF1bHQ6IDAKICB9LAogIHRhYmxlQ29sc3BhbjogW051bWJlciwgU3RyaW5nXQp9OwpleHBvcnQgdmFyIGNvbW1vblZpcnRQcm9wc0xpc3QgPSBPYmplY3Qua2V5cyhjb21tb25WaXJ0U2Nyb2xsUHJvcHMpOwpleHBvcnQgdmFyIHVzZVZpcnR1YWxTY3JvbGxQcm9wcyA9IF9vYmplY3RTcHJlYWQoewogIHZpcnR1YWxTY3JvbGxIb3Jpem9udGFsOiBCb29sZWFuLAogIG9uVmlydHVhbFNjcm9sbDogRnVuY3Rpb24KfSwgY29tbW9uVmlydFNjcm9sbFByb3BzKTsKZXhwb3J0IGZ1bmN0aW9uIHVzZVZpcnR1YWxTY3JvbGwoX3JlZikgewogIHZhciB2aXJ0dWFsU2Nyb2xsTGVuZ3RoID0gX3JlZi52aXJ0dWFsU2Nyb2xsTGVuZ3RoLAogICAgICBnZXRWaXJ0dWFsU2Nyb2xsVGFyZ2V0ID0gX3JlZi5nZXRWaXJ0dWFsU2Nyb2xsVGFyZ2V0LAogICAgICBnZXRWaXJ0dWFsU2Nyb2xsRWwgPSBfcmVmLmdldFZpcnR1YWxTY3JvbGxFbCwKICAgICAgdmlydHVhbFNjcm9sbEl0ZW1TaXplQ29tcHV0ZWQgPSBfcmVmLnZpcnR1YWxTY3JvbGxJdGVtU2l6ZUNvbXB1dGVkOwogIHZhciB2bSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpOwogIHZhciBwcm9wcyA9IHZtLnByb3BzLAogICAgICBlbWl0ID0gdm0uZW1pdCwKICAgICAgcHJveHkgPSB2bS5wcm94eTsKICB2YXIgJHEgPSBwcm94eS4kcTsKICB2YXIgcHJldlNjcm9sbFN0YXJ0LAogICAgICBwcmV2VG9JbmRleCwKICAgICAgbG9jYWxTY3JvbGxWaWV3U2l6ZSwKICAgICAgdmlydHVhbFNjcm9sbFNpemVzQWdnID0gW10sCiAgICAgIHZpcnR1YWxTY3JvbGxTaXplczsKICB2YXIgdnNJZCA9ICdxdnNfJyArIGlkKys7CiAgdmFyIHZpcnR1YWxTY3JvbGxQYWRkaW5nQmVmb3JlID0gcmVmKDApOwogIHZhciB2aXJ0dWFsU2Nyb2xsUGFkZGluZ0FmdGVyID0gcmVmKDApOwogIHZhciB2aXJ0dWFsU2Nyb2xsU2xpY2VTaXplQ29tcHV0ZWQgPSByZWYoe30pOwogIHZhciBiZWZvcmVSZWYgPSByZWYobnVsbCk7CiAgdmFyIGFmdGVyUmVmID0gcmVmKG51bGwpOwogIHZhciBjb250ZW50UmVmID0gcmVmKG51bGwpOwogIHZhciB2aXJ0dWFsU2Nyb2xsU2xpY2VSYW5nZSA9IHJlZih7CiAgICBmcm9tOiAwLAogICAgdG86IDAKICB9KTsKICB2YXIgY29sc3BhbkF0dHIgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gcHJvcHMudGFibGVDb2xzcGFuICE9PSB2b2lkIDAgPyBwcm9wcy50YWJsZUNvbHNwYW4gOiAxMDA7CiAgfSk7CgogIGlmICh2aXJ0dWFsU2Nyb2xsSXRlbVNpemVDb21wdXRlZCA9PT0gdm9pZCAwKSB7CiAgICB2aXJ0dWFsU2Nyb2xsSXRlbVNpemVDb21wdXRlZCA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHByb3BzLnZpcnR1YWxTY3JvbGxJdGVtU2l6ZTsKICAgIH0pOwogIH0KCiAgdmFyIG5lZWRzUmVzZXQgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdmlydHVhbFNjcm9sbEl0ZW1TaXplQ29tcHV0ZWQudmFsdWUgKyAnOycgKyBwcm9wcy52aXJ0dWFsU2Nyb2xsSG9yaXpvbnRhbDsKICB9KTsKICB2YXIgbmVlZHNTbGljZVJlY2FsYyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBuZWVkc1Jlc2V0LnZhbHVlICsgJzsnICsgcHJvcHMudmlydHVhbFNjcm9sbFNsaWNlUmF0aW9CZWZvcmUgKyAnOycgKyBwcm9wcy52aXJ0dWFsU2Nyb2xsU2xpY2VSYXRpb0FmdGVyOwogIH0pOwogIHdhdGNoKG5lZWRzU2xpY2VSZWNhbGMsIGZ1bmN0aW9uICgpIHsKICAgIHNldFZpcnR1YWxTY3JvbGxTaXplKCk7CiAgfSk7CiAgd2F0Y2gobmVlZHNSZXNldCwgcmVzZXQpOwoKICBmdW5jdGlvbiByZXNldCgpIHsKICAgIGxvY2FsUmVzZXRWaXJ0dWFsU2Nyb2xsKHByZXZUb0luZGV4LCB0cnVlKTsKICB9CgogIGZ1bmN0aW9uIHJlZnJlc2godG9JbmRleCkgewogICAgbG9jYWxSZXNldFZpcnR1YWxTY3JvbGwodG9JbmRleCA9PT0gdm9pZCAwID8gcHJldlRvSW5kZXggOiB0b0luZGV4KTsKICB9CgogIGZ1bmN0aW9uIHNjcm9sbFRvKHRvSW5kZXgsIGVkZ2UpIHsKICAgIHZhciBzY3JvbGxFbCA9IGdldFZpcnR1YWxTY3JvbGxUYXJnZXQoKTsKCiAgICBpZiAoc2Nyb2xsRWwgPT09IHZvaWQgMCB8fCBzY3JvbGxFbCA9PT0gbnVsbCB8fCBzY3JvbGxFbC5ub2RlVHlwZSA9PT0gOCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIHNjcm9sbERldGFpbHMgPSBnZXRTY3JvbGxEZXRhaWxzKHNjcm9sbEVsLCBnZXRWaXJ0dWFsU2Nyb2xsRWwoKSwgYmVmb3JlUmVmLnZhbHVlLCBhZnRlclJlZi52YWx1ZSwgcHJvcHMudmlydHVhbFNjcm9sbEhvcml6b250YWwsICRxLmxhbmcucnRsLCBwcm9wcy52aXJ0dWFsU2Nyb2xsU3RpY2t5U2l6ZVN0YXJ0LCBwcm9wcy52aXJ0dWFsU2Nyb2xsU3RpY2t5U2l6ZUVuZCk7CiAgICBsb2NhbFNjcm9sbFZpZXdTaXplICE9PSBzY3JvbGxEZXRhaWxzLnNjcm9sbFZpZXdTaXplICYmIHNldFZpcnR1YWxTY3JvbGxTaXplKHNjcm9sbERldGFpbHMuc2Nyb2xsVmlld1NpemUpOwogICAgc2V0VmlydHVhbFNjcm9sbFNsaWNlUmFuZ2Uoc2Nyb2xsRWwsIHNjcm9sbERldGFpbHMsIE1hdGgubWluKHZpcnR1YWxTY3JvbGxMZW5ndGgudmFsdWUgLSAxLCBNYXRoLm1heCgwLCBwYXJzZUludCh0b0luZGV4LCAxMCkgfHwgMCkpLCAwLCBzY3JvbGxUb0VkZ2VzLmluZGV4T2YoZWRnZSkgPiAtMSA/IGVkZ2UgOiBwcmV2VG9JbmRleCA+IC0xICYmIHRvSW5kZXggPiBwcmV2VG9JbmRleCA/ICdlbmQnIDogJ3N0YXJ0Jyk7CiAgfQoKICBmdW5jdGlvbiBsb2NhbE9uVmlydHVhbFNjcm9sbEV2dCgpIHsKICAgIHZhciBzY3JvbGxFbCA9IGdldFZpcnR1YWxTY3JvbGxUYXJnZXQoKTsKCiAgICBpZiAoc2Nyb2xsRWwgPT09IHZvaWQgMCB8fCBzY3JvbGxFbCA9PT0gbnVsbCB8fCBzY3JvbGxFbC5ub2RlVHlwZSA9PT0gOCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIHNjcm9sbERldGFpbHMgPSBnZXRTY3JvbGxEZXRhaWxzKHNjcm9sbEVsLCBnZXRWaXJ0dWFsU2Nyb2xsRWwoKSwgYmVmb3JlUmVmLnZhbHVlLCBhZnRlclJlZi52YWx1ZSwgcHJvcHMudmlydHVhbFNjcm9sbEhvcml6b250YWwsICRxLmxhbmcucnRsLCBwcm9wcy52aXJ0dWFsU2Nyb2xsU3RpY2t5U2l6ZVN0YXJ0LCBwcm9wcy52aXJ0dWFsU2Nyb2xsU3RpY2t5U2l6ZUVuZCksCiAgICAgICAgbGlzdExhc3RJbmRleCA9IHZpcnR1YWxTY3JvbGxMZW5ndGgudmFsdWUgLSAxLAogICAgICAgIGxpc3RFbmRPZmZzZXQgPSBzY3JvbGxEZXRhaWxzLnNjcm9sbE1heFNpemUgLSBzY3JvbGxEZXRhaWxzLm9mZnNldFN0YXJ0IC0gc2Nyb2xsRGV0YWlscy5vZmZzZXRFbmQgLSB2aXJ0dWFsU2Nyb2xsUGFkZGluZ0FmdGVyLnZhbHVlOwoKICAgIGlmIChwcmV2U2Nyb2xsU3RhcnQgPT09IHNjcm9sbERldGFpbHMuc2Nyb2xsU3RhcnQpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmIChzY3JvbGxEZXRhaWxzLnNjcm9sbE1heFNpemUgPD0gMCkgewogICAgICBzZXRWaXJ0dWFsU2Nyb2xsU2xpY2VSYW5nZShzY3JvbGxFbCwgc2Nyb2xsRGV0YWlscywgMCwgMCk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBsb2NhbFNjcm9sbFZpZXdTaXplICE9PSBzY3JvbGxEZXRhaWxzLnNjcm9sbFZpZXdTaXplICYmIHNldFZpcnR1YWxTY3JvbGxTaXplKHNjcm9sbERldGFpbHMuc2Nyb2xsVmlld1NpemUpOwogICAgdXBkYXRlVmlydHVhbFNjcm9sbFNpemVzKHZpcnR1YWxTY3JvbGxTbGljZVJhbmdlLnZhbHVlLmZyb20pOwogICAgdmFyIHNjcm9sbE1heFN0YXJ0ID0gTWF0aC5mbG9vcihzY3JvbGxEZXRhaWxzLnNjcm9sbE1heFNpemUgLSBNYXRoLm1heChzY3JvbGxEZXRhaWxzLnNjcm9sbFZpZXdTaXplLCBzY3JvbGxEZXRhaWxzLm9mZnNldEVuZCkgLSBNYXRoLm1pbih2aXJ0dWFsU2Nyb2xsU2l6ZXNbbGlzdExhc3RJbmRleF0sIHNjcm9sbERldGFpbHMuc2Nyb2xsVmlld1NpemUgLyAyKSk7CgogICAgaWYgKHNjcm9sbE1heFN0YXJ0ID4gMCAmJiBNYXRoLmNlaWwoc2Nyb2xsRGV0YWlscy5zY3JvbGxTdGFydCkgPj0gc2Nyb2xsTWF4U3RhcnQpIHsKICAgICAgc2V0VmlydHVhbFNjcm9sbFNsaWNlUmFuZ2Uoc2Nyb2xsRWwsIHNjcm9sbERldGFpbHMsIGxpc3RMYXN0SW5kZXgsIHNjcm9sbERldGFpbHMuc2Nyb2xsTWF4U2l6ZSAtIHNjcm9sbERldGFpbHMub2Zmc2V0RW5kIC0gdmlydHVhbFNjcm9sbFNpemVzQWdnLnJlZHVjZShzdW1GbiwgMCkpOwogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIHRvSW5kZXggPSAwLAogICAgICAgIGxpc3RPZmZzZXQgPSBzY3JvbGxEZXRhaWxzLnNjcm9sbFN0YXJ0IC0gc2Nyb2xsRGV0YWlscy5vZmZzZXRTdGFydCwKICAgICAgICBvZmZzZXQgPSBsaXN0T2Zmc2V0OwoKICAgIGlmIChsaXN0T2Zmc2V0IDw9IGxpc3RFbmRPZmZzZXQgJiYgbGlzdE9mZnNldCArIHNjcm9sbERldGFpbHMuc2Nyb2xsVmlld1NpemUgPj0gdmlydHVhbFNjcm9sbFBhZGRpbmdCZWZvcmUudmFsdWUpIHsKICAgICAgbGlzdE9mZnNldCAtPSB2aXJ0dWFsU2Nyb2xsUGFkZGluZ0JlZm9yZS52YWx1ZTsKICAgICAgdG9JbmRleCA9IHZpcnR1YWxTY3JvbGxTbGljZVJhbmdlLnZhbHVlLmZyb207CiAgICAgIG9mZnNldCA9IGxpc3RPZmZzZXQ7CiAgICB9IGVsc2UgewogICAgICBmb3IgKHZhciBqID0gMDsgbGlzdE9mZnNldCA+PSB2aXJ0dWFsU2Nyb2xsU2l6ZXNBZ2dbal0gJiYgdG9JbmRleCA8IGxpc3RMYXN0SW5kZXg7IGorKykgewogICAgICAgIGxpc3RPZmZzZXQgLT0gdmlydHVhbFNjcm9sbFNpemVzQWdnW2pdOwogICAgICAgIHRvSW5kZXggKz0gYWdnQnVja2V0U2l6ZTsKICAgICAgfQogICAgfQoKICAgIHdoaWxlIChsaXN0T2Zmc2V0ID4gMCAmJiB0b0luZGV4IDwgbGlzdExhc3RJbmRleCkgewogICAgICBsaXN0T2Zmc2V0IC09IHZpcnR1YWxTY3JvbGxTaXplc1t0b0luZGV4XTsKCiAgICAgIGlmIChsaXN0T2Zmc2V0ID4gLXNjcm9sbERldGFpbHMuc2Nyb2xsVmlld1NpemUpIHsKICAgICAgICB0b0luZGV4Kys7CiAgICAgICAgb2Zmc2V0ID0gbGlzdE9mZnNldDsKICAgICAgfSBlbHNlIHsKICAgICAgICBvZmZzZXQgPSB2aXJ0dWFsU2Nyb2xsU2l6ZXNbdG9JbmRleF0gKyBsaXN0T2Zmc2V0OwogICAgICB9CiAgICB9CgogICAgc2V0VmlydHVhbFNjcm9sbFNsaWNlUmFuZ2Uoc2Nyb2xsRWwsIHNjcm9sbERldGFpbHMsIHRvSW5kZXgsIG9mZnNldCk7CiAgfQoKICBmdW5jdGlvbiBzZXRWaXJ0dWFsU2Nyb2xsU2xpY2VSYW5nZShzY3JvbGxFbCwgc2Nyb2xsRGV0YWlscywgdG9JbmRleCwgb2Zmc2V0LCBhbGlnbikgewogICAgdmFyIGFsaWduRm9yY2UgPSB0eXBlb2YgYWxpZ24gPT09ICdzdHJpbmcnICYmIGFsaWduLmluZGV4T2YoJy1mb3JjZScpID4gLTE7CiAgICB2YXIgYWxpZ25FbmQgPSBhbGlnbkZvcmNlID09PSB0cnVlID8gYWxpZ24ucmVwbGFjZSgnLWZvcmNlJywgJycpIDogYWxpZ247CiAgICB2YXIgYWxpZ25SYW5nZSA9IGFsaWduRW5kICE9PSB2b2lkIDAgPyBhbGlnbkVuZCA6ICdzdGFydCc7CiAgICB2YXIgZnJvbSA9IE1hdGgubWF4KDAsIHRvSW5kZXggLSB2aXJ0dWFsU2Nyb2xsU2xpY2VTaXplQ29tcHV0ZWQudmFsdWVbYWxpZ25SYW5nZV0pLAogICAgICAgIHRvID0gZnJvbSArIHZpcnR1YWxTY3JvbGxTbGljZVNpemVDb21wdXRlZC52YWx1ZS50b3RhbDsKCiAgICBpZiAodG8gPiB2aXJ0dWFsU2Nyb2xsTGVuZ3RoLnZhbHVlKSB7CiAgICAgIHRvID0gdmlydHVhbFNjcm9sbExlbmd0aC52YWx1ZTsKICAgICAgZnJvbSA9IE1hdGgubWF4KDAsIHRvIC0gdmlydHVhbFNjcm9sbFNsaWNlU2l6ZUNvbXB1dGVkLnZhbHVlLnRvdGFsKTsKICAgIH0KCiAgICBwcmV2U2Nyb2xsU3RhcnQgPSBzY3JvbGxEZXRhaWxzLnNjcm9sbFN0YXJ0OwogICAgdmFyIHJhbmdlQ2hhbmdlZCA9IGZyb20gIT09IHZpcnR1YWxTY3JvbGxTbGljZVJhbmdlLnZhbHVlLmZyb20gfHwgdG8gIT09IHZpcnR1YWxTY3JvbGxTbGljZVJhbmdlLnZhbHVlLnRvOwoKICAgIGlmIChyYW5nZUNoYW5nZWQgPT09IGZhbHNlICYmIGFsaWduRW5kID09PSB2b2lkIDApIHsKICAgICAgZW1pdFNjcm9sbCh0b0luZGV4KTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBfZG9jdW1lbnQgPSBkb2N1bWVudCwKICAgICAgICBhY3RpdmVFbGVtZW50ID0gX2RvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7CiAgICB2YXIgY29udGVudEVsID0gY29udGVudFJlZi52YWx1ZTsKCiAgICBpZiAocmFuZ2VDaGFuZ2VkID09PSB0cnVlICYmIGNvbnRlbnRFbCAhPT0gbnVsbCAmJiBjb250ZW50RWwgIT09IGFjdGl2ZUVsZW1lbnQgJiYgY29udGVudEVsLmNvbnRhaW5zKGFjdGl2ZUVsZW1lbnQpID09PSB0cnVlKSB7CiAgICAgIGNvbnRlbnRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIG9uQmx1clJlZm9jdXNGbik7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnRlbnRFbCAhPT0gdm9pZCAwICYmIGNvbnRlbnRFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIG9uQmx1clJlZm9jdXNGbik7CiAgICAgIH0pOwogICAgfQoKICAgIHNldE92ZXJmbG93QW5jaG9yKHZzSWQsIHRvSW5kZXggLSBmcm9tICsgMSk7CiAgICB2YXIgc2l6ZUJlZm9yZSA9IGFsaWduRW5kICE9PSB2b2lkIDAgPyB2aXJ0dWFsU2Nyb2xsU2l6ZXMuc2xpY2UoZnJvbSwgdG9JbmRleCkucmVkdWNlKHN1bUZuLCAwKSA6IDA7CgogICAgaWYgKHJhbmdlQ2hhbmdlZCA9PT0gdHJ1ZSkgewogICAgICAvLyB2dWUga2V5IG1hdGNoaW5nIGFsZ29yaXRobSB3b3JrcyBvbmx5IGlmCiAgICAgIC8vIHRoZSBhcnJheSBvZiBWTm9kZXMgY2hhbmdlcyBvbiBvbmx5IG9uZSBvZiB0aGUgZW5kcwogICAgICAvLyBzbyB3ZSBmaXJzdCBjaGFuZ2Ugb25lIGVuZCBhbmQgdGhlbiB0aGUgb3RoZXIKICAgICAgdmFyIHRlbXBUbyA9IHRvID49IHZpcnR1YWxTY3JvbGxTbGljZVJhbmdlLnZhbHVlLmZyb20gJiYgZnJvbSA8PSB2aXJ0dWFsU2Nyb2xsU2xpY2VSYW5nZS52YWx1ZS50byA/IHZpcnR1YWxTY3JvbGxTbGljZVJhbmdlLnZhbHVlLnRvIDogdG87CiAgICAgIHZpcnR1YWxTY3JvbGxTbGljZVJhbmdlLnZhbHVlID0gewogICAgICAgIGZyb206IGZyb20sCiAgICAgICAgdG86IHRlbXBUbwogICAgICB9OwogICAgICB2aXJ0dWFsU2Nyb2xsUGFkZGluZ0JlZm9yZS52YWx1ZSA9IHN1bVNpemUodmlydHVhbFNjcm9sbFNpemVzQWdnLCB2aXJ0dWFsU2Nyb2xsU2l6ZXMsIDAsIGZyb20pOwogICAgICB2aXJ0dWFsU2Nyb2xsUGFkZGluZ0FmdGVyLnZhbHVlID0gc3VtU2l6ZSh2aXJ0dWFsU2Nyb2xsU2l6ZXNBZ2csIHZpcnR1YWxTY3JvbGxTaXplcywgdG8sIHZpcnR1YWxTY3JvbGxMZW5ndGgudmFsdWUpOwogICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh2aXJ0dWFsU2Nyb2xsU2xpY2VSYW5nZS52YWx1ZS50byAhPT0gdG8gJiYgcHJldlNjcm9sbFN0YXJ0ID09PSBzY3JvbGxEZXRhaWxzLnNjcm9sbFN0YXJ0KSB7CiAgICAgICAgICB2aXJ0dWFsU2Nyb2xsU2xpY2VSYW5nZS52YWx1ZSA9IHsKICAgICAgICAgICAgZnJvbTogdmlydHVhbFNjcm9sbFNsaWNlUmFuZ2UudmFsdWUuZnJvbSwKICAgICAgICAgICAgdG86IHRvCiAgICAgICAgICB9OwogICAgICAgICAgdmlydHVhbFNjcm9sbFBhZGRpbmdBZnRlci52YWx1ZSA9IHN1bVNpemUodmlydHVhbFNjcm9sbFNpemVzQWdnLCB2aXJ0dWFsU2Nyb2xsU2l6ZXMsIHRvLCB2aXJ0dWFsU2Nyb2xsTGVuZ3RoLnZhbHVlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7CiAgICAgIC8vIGlmIHRoZSBzY3JvbGwgd2FzIGNoYW5nZWQgZ2l2ZSB1cAogICAgICAvLyAoYW5vdGhlciBjYWxsIHRvIHNldFZpcnR1YWxTY3JvbGxTbGljZVJhbmdlIGJlZm9yZSBhbmltYXRpb24gZnJhbWUpCiAgICAgIGlmIChwcmV2U2Nyb2xsU3RhcnQgIT09IHNjcm9sbERldGFpbHMuc2Nyb2xsU3RhcnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChyYW5nZUNoYW5nZWQgPT09IHRydWUpIHsKICAgICAgICB1cGRhdGVWaXJ0dWFsU2Nyb2xsU2l6ZXMoZnJvbSk7CiAgICAgIH0KCiAgICAgIHZhciBzaXplQWZ0ZXIgPSB2aXJ0dWFsU2Nyb2xsU2l6ZXMuc2xpY2UoZnJvbSwgdG9JbmRleCkucmVkdWNlKHN1bUZuLCAwKSwKICAgICAgICAgIHBvc1N0YXJ0ID0gc2l6ZUFmdGVyICsgc2Nyb2xsRGV0YWlscy5vZmZzZXRTdGFydCArIHZpcnR1YWxTY3JvbGxQYWRkaW5nQmVmb3JlLnZhbHVlLAogICAgICAgICAgcG9zRW5kID0gcG9zU3RhcnQgKyB2aXJ0dWFsU2Nyb2xsU2l6ZXNbdG9JbmRleF07CiAgICAgIHZhciBzY3JvbGxQb3NpdGlvbiA9IHBvc1N0YXJ0ICsgb2Zmc2V0OwoKICAgICAgaWYgKGFsaWduRW5kICE9PSB2b2lkIDApIHsKICAgICAgICB2YXIgc2l6ZURpZmYgPSBzaXplQWZ0ZXIgLSBzaXplQmVmb3JlOwogICAgICAgIHZhciBzY3JvbGxTdGFydCA9IHNjcm9sbERldGFpbHMuc2Nyb2xsU3RhcnQgKyBzaXplRGlmZjsKICAgICAgICBzY3JvbGxQb3NpdGlvbiA9IGFsaWduRm9yY2UgIT09IHRydWUgJiYgc2Nyb2xsU3RhcnQgPCBwb3NTdGFydCAmJiBwb3NFbmQgPCBzY3JvbGxTdGFydCArIHNjcm9sbERldGFpbHMuc2Nyb2xsVmlld1NpemUgPyBzY3JvbGxTdGFydCA6IGFsaWduRW5kID09PSAnZW5kJyA/IHBvc0VuZCAtIHNjcm9sbERldGFpbHMuc2Nyb2xsVmlld1NpemUgOiBwb3NTdGFydCAtIChhbGlnbkVuZCA9PT0gJ3N0YXJ0JyA/IDAgOiBNYXRoLnJvdW5kKChzY3JvbGxEZXRhaWxzLnNjcm9sbFZpZXdTaXplIC0gdmlydHVhbFNjcm9sbFNpemVzW3RvSW5kZXhdKSAvIDIpKTsKICAgICAgfQoKICAgICAgcHJldlNjcm9sbFN0YXJ0ID0gc2Nyb2xsUG9zaXRpb247CiAgICAgIHNldFNjcm9sbChzY3JvbGxFbCwgc2Nyb2xsUG9zaXRpb24sIHByb3BzLnZpcnR1YWxTY3JvbGxIb3Jpem9udGFsLCAkcS5sYW5nLnJ0bCk7CiAgICAgIGVtaXRTY3JvbGwodG9JbmRleCk7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIHVwZGF0ZVZpcnR1YWxTY3JvbGxTaXplcyhmcm9tKSB7CiAgICB2YXIgY29udGVudEVsID0gY29udGVudFJlZi52YWx1ZTsKCiAgICBpZiAoY29udGVudEVsKSB7CiAgICAgIHZhciBjaGlsZHJlbiA9IGZpbHRlclByb3RvLmNhbGwoY29udGVudEVsLmNoaWxkcmVuLCBmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuY2xhc3NMaXN0ICYmIGVsLmNsYXNzTGlzdC5jb250YWlucygncS12aXJ0dWFsLXNjcm9sbC0tc2tpcCcpID09PSBmYWxzZTsKICAgICAgfSksCiAgICAgICAgICBjaGlsZHJlbkxlbmd0aCA9IGNoaWxkcmVuLmxlbmd0aCwKICAgICAgICAgIHNpemVGbiA9IHByb3BzLnZpcnR1YWxTY3JvbGxIb3Jpem9udGFsID09PSB0cnVlID8gZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoOwogICAgICB9IDogZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLm9mZnNldEhlaWdodDsKICAgICAgfTsKICAgICAgdmFyIGluZGV4ID0gZnJvbSwKICAgICAgICAgIHNpemUsCiAgICAgICAgICBkaWZmOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbkxlbmd0aDspIHsKICAgICAgICBzaXplID0gc2l6ZUZuKGNoaWxkcmVuW2ldKTsKICAgICAgICBpKys7CgogICAgICAgIHdoaWxlIChpIDwgY2hpbGRyZW5MZW5ndGggJiYgY2hpbGRyZW5baV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdxLXZpcnR1YWwtc2Nyb2xsLS13aXRoLXByZXYnKSA9PT0gdHJ1ZSkgewogICAgICAgICAgc2l6ZSArPSBzaXplRm4oY2hpbGRyZW5baV0pOwogICAgICAgICAgaSsrOwogICAgICAgIH0KCiAgICAgICAgZGlmZiA9IHNpemUgLSB2aXJ0dWFsU2Nyb2xsU2l6ZXNbaW5kZXhdOwoKICAgICAgICBpZiAoZGlmZiAhPT0gMCkgewogICAgICAgICAgdmlydHVhbFNjcm9sbFNpemVzW2luZGV4XSArPSBkaWZmOwogICAgICAgICAgdmlydHVhbFNjcm9sbFNpemVzQWdnW01hdGguZmxvb3IoaW5kZXggLyBhZ2dCdWNrZXRTaXplKV0gKz0gZGlmZjsKICAgICAgICB9CgogICAgICAgIGluZGV4Kys7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIG9uQmx1clJlZm9jdXNGbigpIHsKICAgIGNvbnRlbnRSZWYudmFsdWUgIT09IHZvaWQgMCAmJiBjb250ZW50UmVmLnZhbHVlLmZvY3VzKCk7CiAgfQoKICBmdW5jdGlvbiBsb2NhbFJlc2V0VmlydHVhbFNjcm9sbCh0b0luZGV4LCBmdWxsUmVzZXQpIHsKICAgIHZhciBkZWZhdWx0U2l6ZSA9IDEgKiB2aXJ0dWFsU2Nyb2xsSXRlbVNpemVDb21wdXRlZC52YWx1ZTsKCiAgICBpZiAoZnVsbFJlc2V0ID09PSB0cnVlIHx8IEFycmF5LmlzQXJyYXkodmlydHVhbFNjcm9sbFNpemVzKSA9PT0gZmFsc2UpIHsKICAgICAgdmlydHVhbFNjcm9sbFNpemVzID0gW107CiAgICB9CgogICAgdmFyIG9sZFZpcnR1YWxTY3JvbGxTaXplc0xlbmd0aCA9IHZpcnR1YWxTY3JvbGxTaXplcy5sZW5ndGg7CiAgICB2aXJ0dWFsU2Nyb2xsU2l6ZXMubGVuZ3RoID0gdmlydHVhbFNjcm9sbExlbmd0aC52YWx1ZTsKCiAgICBmb3IgKHZhciBpID0gdmlydHVhbFNjcm9sbExlbmd0aC52YWx1ZSAtIDE7IGkgPj0gb2xkVmlydHVhbFNjcm9sbFNpemVzTGVuZ3RoOyBpLS0pIHsKICAgICAgdmlydHVhbFNjcm9sbFNpemVzW2ldID0gZGVmYXVsdFNpemU7CiAgICB9CgogICAgdmFyIGpNYXggPSBNYXRoLmZsb29yKCh2aXJ0dWFsU2Nyb2xsTGVuZ3RoLnZhbHVlIC0gMSkgLyBhZ2dCdWNrZXRTaXplKTsKICAgIHZpcnR1YWxTY3JvbGxTaXplc0FnZyA9IFtdOwoKICAgIGZvciAodmFyIGogPSAwOyBqIDw9IGpNYXg7IGorKykgewogICAgICB2YXIgc2l6ZSA9IDA7CiAgICAgIHZhciBpTWF4ID0gTWF0aC5taW4oKGogKyAxKSAqIGFnZ0J1Y2tldFNpemUsIHZpcnR1YWxTY3JvbGxMZW5ndGgudmFsdWUpOwoKICAgICAgZm9yICh2YXIgX2kgPSBqICogYWdnQnVja2V0U2l6ZTsgX2kgPCBpTWF4OyBfaSsrKSB7CiAgICAgICAgc2l6ZSArPSB2aXJ0dWFsU2Nyb2xsU2l6ZXNbX2ldOwogICAgICB9CgogICAgICB2aXJ0dWFsU2Nyb2xsU2l6ZXNBZ2cucHVzaChzaXplKTsKICAgIH0KCiAgICBwcmV2VG9JbmRleCA9IC0xOwogICAgcHJldlNjcm9sbFN0YXJ0ID0gdm9pZCAwOwoKICAgIGlmICh0b0luZGV4ID49IDApIHsKICAgICAgdXBkYXRlVmlydHVhbFNjcm9sbFNpemVzKHZpcnR1YWxTY3JvbGxTbGljZVJhbmdlLnZhbHVlLmZyb20pOwogICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgc2Nyb2xsVG8odG9JbmRleCk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgdmlydHVhbFNjcm9sbFBhZGRpbmdCZWZvcmUudmFsdWUgPSBzdW1TaXplKHZpcnR1YWxTY3JvbGxTaXplc0FnZywgdmlydHVhbFNjcm9sbFNpemVzLCAwLCB2aXJ0dWFsU2Nyb2xsU2xpY2VSYW5nZS52YWx1ZS5mcm9tKTsKICAgICAgdmlydHVhbFNjcm9sbFBhZGRpbmdBZnRlci52YWx1ZSA9IHN1bVNpemUodmlydHVhbFNjcm9sbFNpemVzQWdnLCB2aXJ0dWFsU2Nyb2xsU2l6ZXMsIHZpcnR1YWxTY3JvbGxTbGljZVJhbmdlLnZhbHVlLnRvLCB2aXJ0dWFsU2Nyb2xsTGVuZ3RoLnZhbHVlKTsKICAgICAgb25WaXJ0dWFsU2Nyb2xsRXZ0KCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzZXRWaXJ0dWFsU2Nyb2xsU2l6ZShzY3JvbGxWaWV3U2l6ZSkgewogICAgaWYgKHNjcm9sbFZpZXdTaXplID09PSB2b2lkIDAgJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgdmFyIHNjcm9sbEVsID0gZ2V0VmlydHVhbFNjcm9sbFRhcmdldCgpOwoKICAgICAgaWYgKHNjcm9sbEVsICE9PSB2b2lkIDAgJiYgc2Nyb2xsRWwgIT09IG51bGwgJiYgc2Nyb2xsRWwubm9kZVR5cGUgIT09IDgpIHsKICAgICAgICBzY3JvbGxWaWV3U2l6ZSA9IGdldFNjcm9sbERldGFpbHMoc2Nyb2xsRWwsIGdldFZpcnR1YWxTY3JvbGxFbCgpLCBiZWZvcmVSZWYudmFsdWUsIGFmdGVyUmVmLnZhbHVlLCBwcm9wcy52aXJ0dWFsU2Nyb2xsSG9yaXpvbnRhbCwgJHEubGFuZy5ydGwsIHByb3BzLnZpcnR1YWxTY3JvbGxTdGlja3lTaXplU3RhcnQsIHByb3BzLnZpcnR1YWxTY3JvbGxTdGlja3lTaXplRW5kKS5zY3JvbGxWaWV3U2l6ZTsKICAgICAgfQogICAgfQoKICAgIGxvY2FsU2Nyb2xsVmlld1NpemUgPSBzY3JvbGxWaWV3U2l6ZTsKICAgIHZhciBtdWx0aXBsaWVyID0gMSArIHByb3BzLnZpcnR1YWxTY3JvbGxTbGljZVJhdGlvQmVmb3JlICsgcHJvcHMudmlydHVhbFNjcm9sbFNsaWNlUmF0aW9BZnRlcjsKICAgIHZhciB2aWV3ID0gc2Nyb2xsVmlld1NpemUgPT09IHZvaWQgMCB8fCBzY3JvbGxWaWV3U2l6ZSA8PSAwID8gMSA6IE1hdGguY2VpbChzY3JvbGxWaWV3U2l6ZSAvIHZpcnR1YWxTY3JvbGxJdGVtU2l6ZUNvbXB1dGVkLnZhbHVlKTsKICAgIHZhciBiYXNlU2l6ZSA9IE1hdGgubWF4KDEwLCB2aWV3LCBNYXRoLmNlaWwocHJvcHMudmlydHVhbFNjcm9sbFNsaWNlU2l6ZSAvIG11bHRpcGxpZXIpKTsKICAgIHZpcnR1YWxTY3JvbGxTbGljZVNpemVDb21wdXRlZC52YWx1ZSA9IHsKICAgICAgdG90YWw6IE1hdGguY2VpbChiYXNlU2l6ZSAqIG11bHRpcGxpZXIpLAogICAgICBzdGFydDogTWF0aC5jZWlsKGJhc2VTaXplICogcHJvcHMudmlydHVhbFNjcm9sbFNsaWNlUmF0aW9CZWZvcmUpLAogICAgICBjZW50ZXI6IE1hdGguY2VpbChiYXNlU2l6ZSAqICgwLjUgKyBwcm9wcy52aXJ0dWFsU2Nyb2xsU2xpY2VSYXRpb0JlZm9yZSkpLAogICAgICBlbmQ6IE1hdGguY2VpbChiYXNlU2l6ZSAqICgxICsgcHJvcHMudmlydHVhbFNjcm9sbFNsaWNlUmF0aW9CZWZvcmUpKSwKICAgICAgdmlldzogdmlldwogICAgfTsKICB9CgogIGZ1bmN0aW9uIHBhZFZpcnR1YWxTY3JvbGwodGFnLCBjb250ZW50KSB7CiAgICB2YXIgcGFkZGluZ1NpemUgPSBwcm9wcy52aXJ0dWFsU2Nyb2xsSG9yaXpvbnRhbCA9PT0gdHJ1ZSA/ICd3aWR0aCcgOiAnaGVpZ2h0JzsKCiAgICB2YXIgc3R5bGUgPSBfZGVmaW5lUHJvcGVydHkoe30sICctLXEtdmlydHVhbC1zY3JvbGwtaXRlbS0nICsgcGFkZGluZ1NpemUsIHZpcnR1YWxTY3JvbGxJdGVtU2l6ZUNvbXB1dGVkLnZhbHVlICsgJ3B4Jyk7CgogICAgcmV0dXJuIFt0YWcgPT09ICd0Ym9keScgPyBoKHRhZywgewogICAgICBjbGFzczogJ3EtdmlydHVhbC1zY3JvbGxfX3BhZGRpbmcnLAogICAgICBrZXk6ICdiZWZvcmUnLAogICAgICByZWY6IGJlZm9yZVJlZgogICAgfSwgW2goJ3RyJywgW2goJ3RkJywgewogICAgICBzdHlsZTogX29iamVjdFNwcmVhZChfZGVmaW5lUHJvcGVydHkoe30sIHBhZGRpbmdTaXplLCAiIi5jb25jYXQodmlydHVhbFNjcm9sbFBhZGRpbmdCZWZvcmUudmFsdWUsICJweCIpKSwgc3R5bGUpLAogICAgICBjb2xzcGFuOiBjb2xzcGFuQXR0ci52YWx1ZQogICAgfSldKV0pIDogaCh0YWcsIHsKICAgICAgY2xhc3M6ICdxLXZpcnR1YWwtc2Nyb2xsX19wYWRkaW5nJywKICAgICAga2V5OiAnYmVmb3JlJywKICAgICAgcmVmOiBiZWZvcmVSZWYsCiAgICAgIHN0eWxlOiBfb2JqZWN0U3ByZWFkKF9kZWZpbmVQcm9wZXJ0eSh7fSwgcGFkZGluZ1NpemUsICIiLmNvbmNhdCh2aXJ0dWFsU2Nyb2xsUGFkZGluZ0JlZm9yZS52YWx1ZSwgInB4IikpLCBzdHlsZSkKICAgIH0pLCBoKHRhZywgewogICAgICBjbGFzczogJ3EtdmlydHVhbC1zY3JvbGxfX2NvbnRlbnQnLAogICAgICBrZXk6ICdjb250ZW50JywKICAgICAgcmVmOiBjb250ZW50UmVmLAogICAgICBpZDogdnNJZCwKICAgICAgdGFiaW5kZXg6IC0xCiAgICB9LCBjb250ZW50LmZsYXQoKSksIHRhZyA9PT0gJ3Rib2R5JyA/IGgodGFnLCB7CiAgICAgIGNsYXNzOiAncS12aXJ0dWFsLXNjcm9sbF9fcGFkZGluZycsCiAgICAgIGtleTogJ2FmdGVyJywKICAgICAgcmVmOiBhZnRlclJlZgogICAgfSwgW2goJ3RyJywgW2goJ3RkJywgewogICAgICBzdHlsZTogX29iamVjdFNwcmVhZChfZGVmaW5lUHJvcGVydHkoe30sIHBhZGRpbmdTaXplLCAiIi5jb25jYXQodmlydHVhbFNjcm9sbFBhZGRpbmdBZnRlci52YWx1ZSwgInB4IikpLCBzdHlsZSksCiAgICAgIGNvbHNwYW46IGNvbHNwYW5BdHRyLnZhbHVlCiAgICB9KV0pXSkgOiBoKHRhZywgewogICAgICBjbGFzczogJ3EtdmlydHVhbC1zY3JvbGxfX3BhZGRpbmcnLAogICAgICBrZXk6ICdhZnRlcicsCiAgICAgIHJlZjogYWZ0ZXJSZWYsCiAgICAgIHN0eWxlOiBfb2JqZWN0U3ByZWFkKF9kZWZpbmVQcm9wZXJ0eSh7fSwgcGFkZGluZ1NpemUsICIiLmNvbmNhdCh2aXJ0dWFsU2Nyb2xsUGFkZGluZ0FmdGVyLnZhbHVlLCAicHgiKSksIHN0eWxlKQogICAgfSldOwogIH0KCiAgZnVuY3Rpb24gZW1pdFNjcm9sbChpbmRleCkgewogICAgaWYgKHByZXZUb0luZGV4ICE9PSBpbmRleCkgewogICAgICBwcm9wcy5vblZpcnR1YWxTY3JvbGwgIT09IHZvaWQgMCAmJiBlbWl0KCd2aXJ0dWFsLXNjcm9sbCcsIHsKICAgICAgICBpbmRleDogaW5kZXgsCiAgICAgICAgZnJvbTogdmlydHVhbFNjcm9sbFNsaWNlUmFuZ2UudmFsdWUuZnJvbSwKICAgICAgICB0bzogdmlydHVhbFNjcm9sbFNsaWNlUmFuZ2UudmFsdWUudG8gLSAxLAogICAgICAgIGRpcmVjdGlvbjogaW5kZXggPCBwcmV2VG9JbmRleCA/ICdkZWNyZWFzZScgOiAnaW5jcmVhc2UnLAogICAgICAgIHJlZjogcHJveHkKICAgICAgfSk7CiAgICAgIHByZXZUb0luZGV4ID0gaW5kZXg7CiAgICB9CiAgfQoKICBzZXRWaXJ0dWFsU2Nyb2xsU2l6ZSgpOwogIHZhciBvblZpcnR1YWxTY3JvbGxFdnQgPSBkZWJvdW5jZShsb2NhbE9uVmlydHVhbFNjcm9sbEV2dCwgJHEucGxhdGZvcm0uaXMuaW9zID09PSB0cnVlID8gMTIwIDogMzUpOwogIG9uQmVmb3JlTW91bnQoZnVuY3Rpb24gKCkgewogICAgc2V0VmlydHVhbFNjcm9sbFNpemUoKTsKICB9KTsKICBvbkFjdGl2YXRlZChmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2Nyb2xsRWwgPSBnZXRWaXJ0dWFsU2Nyb2xsVGFyZ2V0KCk7CgogICAgaWYgKHByZXZTY3JvbGxTdGFydCAhPT0gdm9pZCAwICYmIHNjcm9sbEVsICE9PSB2b2lkIDAgJiYgc2Nyb2xsRWwgIT09IG51bGwgJiYgc2Nyb2xsRWwubm9kZVR5cGUgIT09IDgpIHsKICAgICAgc2V0U2Nyb2xsKHNjcm9sbEVsLCBwcmV2U2Nyb2xsU3RhcnQsIHByb3BzLnZpcnR1YWxTY3JvbGxIb3Jpem9udGFsLCAkcS5sYW5nLnJ0bCk7CiAgICB9IGVsc2UgewogICAgICBzY3JvbGxUbyhwcmV2VG9JbmRleCk7CiAgICB9CiAgfSk7CiAgc2V0T3ZlcmZsb3dBbmNob3IgIT09IG5vb3AgJiYgb25CZWZvcmVVbm1vdW50KGZ1bmN0aW9uICgpIHsKICAgIHZhciBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodnNJZCArICdfc3MnKTsKICAgIHN0eWxlU2hlZXQgIT09IG51bGwgJiYgc3R5bGVTaGVldC5yZW1vdmUoKTsKICAgIG9uVmlydHVhbFNjcm9sbEV2dC5jYW5jZWwoKTsKICB9KTsgLy8gZXhwb3NlIHB1YmxpYyBtZXRob2RzCgogIE9iamVjdC5hc3NpZ24ocHJveHksIHsKICAgIHNjcm9sbFRvOiBzY3JvbGxUbywKICAgIHJlc2V0OiByZXNldCwKICAgIHJlZnJlc2g6IHJlZnJlc2gKICB9KTsKICByZXR1cm4gewogICAgdmlydHVhbFNjcm9sbFNsaWNlUmFuZ2U6IHZpcnR1YWxTY3JvbGxTbGljZVJhbmdlLAogICAgdmlydHVhbFNjcm9sbFNsaWNlU2l6ZUNvbXB1dGVkOiB2aXJ0dWFsU2Nyb2xsU2xpY2VTaXplQ29tcHV0ZWQsCiAgICBzZXRWaXJ0dWFsU2Nyb2xsU2l6ZTogc2V0VmlydHVhbFNjcm9sbFNpemUsCiAgICBvblZpcnR1YWxTY3JvbGxFdnQ6IG9uVmlydHVhbFNjcm9sbEV2dCwKICAgIGxvY2FsUmVzZXRWaXJ0dWFsU2Nyb2xsOiBsb2NhbFJlc2V0VmlydHVhbFNjcm9sbCwKICAgIHBhZFZpcnR1YWxTY3JvbGw6IHBhZFZpcnR1YWxTY3JvbGwsCiAgICBzY3JvbGxUbzogc2Nyb2xsVG8sCiAgICByZXNldDogcmVzZXQsCiAgICByZWZyZXNoOiByZWZyZXNoCiAgfTsKfQ=="},{"version":3,"sources":["/app/node_modules/quasar/src/components/virtual-scroll/use-virtual-scroll.js"],"names":["h","ref","computed","watch","onActivated","onBeforeMount","onBeforeUnmount","nextTick","getCurrentInstance","debounce","noop","rtlHasScrollBug","aggBucketSize","scrollToEdges","id","filterProto","Array","prototype","filter","setOverflowAnchor","__QUASAR_SSR__","window","getComputedStyle","document","body","overflowAnchor","index","ssId","styleSheet","getElementById","createElement","type","head","appendChild","qChildIndex","innerHTML","sumFn","acc","getScrollDetails","parent","child","beforeRef","afterRef","horizontal","rtl","stickyStart","stickyEnd","parentCalc","scrollingElement","documentElement","propElSize","details","scrollStart","scrollViewSize","scrollMaxSize","offsetStart","offsetEnd","pageXOffset","scrollX","scrollLeft","clientWidth","scrollWidth","pageYOffset","scrollY","scrollTop","clientHeight","scrollHeight","el","previousElementSibling","classList","contains","nextElementSibling","parentRect","getBoundingClientRect","childRect","left","width","top","height","setScroll","scroll","scrollTo","offsetWidth","sumSize","sizeAgg","size","from","to","lastTo","length","fromAgg","Math","floor","toAgg","total","slice","reduce","commonVirtScrollProps","virtualScrollSliceSize","Number","String","default","virtualScrollSliceRatioBefore","virtualScrollSliceRatioAfter","virtualScrollItemSize","virtualScrollStickySizeStart","virtualScrollStickySizeEnd","tableColspan","commonVirtPropsList","Object","keys","useVirtualScrollProps","virtualScrollHorizontal","Boolean","onVirtualScroll","Function","useVirtualScroll","virtualScrollLength","getVirtualScrollTarget","getVirtualScrollEl","virtualScrollItemSizeComputed","vm","props","emit","proxy","$q","prevScrollStart","prevToIndex","localScrollViewSize","virtualScrollSizesAgg","virtualScrollSizes","vsId","virtualScrollPaddingBefore","virtualScrollPaddingAfter","virtualScrollSliceSizeComputed","contentRef","virtualScrollSliceRange","colspanAttr","needsReset","value","needsSliceRecalc","setVirtualScrollSize","reset","localResetVirtualScroll","refresh","toIndex","edge","scrollEl","nodeType","scrollDetails","lang","setVirtualScrollSliceRange","min","max","parseInt","indexOf","localOnVirtualScrollEvt","listLastIndex","listEndOffset","updateVirtualScrollSizes","scrollMaxStart","ceil","listOffset","offset","j","align","alignForce","alignEnd","replace","alignRange","rangeChanged","emitScroll","activeElement","contentEl","addEventListener","onBlurRefocusFn","setTimeout","removeEventListener","sizeBefore","tempTo","requestAnimationFrame","sizeAfter","posStart","posEnd","scrollPosition","sizeDiff","round","children","call","childrenLength","sizeFn","offsetHeight","diff","i","focus","fullReset","defaultSize","isArray","oldVirtualScrollSizesLength","jMax","iMax","push","onVirtualScrollEvt","multiplier","view","baseSize","start","center","end","padVirtualScroll","tag","content","paddingSize","style","class","key","colspan","tabindex","flat","direction","platform","is","ios","remove","cancel","assign"],"mappings":"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","sourcesContent":["import { h, ref, computed, watch, onActivated, onBeforeMount, onBeforeUnmount, nextTick, getCurrentInstance } from 'vue'\n\nimport debounce from '../../utils/debounce.js'\nimport { noop } from '../../utils/event.js'\nimport { rtlHasScrollBug } from '../../utils/private/rtl.js'\n\nconst aggBucketSize = 1000\n\nconst scrollToEdges = [\n  'start',\n  'center',\n  'end',\n  'start-force',\n  'center-force',\n  'end-force'\n]\n\nlet id = 1\nconst filterProto = Array.prototype.filter\n\nconst setOverflowAnchor = __QUASAR_SSR__ || window.getComputedStyle(document.body).overflowAnchor === void 0\n  ? noop\n  : function (id, index) {\n    const ssId = id + '_ss'\n\n    let styleSheet = document.getElementById(ssId)\n\n    if (styleSheet === null) {\n      styleSheet = document.createElement('style')\n      styleSheet.type = 'text/css'\n      styleSheet.id = ssId\n      document.head.appendChild(styleSheet)\n    }\n\n    if (styleSheet.qChildIndex !== index) {\n      styleSheet.qChildIndex = index\n      styleSheet.innerHTML = `#${ id } > *:nth-child(${ index }) { overflow-anchor: auto }`\n    }\n  }\n\nfunction sumFn (acc, h) {\n  return acc + h\n}\n\nfunction getScrollDetails (\n  parent,\n  child,\n  beforeRef,\n  afterRef,\n  horizontal,\n  rtl,\n  stickyStart,\n  stickyEnd\n) {\n  const\n    parentCalc = parent === window ? document.scrollingElement || document.documentElement : parent,\n    propElSize = horizontal === true ? 'offsetWidth' : 'offsetHeight',\n    details = {\n      scrollStart: 0,\n      scrollViewSize: -stickyStart - stickyEnd,\n      scrollMaxSize: 0,\n      offsetStart: -stickyStart,\n      offsetEnd: -stickyEnd\n    }\n\n  if (horizontal === true) {\n    if (parent === window) {\n      details.scrollStart = window.pageXOffset || window.scrollX || document.body.scrollLeft || 0\n      details.scrollViewSize += document.documentElement.clientWidth\n    }\n    else {\n      details.scrollStart = parentCalc.scrollLeft\n      details.scrollViewSize += parentCalc.clientWidth\n    }\n    details.scrollMaxSize = parentCalc.scrollWidth\n\n    if (rtl === true) {\n      details.scrollStart = (rtlHasScrollBug === true ? details.scrollMaxSize - details.scrollViewSize : 0) - details.scrollStart\n    }\n  }\n  else {\n    if (parent === window) {\n      details.scrollStart = window.pageYOffset || window.scrollY || document.body.scrollTop || 0\n      details.scrollViewSize += document.documentElement.clientHeight\n    }\n    else {\n      details.scrollStart = parentCalc.scrollTop\n      details.scrollViewSize += parentCalc.clientHeight\n    }\n    details.scrollMaxSize = parentCalc.scrollHeight\n  }\n\n  if (beforeRef !== null) {\n    for (let el = beforeRef.previousElementSibling; el !== null; el = el.previousElementSibling) {\n      if (el.classList.contains('q-virtual-scroll--skip') === false) {\n        details.offsetStart += el[ propElSize ]\n      }\n    }\n  }\n\n  if (afterRef !== null) {\n    for (let el = afterRef.nextElementSibling; el !== null; el = el.nextElementSibling) {\n      if (el.classList.contains('q-virtual-scroll--skip') === false) {\n        details.offsetEnd += el[ propElSize ]\n      }\n    }\n  }\n\n  if (child !== parent) {\n    const\n      parentRect = parentCalc.getBoundingClientRect(),\n      childRect = child.getBoundingClientRect()\n\n    if (horizontal === true) {\n      details.offsetStart += childRect.left - parentRect.left\n      details.offsetEnd -= childRect.width\n    }\n    else {\n      details.offsetStart += childRect.top - parentRect.top\n      details.offsetEnd -= childRect.height\n    }\n\n    if (parent !== window) {\n      details.offsetStart += details.scrollStart\n    }\n    details.offsetEnd += details.scrollMaxSize - details.offsetStart\n  }\n\n  return details\n}\n\nfunction setScroll (parent, scroll, horizontal, rtl) {\n  if (scroll === 'end') {\n    scroll = (parent === window ? document.body : parent)[\n      horizontal === true ? 'scrollWidth' : 'scrollHeight'\n    ]\n  }\n\n  if (parent === window) {\n    if (horizontal === true) {\n      if (rtl === true) {\n        scroll = (rtlHasScrollBug === true ? document.body.scrollWidth - document.documentElement.clientWidth : 0) - scroll\n      }\n      window.scrollTo(scroll, window.pageYOffset || window.scrollY || document.body.scrollTop || 0)\n    }\n    else {\n      window.scrollTo(window.pageXOffset || window.scrollX || document.body.scrollLeft || 0, scroll)\n    }\n  }\n  else if (horizontal === true) {\n    if (rtl === true) {\n      scroll = (rtlHasScrollBug === true ? parent.scrollWidth - parent.offsetWidth : 0) - scroll\n    }\n    parent.scrollLeft = scroll\n  }\n  else {\n    parent.scrollTop = scroll\n  }\n}\n\nfunction sumSize (sizeAgg, size, from, to) {\n  if (from >= to) { return 0 }\n\n  const\n    lastTo = size.length,\n    fromAgg = Math.floor(from / aggBucketSize),\n    toAgg = Math.floor((to - 1) / aggBucketSize) + 1\n\n  let total = sizeAgg.slice(fromAgg, toAgg).reduce(sumFn, 0)\n\n  if (from % aggBucketSize !== 0) {\n    total -= size.slice(fromAgg * aggBucketSize, from).reduce(sumFn, 0)\n  }\n  if (to % aggBucketSize !== 0 && to !== lastTo) {\n    total -= size.slice(to, toAgg * aggBucketSize).reduce(sumFn, 0)\n  }\n\n  return total\n}\n\nconst commonVirtScrollProps = {\n  virtualScrollSliceSize: {\n    type: [ Number, String ],\n    default: null\n  },\n\n  virtualScrollSliceRatioBefore: {\n    type: [ Number, String ],\n    default: 1\n  },\n\n  virtualScrollSliceRatioAfter: {\n    type: [ Number, String ],\n    default: 1\n  },\n\n  virtualScrollItemSize: {\n    type: [ Number, String ],\n    default: 24\n  },\n\n  virtualScrollStickySizeStart: {\n    type: [ Number, String ],\n    default: 0\n  },\n\n  virtualScrollStickySizeEnd: {\n    type: [ Number, String ],\n    default: 0\n  },\n\n  tableColspan: [ Number, String ]\n}\n\nexport const commonVirtPropsList = Object.keys(commonVirtScrollProps)\n\nexport const useVirtualScrollProps = {\n  virtualScrollHorizontal: Boolean,\n  onVirtualScroll: Function,\n  ...commonVirtScrollProps\n}\n\nexport function useVirtualScroll ({\n  virtualScrollLength, getVirtualScrollTarget, getVirtualScrollEl,\n  virtualScrollItemSizeComputed // optional\n}) {\n  const vm = getCurrentInstance()\n\n  const { props, emit, proxy } = vm\n  const { $q } = proxy\n\n  let prevScrollStart, prevToIndex, localScrollViewSize, virtualScrollSizesAgg = [], virtualScrollSizes\n\n  const vsId = 'qvs_' + id++\n\n  const virtualScrollPaddingBefore = ref(0)\n  const virtualScrollPaddingAfter = ref(0)\n  const virtualScrollSliceSizeComputed = ref({})\n\n  const beforeRef = ref(null)\n  const afterRef = ref(null)\n  const contentRef = ref(null)\n\n  const virtualScrollSliceRange = ref({ from: 0, to: 0 })\n\n  const colspanAttr = computed(() => (props.tableColspan !== void 0 ? props.tableColspan : 100))\n\n  if (virtualScrollItemSizeComputed === void 0) {\n    virtualScrollItemSizeComputed = computed(() => props.virtualScrollItemSize)\n  }\n\n  const needsReset = computed(() => virtualScrollItemSizeComputed.value + ';' + props.virtualScrollHorizontal)\n\n  const needsSliceRecalc = computed(() =>\n    needsReset.value + ';' + props.virtualScrollSliceRatioBefore + ';' + props.virtualScrollSliceRatioAfter\n  )\n\n  watch(needsSliceRecalc, () => { setVirtualScrollSize() })\n  watch(needsReset, reset)\n\n  function reset () {\n    localResetVirtualScroll(prevToIndex, true)\n  }\n\n  function refresh (toIndex) {\n    localResetVirtualScroll(toIndex === void 0 ? prevToIndex : toIndex)\n  }\n\n  function scrollTo (toIndex, edge) {\n    const scrollEl = getVirtualScrollTarget()\n\n    if (scrollEl === void 0 || scrollEl === null || scrollEl.nodeType === 8) {\n      return\n    }\n\n    const scrollDetails = getScrollDetails(\n      scrollEl,\n      getVirtualScrollEl(),\n      beforeRef.value,\n      afterRef.value,\n      props.virtualScrollHorizontal,\n      $q.lang.rtl,\n      props.virtualScrollStickySizeStart,\n      props.virtualScrollStickySizeEnd\n    )\n\n    localScrollViewSize !== scrollDetails.scrollViewSize && setVirtualScrollSize(scrollDetails.scrollViewSize)\n\n    setVirtualScrollSliceRange(\n      scrollEl,\n      scrollDetails,\n      Math.min(virtualScrollLength.value - 1, Math.max(0, parseInt(toIndex, 10) || 0)),\n      0,\n      scrollToEdges.indexOf(edge) > -1 ? edge : (prevToIndex > -1 && toIndex > prevToIndex ? 'end' : 'start')\n    )\n  }\n\n  function localOnVirtualScrollEvt () {\n    const scrollEl = getVirtualScrollTarget()\n\n    if (scrollEl === void 0 || scrollEl === null || scrollEl.nodeType === 8) {\n      return\n    }\n\n    const\n      scrollDetails = getScrollDetails(\n        scrollEl,\n        getVirtualScrollEl(),\n        beforeRef.value,\n        afterRef.value,\n        props.virtualScrollHorizontal,\n        $q.lang.rtl,\n        props.virtualScrollStickySizeStart,\n        props.virtualScrollStickySizeEnd\n      ),\n      listLastIndex = virtualScrollLength.value - 1,\n      listEndOffset = scrollDetails.scrollMaxSize - scrollDetails.offsetStart - scrollDetails.offsetEnd - virtualScrollPaddingAfter.value\n\n    if (prevScrollStart === scrollDetails.scrollStart) {\n      return\n    }\n\n    if (scrollDetails.scrollMaxSize <= 0) {\n      setVirtualScrollSliceRange(scrollEl, scrollDetails, 0, 0)\n      return\n    }\n\n    localScrollViewSize !== scrollDetails.scrollViewSize && setVirtualScrollSize(scrollDetails.scrollViewSize)\n\n    updateVirtualScrollSizes(virtualScrollSliceRange.value.from)\n\n    const scrollMaxStart = Math.floor(scrollDetails.scrollMaxSize\n      - Math.max(scrollDetails.scrollViewSize, scrollDetails.offsetEnd)\n      - Math.min(virtualScrollSizes[ listLastIndex ], scrollDetails.scrollViewSize / 2))\n\n    if (scrollMaxStart > 0 && Math.ceil(scrollDetails.scrollStart) >= scrollMaxStart) {\n      setVirtualScrollSliceRange(\n        scrollEl,\n        scrollDetails,\n        listLastIndex,\n        scrollDetails.scrollMaxSize - scrollDetails.offsetEnd - virtualScrollSizesAgg.reduce(sumFn, 0)\n      )\n\n      return\n    }\n\n    let\n      toIndex = 0,\n      listOffset = scrollDetails.scrollStart - scrollDetails.offsetStart,\n      offset = listOffset\n\n    if (listOffset <= listEndOffset && listOffset + scrollDetails.scrollViewSize >= virtualScrollPaddingBefore.value) {\n      listOffset -= virtualScrollPaddingBefore.value\n      toIndex = virtualScrollSliceRange.value.from\n      offset = listOffset\n    }\n    else {\n      for (let j = 0; listOffset >= virtualScrollSizesAgg[ j ] && toIndex < listLastIndex; j++) {\n        listOffset -= virtualScrollSizesAgg[ j ]\n        toIndex += aggBucketSize\n      }\n    }\n\n    while (listOffset > 0 && toIndex < listLastIndex) {\n      listOffset -= virtualScrollSizes[ toIndex ]\n      if (listOffset > -scrollDetails.scrollViewSize) {\n        toIndex++\n        offset = listOffset\n      }\n      else {\n        offset = virtualScrollSizes[ toIndex ] + listOffset\n      }\n    }\n\n    setVirtualScrollSliceRange(\n      scrollEl,\n      scrollDetails,\n      toIndex,\n      offset\n    )\n  }\n\n  function setVirtualScrollSliceRange (scrollEl, scrollDetails, toIndex, offset, align) {\n    const alignForce = typeof align === 'string' && align.indexOf('-force') > -1\n    const alignEnd = alignForce === true ? align.replace('-force', '') : align\n    const alignRange = alignEnd !== void 0 ? alignEnd : 'start'\n\n    let\n      from = Math.max(0, toIndex - virtualScrollSliceSizeComputed.value[ alignRange ]),\n      to = from + virtualScrollSliceSizeComputed.value.total\n\n    if (to > virtualScrollLength.value) {\n      to = virtualScrollLength.value\n      from = Math.max(0, to - virtualScrollSliceSizeComputed.value.total)\n    }\n\n    prevScrollStart = scrollDetails.scrollStart\n\n    const rangeChanged = from !== virtualScrollSliceRange.value.from || to !== virtualScrollSliceRange.value.to\n\n    if (rangeChanged === false && alignEnd === void 0) {\n      emitScroll(toIndex)\n      return\n    }\n\n    const { activeElement } = document\n    const contentEl = contentRef.value\n    if (\n      rangeChanged === true\n      && contentEl !== null\n      && contentEl !== activeElement\n      && contentEl.contains(activeElement) === true\n    ) {\n      contentEl.addEventListener('focusout', onBlurRefocusFn)\n\n      setTimeout(() => {\n        contentEl !== void 0 && contentEl.removeEventListener('focusout', onBlurRefocusFn)\n      })\n    }\n\n    setOverflowAnchor(vsId, toIndex - from + 1)\n\n    const sizeBefore = alignEnd !== void 0 ? virtualScrollSizes.slice(from, toIndex).reduce(sumFn, 0) : 0\n\n    if (rangeChanged === true) {\n      // vue key matching algorithm works only if\n      // the array of VNodes changes on only one of the ends\n      // so we first change one end and then the other\n\n      const tempTo = to >= virtualScrollSliceRange.value.from && from <= virtualScrollSliceRange.value.to\n        ? virtualScrollSliceRange.value.to\n        : to\n\n      virtualScrollSliceRange.value = { from, to: tempTo }\n      virtualScrollPaddingBefore.value = sumSize(virtualScrollSizesAgg, virtualScrollSizes, 0, from)\n      virtualScrollPaddingAfter.value = sumSize(virtualScrollSizesAgg, virtualScrollSizes, to, virtualScrollLength.value)\n\n      requestAnimationFrame(() => {\n        if (virtualScrollSliceRange.value.to !== to && prevScrollStart === scrollDetails.scrollStart) {\n          virtualScrollSliceRange.value = { from: virtualScrollSliceRange.value.from, to }\n          virtualScrollPaddingAfter.value = sumSize(virtualScrollSizesAgg, virtualScrollSizes, to, virtualScrollLength.value)\n        }\n      })\n    }\n\n    requestAnimationFrame(() => {\n      // if the scroll was changed give up\n      // (another call to setVirtualScrollSliceRange before animation frame)\n      if (prevScrollStart !== scrollDetails.scrollStart) {\n        return\n      }\n\n      if (rangeChanged === true) {\n        updateVirtualScrollSizes(from)\n      }\n\n      const\n        sizeAfter = virtualScrollSizes.slice(from, toIndex).reduce(sumFn, 0),\n        posStart = sizeAfter + scrollDetails.offsetStart + virtualScrollPaddingBefore.value,\n        posEnd = posStart + virtualScrollSizes[ toIndex ]\n\n      let scrollPosition = posStart + offset\n\n      if (alignEnd !== void 0) {\n        const sizeDiff = sizeAfter - sizeBefore\n        const scrollStart = scrollDetails.scrollStart + sizeDiff\n\n        scrollPosition = alignForce !== true && scrollStart < posStart && posEnd < scrollStart + scrollDetails.scrollViewSize\n          ? scrollStart\n          : (\n              alignEnd === 'end'\n                ? posEnd - scrollDetails.scrollViewSize\n                : posStart - (alignEnd === 'start' ? 0 : Math.round((scrollDetails.scrollViewSize - virtualScrollSizes[ toIndex ]) / 2))\n            )\n      }\n\n      prevScrollStart = scrollPosition\n\n      setScroll(\n        scrollEl,\n        scrollPosition,\n        props.virtualScrollHorizontal,\n        $q.lang.rtl\n      )\n\n      emitScroll(toIndex)\n    })\n  }\n\n  function updateVirtualScrollSizes (from) {\n    const contentEl = contentRef.value\n\n    if (contentEl) {\n      const\n        children = filterProto.call(\n          contentEl.children,\n          el => el.classList && el.classList.contains('q-virtual-scroll--skip') === false\n        ),\n        childrenLength = children.length,\n        sizeFn = props.virtualScrollHorizontal === true\n          ? el => el.getBoundingClientRect().width\n          : el => el.offsetHeight\n\n      let\n        index = from,\n        size, diff\n\n      for (let i = 0; i < childrenLength;) {\n        size = sizeFn(children[ i ])\n        i++\n\n        while (i < childrenLength && children[ i ].classList.contains('q-virtual-scroll--with-prev') === true) {\n          size += sizeFn(children[ i ])\n          i++\n        }\n\n        diff = size - virtualScrollSizes[ index ]\n\n        if (diff !== 0) {\n          virtualScrollSizes[ index ] += diff\n          virtualScrollSizesAgg[ Math.floor(index / aggBucketSize) ] += diff\n        }\n\n        index++\n      }\n    }\n  }\n\n  function onBlurRefocusFn () {\n    contentRef.value !== void 0 && contentRef.value.focus()\n  }\n\n  function localResetVirtualScroll (toIndex, fullReset) {\n    const defaultSize = 1 * virtualScrollItemSizeComputed.value\n\n    if (fullReset === true || Array.isArray(virtualScrollSizes) === false) {\n      virtualScrollSizes = []\n    }\n\n    const oldVirtualScrollSizesLength = virtualScrollSizes.length\n\n    virtualScrollSizes.length = virtualScrollLength.value\n\n    for (let i = virtualScrollLength.value - 1; i >= oldVirtualScrollSizesLength; i--) {\n      virtualScrollSizes[ i ] = defaultSize\n    }\n\n    const jMax = Math.floor((virtualScrollLength.value - 1) / aggBucketSize)\n    virtualScrollSizesAgg = []\n    for (let j = 0; j <= jMax; j++) {\n      let size = 0\n      const iMax = Math.min((j + 1) * aggBucketSize, virtualScrollLength.value)\n      for (let i = j * aggBucketSize; i < iMax; i++) {\n        size += virtualScrollSizes[ i ]\n      }\n      virtualScrollSizesAgg.push(size)\n    }\n\n    prevToIndex = -1\n    prevScrollStart = void 0\n\n    if (toIndex >= 0) {\n      updateVirtualScrollSizes(virtualScrollSliceRange.value.from)\n      nextTick(() => { scrollTo(toIndex) })\n    }\n    else {\n      virtualScrollPaddingBefore.value = sumSize(virtualScrollSizesAgg, virtualScrollSizes, 0, virtualScrollSliceRange.value.from)\n      virtualScrollPaddingAfter.value = sumSize(virtualScrollSizesAgg, virtualScrollSizes, virtualScrollSliceRange.value.to, virtualScrollLength.value)\n      onVirtualScrollEvt()\n    }\n  }\n\n  function setVirtualScrollSize (scrollViewSize) {\n    if (scrollViewSize === void 0 && typeof window !== 'undefined') {\n      const scrollEl = getVirtualScrollTarget()\n\n      if (scrollEl !== void 0 && scrollEl !== null && scrollEl.nodeType !== 8) {\n        scrollViewSize = getScrollDetails(\n          scrollEl,\n          getVirtualScrollEl(),\n          beforeRef.value,\n          afterRef.value,\n          props.virtualScrollHorizontal,\n          $q.lang.rtl,\n          props.virtualScrollStickySizeStart,\n          props.virtualScrollStickySizeEnd\n        ).scrollViewSize\n      }\n    }\n\n    localScrollViewSize = scrollViewSize\n\n    const multiplier = 1 + props.virtualScrollSliceRatioBefore + props.virtualScrollSliceRatioAfter\n    const view = scrollViewSize === void 0 || scrollViewSize <= 0\n      ? 1\n      : Math.ceil(scrollViewSize / virtualScrollItemSizeComputed.value)\n\n    const baseSize = Math.max(\n      10,\n      view,\n      Math.ceil(props.virtualScrollSliceSize / multiplier)\n    )\n\n    virtualScrollSliceSizeComputed.value = {\n      total: Math.ceil(baseSize * multiplier),\n      start: Math.ceil(baseSize * props.virtualScrollSliceRatioBefore),\n      center: Math.ceil(baseSize * (0.5 + props.virtualScrollSliceRatioBefore)),\n      end: Math.ceil(baseSize * (1 + props.virtualScrollSliceRatioBefore)),\n      view\n    }\n  }\n\n  function padVirtualScroll (tag, content) {\n    const paddingSize = props.virtualScrollHorizontal === true ? 'width' : 'height'\n    const style = {\n      [ '--q-virtual-scroll-item-' + paddingSize ]: virtualScrollItemSizeComputed.value + 'px'\n    }\n\n    return [\n      tag === 'tbody'\n        ? h(tag, {\n            class: 'q-virtual-scroll__padding',\n            key: 'before',\n            ref: beforeRef\n          }, [\n            h('tr', [\n              h('td', {\n                style: { [ paddingSize ]: `${ virtualScrollPaddingBefore.value }px`, ...style },\n                colspan: colspanAttr.value\n              })\n            ])\n          ])\n        : h(tag, {\n          class: 'q-virtual-scroll__padding',\n          key: 'before',\n          ref: beforeRef,\n          style: { [ paddingSize ]: `${ virtualScrollPaddingBefore.value }px`, ...style }\n        }),\n\n      h(tag, {\n        class: 'q-virtual-scroll__content',\n        key: 'content',\n        ref: contentRef,\n        id: vsId,\n        tabindex: -1\n      }, content.flat()),\n\n      tag === 'tbody'\n        ? h(tag, {\n            class: 'q-virtual-scroll__padding',\n            key: 'after',\n            ref: afterRef\n          }, [\n            h('tr', [\n              h('td', {\n                style: { [ paddingSize ]: `${ virtualScrollPaddingAfter.value }px`, ...style },\n                colspan: colspanAttr.value\n              })\n            ])\n          ])\n        : h(tag, {\n          class: 'q-virtual-scroll__padding',\n          key: 'after',\n          ref: afterRef,\n          style: { [ paddingSize ]: `${ virtualScrollPaddingAfter.value }px`, ...style }\n        })\n    ]\n  }\n\n  function emitScroll (index) {\n    if (prevToIndex !== index) {\n      props.onVirtualScroll !== void 0 && emit('virtual-scroll', {\n        index,\n        from: virtualScrollSliceRange.value.from,\n        to: virtualScrollSliceRange.value.to - 1,\n        direction: index < prevToIndex ? 'decrease' : 'increase',\n        ref: proxy\n      })\n\n      prevToIndex = index\n    }\n  }\n\n  setVirtualScrollSize()\n  const onVirtualScrollEvt = debounce(\n    localOnVirtualScrollEvt,\n    $q.platform.is.ios === true ? 120 : 35\n  )\n\n  onBeforeMount(() => {\n    setVirtualScrollSize()\n  })\n\n  onActivated(() => {\n    const scrollEl = getVirtualScrollTarget()\n\n    if (prevScrollStart !== void 0 && scrollEl !== void 0 && scrollEl !== null && scrollEl.nodeType !== 8) {\n      setScroll(\n        scrollEl,\n        prevScrollStart,\n        props.virtualScrollHorizontal,\n        $q.lang.rtl\n      )\n    }\n    else {\n      scrollTo(prevToIndex)\n    }\n  })\n\n  setOverflowAnchor !== noop && onBeforeUnmount(() => {\n    const styleSheet = document.getElementById(vsId + '_ss')\n    styleSheet !== null && styleSheet.remove()\n    onVirtualScrollEvt.cancel()\n  })\n\n  // expose public methods\n  Object.assign(proxy, { scrollTo, reset, refresh })\n\n  return {\n    virtualScrollSliceRange,\n    virtualScrollSliceSizeComputed,\n\n    setVirtualScrollSize,\n    onVirtualScrollEvt,\n    localResetVirtualScroll,\n    padVirtualScroll,\n\n    scrollTo,\n    reset,\n    refresh\n  }\n}\n"]}]}