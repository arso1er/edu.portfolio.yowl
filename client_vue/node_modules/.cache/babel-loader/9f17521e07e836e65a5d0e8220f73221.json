{"remainingRequest":"/app/node_modules/babel-loader/lib/index.js!/app/node_modules/vue-cli-plugin-quasar/lib/loader.js.transform-quasar-imports.js!/app/node_modules/quasar/src/components/select/QSelect.js","dependencies":[{"path":"/app/node_modules/quasar/src/components/select/QSelect.js","mtime":1640793220809},{"path":"/app/babel.config.js","mtime":1641198370373},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1640299636612},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1640299636618},{"path":"/app/node_modules/vue-cli-plugin-quasar/lib/loader.js.transform-quasar-imports.js","mtime":1640775278388}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL2FwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZG90LWFsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnN0aWNreS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudGVzdC5qcyI7CmltcG9ydCB7IGgsIHJlZiwgY29tcHV0ZWQsIHdhdGNoLCBvbkJlZm9yZVVwZGF0ZSwgb25VcGRhdGVkLCBvbkJlZm9yZVVubW91bnQsIG5leHRUaWNrLCBnZXRDdXJyZW50SW5zdGFuY2UgfSBmcm9tICd2dWUnOwppbXBvcnQgUUZpZWxkIGZyb20gJy4uL2ZpZWxkL1FGaWVsZC5qcyc7CmltcG9ydCBRSWNvbiBmcm9tICcuLi9pY29uL1FJY29uLmpzJzsKaW1wb3J0IFFDaGlwIGZyb20gJy4uL2NoaXAvUUNoaXAuanMnOwppbXBvcnQgUUl0ZW0gZnJvbSAnLi4vaXRlbS9RSXRlbS5qcyc7CmltcG9ydCBRSXRlbVNlY3Rpb24gZnJvbSAnLi4vaXRlbS9RSXRlbVNlY3Rpb24uanMnOwppbXBvcnQgUUl0ZW1MYWJlbCBmcm9tICcuLi9pdGVtL1FJdGVtTGFiZWwuanMnOwppbXBvcnQgUU1lbnUgZnJvbSAnLi4vbWVudS9RTWVudS5qcyc7CmltcG9ydCBRRGlhbG9nIGZyb20gJy4uL2RpYWxvZy9RRGlhbG9nLmpzJzsKaW1wb3J0IHVzZUZpZWxkLCB7IHVzZUZpZWxkU3RhdGUsIHVzZUZpZWxkUHJvcHMsIHVzZUZpZWxkRW1pdHMsIGZpZWxkVmFsdWVJc0ZpbGxlZCB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLWZpZWxkLmpzJzsKaW1wb3J0IHsgdXNlVmlydHVhbFNjcm9sbCwgdXNlVmlydHVhbFNjcm9sbFByb3BzIH0gZnJvbSAnLi4vdmlydHVhbC1zY3JvbGwvdXNlLXZpcnR1YWwtc2Nyb2xsLmpzJzsKaW1wb3J0IHsgdXNlRm9ybVByb3BzLCB1c2VGb3JtSW5wdXROYW1lQXR0ciB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLWZvcm0uanMnOwppbXBvcnQgdXNlS2V5Q29tcG9zaXRpb24gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2Uta2V5LWNvbXBvc2l0aW9uLmpzJzsKaW1wb3J0IHsgY3JlYXRlQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9jcmVhdGUuanMnOwppbXBvcnQgeyBpc0RlZXBFcXVhbCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvaXMuanMnOwppbXBvcnQgeyBzdG9wLCBwcmV2ZW50LCBzdG9wQW5kUHJldmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL2V2ZW50LmpzJzsKaW1wb3J0IHsgbm9ybWFsaXplVG9JbnRlcnZhbCB9IGZyb20gJy4uLy4uL3V0aWxzL2Zvcm1hdC5qcyc7CmltcG9ydCB7IHNob3VsZElnbm9yZUtleSwgaXNLZXlDb2RlIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9rZXktY29tcG9zaXRpb24uanMnOwppbXBvcnQgeyBoTWVyZ2VTbG90IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9yZW5kZXIuanMnOwoKdmFyIHZhbGlkYXRlTmV3VmFsdWVNb2RlID0gZnVuY3Rpb24gdmFsaWRhdGVOZXdWYWx1ZU1vZGUodikgewogIHJldHVybiBbJ2FkZCcsICdhZGQtdW5pcXVlJywgJ3RvZ2dsZSddLmluY2x1ZGVzKHYpOwp9OwoKdmFyIHJlRXNjYXBlTGlzdCA9ICcuKis/XiR7fSgpfFtdXFwnOwp2YXIgZmllbGRQcm9wc0xpc3QgPSBPYmplY3Qua2V5cyh1c2VGaWVsZFByb3BzKTsKZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHsKICBuYW1lOiAnUVNlbGVjdCcsCiAgaW5oZXJpdEF0dHJzOiBmYWxzZSwKICBwcm9wczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdXNlVmlydHVhbFNjcm9sbFByb3BzKSwgdXNlRm9ybVByb3BzKSwgdXNlRmllbGRQcm9wcyksIHt9LCB7CiAgICBtb2RlbFZhbHVlOiB7CiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgbXVsdGlwbGU6IEJvb2xlYW4sCiAgICBkaXNwbGF5VmFsdWU6IFtTdHJpbmcsIE51bWJlcl0sCiAgICBkaXNwbGF5VmFsdWVIdG1sOiBCb29sZWFuLAogICAgZHJvcGRvd25JY29uOiBTdHJpbmcsCiAgICBvcHRpb25zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICBvcHRpb25WYWx1ZTogW0Z1bmN0aW9uLCBTdHJpbmddLAogICAgb3B0aW9uTGFiZWw6IFtGdW5jdGlvbiwgU3RyaW5nXSwKICAgIG9wdGlvbkRpc2FibGU6IFtGdW5jdGlvbiwgU3RyaW5nXSwKICAgIGhpZGVTZWxlY3RlZDogQm9vbGVhbiwKICAgIGhpZGVEcm9wZG93bkljb246IEJvb2xlYW4sCiAgICBmaWxsSW5wdXQ6IEJvb2xlYW4sCiAgICBtYXhWYWx1ZXM6IFtOdW1iZXIsIFN0cmluZ10sCiAgICBvcHRpb25zRGVuc2U6IEJvb2xlYW4sCiAgICBvcHRpb25zRGFyazogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgb3B0aW9uc1NlbGVjdGVkQ2xhc3M6IFN0cmluZywKICAgIG9wdGlvbnNIdG1sOiBCb29sZWFuLAogICAgb3B0aW9uc0NvdmVyOiBCb29sZWFuLAogICAgbWVudVNocmluazogQm9vbGVhbiwKICAgIG1lbnVBbmNob3I6IFN0cmluZywKICAgIG1lbnVTZWxmOiBTdHJpbmcsCiAgICBtZW51T2Zmc2V0OiBBcnJheSwKICAgIHBvcHVwQ29udGVudENsYXNzOiBTdHJpbmcsCiAgICBwb3B1cENvbnRlbnRTdHlsZTogW1N0cmluZywgQXJyYXksIE9iamVjdF0sCiAgICB1c2VJbnB1dDogQm9vbGVhbiwKICAgIHVzZUNoaXBzOiBCb29sZWFuLAogICAgbmV3VmFsdWVNb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZU5ld1ZhbHVlTW9kZQogICAgfSwKICAgIG1hcE9wdGlvbnM6IEJvb2xlYW4sCiAgICBlbWl0VmFsdWU6IEJvb2xlYW4sCiAgICBpbnB1dERlYm91bmNlOiB7CiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sCiAgICAgIGRlZmF1bHQ6IDUwMAogICAgfSwKICAgIGlucHV0Q2xhc3M6IFtBcnJheSwgU3RyaW5nLCBPYmplY3RdLAogICAgaW5wdXRTdHlsZTogW0FycmF5LCBTdHJpbmcsIE9iamVjdF0sCiAgICB0YWJpbmRleDogewogICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLAogICAgICBkZWZhdWx0OiAwCiAgICB9LAogICAgYXV0b2NvbXBsZXRlOiBTdHJpbmcsCiAgICB0cmFuc2l0aW9uU2hvdzogU3RyaW5nLAogICAgdHJhbnNpdGlvbkhpZGU6IFN0cmluZywKICAgIHRyYW5zaXRpb25EdXJhdGlvbjogW1N0cmluZywgTnVtYmVyXSwKICAgIGJlaGF2aW9yOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbiB2YWxpZGF0b3IodikgewogICAgICAgIHJldHVybiBbJ2RlZmF1bHQnLCAnbWVudScsICdkaWFsb2cnXS5pbmNsdWRlcyh2KTsKICAgICAgfSwKICAgICAgZGVmYXVsdDogJ2RlZmF1bHQnCiAgICB9LAogICAgdmlydHVhbFNjcm9sbEl0ZW1TaXplOiB7CiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sCiAgICAgIGRlZmF1bHQ6IHZvaWQgMAogICAgfSwKICAgIG9uTmV3VmFsdWU6IEZ1bmN0aW9uLAogICAgb25GaWx0ZXI6IEZ1bmN0aW9uCiAgfSksCiAgZW1pdHM6IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodXNlRmllbGRFbWl0cyksIFsnYWRkJywgJ3JlbW92ZScsICdpbnB1dC12YWx1ZScsICdrZXl1cCcsICdrZXlwcmVzcycsICdrZXlkb3duJywgJ2ZpbHRlci1hYm9ydCddKSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMsIF9yZWYpIHsKICAgIHZhciBzbG90cyA9IF9yZWYuc2xvdHMsCiAgICAgICAgZW1pdCA9IF9yZWYuZW1pdDsKCiAgICB2YXIgX2dldEN1cnJlbnRJbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpLAogICAgICAgIHByb3h5ID0gX2dldEN1cnJlbnRJbnN0YW5jZS5wcm94eTsKCiAgICB2YXIgJHEgPSBwcm94eS4kcTsKICAgIHZhciBtZW51ID0gcmVmKGZhbHNlKTsKICAgIHZhciBkaWFsb2cgPSByZWYoZmFsc2UpOwogICAgdmFyIG9wdGlvbkluZGV4ID0gcmVmKC0xKTsKICAgIHZhciBpbnB1dFZhbHVlID0gcmVmKCcnKTsKICAgIHZhciBkaWFsb2dGaWVsZEZvY3VzZWQgPSByZWYoZmFsc2UpOwogICAgdmFyIGlubmVyTG9hZGluZ0luZGljYXRvciA9IHJlZihmYWxzZSk7CiAgICB2YXIgaW5wdXRUaW1lciwgaW5uZXJWYWx1ZUNhY2hlLCBoYXNEaWFsb2csIHVzZXJJbnB1dFZhbHVlLCBmaWx0ZXJJZCwgZGVmYXVsdElucHV0VmFsdWUsIHRyYW5zaXRpb25TaG93Q29tcHV0ZWQsIHNlYXJjaEJ1ZmZlciwgc2VhcmNoQnVmZmVyRXhwOwogICAgdmFyIGlucHV0UmVmID0gcmVmKG51bGwpOwogICAgdmFyIHRhcmdldFJlZiA9IHJlZihudWxsKTsKICAgIHZhciBtZW51UmVmID0gcmVmKG51bGwpOwogICAgdmFyIGRpYWxvZ1JlZiA9IHJlZihudWxsKTsKICAgIHZhciBtZW51Q29udGVudFJlZiA9IHJlZihudWxsKTsKICAgIHZhciBuYW1lUHJvcCA9IHVzZUZvcm1JbnB1dE5hbWVBdHRyKHByb3BzKTsKICAgIHZhciBvbkNvbXBvc2l0aW9uID0gdXNlS2V5Q29tcG9zaXRpb24ob25JbnB1dCk7CiAgICB2YXIgdmlydHVhbFNjcm9sbExlbmd0aCA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkocHJvcHMub3B0aW9ucykgPyBwcm9wcy5vcHRpb25zLmxlbmd0aCA6IDA7CiAgICB9KTsKICAgIHZhciB2aXJ0dWFsU2Nyb2xsSXRlbVNpemVDb21wdXRlZCA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHByb3BzLnZpcnR1YWxTY3JvbGxJdGVtU2l6ZSA9PT0gdm9pZCAwID8gcHJvcHMuZGVuc2UgPT09IHRydWUgPyAyNCA6IDQ4IDogcHJvcHMudmlydHVhbFNjcm9sbEl0ZW1TaXplOwogICAgfSk7CgogICAgdmFyIF91c2VWaXJ0dWFsU2Nyb2xsID0gdXNlVmlydHVhbFNjcm9sbCh7CiAgICAgIHZpcnR1YWxTY3JvbGxMZW5ndGg6IHZpcnR1YWxTY3JvbGxMZW5ndGgsCiAgICAgIGdldFZpcnR1YWxTY3JvbGxUYXJnZXQ6IGdldFZpcnR1YWxTY3JvbGxUYXJnZXQsCiAgICAgIGdldFZpcnR1YWxTY3JvbGxFbDogZ2V0VmlydHVhbFNjcm9sbEVsLAogICAgICB2aXJ0dWFsU2Nyb2xsSXRlbVNpemVDb21wdXRlZDogdmlydHVhbFNjcm9sbEl0ZW1TaXplQ29tcHV0ZWQKICAgIH0pLAogICAgICAgIHZpcnR1YWxTY3JvbGxTbGljZVJhbmdlID0gX3VzZVZpcnR1YWxTY3JvbGwudmlydHVhbFNjcm9sbFNsaWNlUmFuZ2UsCiAgICAgICAgdmlydHVhbFNjcm9sbFNsaWNlU2l6ZUNvbXB1dGVkID0gX3VzZVZpcnR1YWxTY3JvbGwudmlydHVhbFNjcm9sbFNsaWNlU2l6ZUNvbXB1dGVkLAogICAgICAgIGxvY2FsUmVzZXRWaXJ0dWFsU2Nyb2xsID0gX3VzZVZpcnR1YWxTY3JvbGwubG9jYWxSZXNldFZpcnR1YWxTY3JvbGwsCiAgICAgICAgcGFkVmlydHVhbFNjcm9sbCA9IF91c2VWaXJ0dWFsU2Nyb2xsLnBhZFZpcnR1YWxTY3JvbGwsCiAgICAgICAgb25WaXJ0dWFsU2Nyb2xsRXZ0ID0gX3VzZVZpcnR1YWxTY3JvbGwub25WaXJ0dWFsU2Nyb2xsRXZ0LAogICAgICAgIHNjcm9sbFRvID0gX3VzZVZpcnR1YWxTY3JvbGwuc2Nyb2xsVG8sCiAgICAgICAgc2V0VmlydHVhbFNjcm9sbFNpemUgPSBfdXNlVmlydHVhbFNjcm9sbC5zZXRWaXJ0dWFsU2Nyb2xsU2l6ZTsKCiAgICB2YXIgc3RhdGUgPSB1c2VGaWVsZFN0YXRlKCk7CiAgICB2YXIgaW5uZXJWYWx1ZSA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG1hcE51bGwgPSBwcm9wcy5tYXBPcHRpb25zID09PSB0cnVlICYmIHByb3BzLm11bHRpcGxlICE9PSB0cnVlLAogICAgICAgICAgdmFsID0gcHJvcHMubW9kZWxWYWx1ZSAhPT0gdm9pZCAwICYmIChwcm9wcy5tb2RlbFZhbHVlICE9PSBudWxsIHx8IG1hcE51bGwgPT09IHRydWUpID8gcHJvcHMubXVsdGlwbGUgPT09IHRydWUgJiYgQXJyYXkuaXNBcnJheShwcm9wcy5tb2RlbFZhbHVlKSA/IHByb3BzLm1vZGVsVmFsdWUgOiBbcHJvcHMubW9kZWxWYWx1ZV0gOiBbXTsKCiAgICAgIGlmIChwcm9wcy5tYXBPcHRpb25zID09PSB0cnVlICYmIEFycmF5LmlzQXJyYXkocHJvcHMub3B0aW9ucykgPT09IHRydWUpIHsKICAgICAgICB2YXIgY2FjaGUgPSBwcm9wcy5tYXBPcHRpb25zID09PSB0cnVlICYmIGlubmVyVmFsdWVDYWNoZSAhPT0gdm9pZCAwID8gaW5uZXJWYWx1ZUNhY2hlIDogW107CiAgICAgICAgdmFyIHZhbHVlcyA9IHZhbC5tYXAoZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIHJldHVybiBnZXRPcHRpb24odiwgY2FjaGUpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBwcm9wcy5tb2RlbFZhbHVlID09PSBudWxsICYmIG1hcE51bGwgPT09IHRydWUgPyB2YWx1ZXMuZmlsdGVyKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICByZXR1cm4gdiAhPT0gbnVsbDsKICAgICAgICB9KSA6IHZhbHVlczsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbDsKICAgIH0pOwogICAgdmFyIGlubmVyRmllbGRQcm9wcyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGFjYyA9IHt9OwogICAgICBmaWVsZFByb3BzTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICB2YXIgdmFsID0gcHJvcHNba2V5XTsKCiAgICAgICAgaWYgKHZhbCAhPT0gdm9pZCAwKSB7CiAgICAgICAgICBhY2Nba2V5XSA9IHZhbDsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gYWNjOwogICAgfSk7CiAgICB2YXIgaXNPcHRpb25zRGFyayA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHByb3BzLm9wdGlvbnNEYXJrID09PSBudWxsID8gc3RhdGUuaXNEYXJrLnZhbHVlIDogcHJvcHMub3B0aW9uc0Rhcms7CiAgICB9KTsKICAgIHZhciBoYXNWYWx1ZSA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGZpZWxkVmFsdWVJc0ZpbGxlZChpbm5lclZhbHVlLnZhbHVlKTsKICAgIH0pOwogICAgdmFyIGNvbXB1dGVkSW5wdXRDbGFzcyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGNscyA9ICdxLWZpZWxkX19pbnB1dCBxLXBsYWNlaG9sZGVyIGNvbCc7CgogICAgICBpZiAocHJvcHMuaGlkZVNlbGVjdGVkID09PSB0cnVlIHx8IGlubmVyVmFsdWUudmFsdWUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIFtjbHMsIHByb3BzLmlucHV0Q2xhc3NdOwogICAgICB9CgogICAgICBjbHMgKz0gJyBxLWZpZWxkX19pbnB1dC0tcGFkZGluZyc7CiAgICAgIHJldHVybiBwcm9wcy5pbnB1dENsYXNzID09PSB2b2lkIDAgPyBjbHMgOiBbY2xzLCBwcm9wcy5pbnB1dENsYXNzXTsKICAgIH0pOwogICAgdmFyIG1lbnVDb250ZW50Q2xhc3MgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAocHJvcHMudmlydHVhbFNjcm9sbEhvcml6b250YWwgPT09IHRydWUgPyAncS12aXJ0dWFsLXNjcm9sbC0taG9yaXpvbnRhbCcgOiAnJykgKyAocHJvcHMucG9wdXBDb250ZW50Q2xhc3MgPyAnICcgKyBwcm9wcy5wb3B1cENvbnRlbnRDbGFzcyA6ICcnKTsKICAgIH0pOwogICAgdmFyIG5vT3B0aW9ucyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHZpcnR1YWxTY3JvbGxMZW5ndGgudmFsdWUgPT09IDA7CiAgICB9KTsKICAgIHZhciBzZWxlY3RlZFN0cmluZyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGlubmVyVmFsdWUudmFsdWUubWFwKGZ1bmN0aW9uIChvcHQpIHsKICAgICAgICByZXR1cm4gX2dldE9wdGlvbkxhYmVsLnZhbHVlKG9wdCk7CiAgICAgIH0pLmpvaW4oJywgJyk7CiAgICB9KTsKICAgIHZhciBuZWVkc0h0bWxGbiA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHByb3BzLm9wdGlvbnNIdG1sID09PSB0cnVlID8gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IDogZnVuY3Rpb24gKG9wdCkgewogICAgICAgIHJldHVybiBvcHQgIT09IHZvaWQgMCAmJiBvcHQgIT09IG51bGwgJiYgb3B0Lmh0bWwgPT09IHRydWU7CiAgICAgIH07CiAgICB9KTsKICAgIHZhciB2YWx1ZUFzSHRtbCA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHByb3BzLmRpc3BsYXlWYWx1ZUh0bWwgPT09IHRydWUgfHwgcHJvcHMuZGlzcGxheVZhbHVlID09PSB2b2lkIDAgJiYgKHByb3BzLm9wdGlvbnNIdG1sID09PSB0cnVlIHx8IGlubmVyVmFsdWUudmFsdWUuc29tZShuZWVkc0h0bWxGbi52YWx1ZSkpOwogICAgfSk7CiAgICB2YXIgdGFiaW5kZXggPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdGF0ZS5mb2N1c2VkLnZhbHVlID09PSB0cnVlID8gcHJvcHMudGFiaW5kZXggOiAtMTsKICAgIH0pOwogICAgdmFyIGNvbWJvYm94QXR0cnMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdGFiaW5kZXg6IHByb3BzLnRhYmluZGV4LAogICAgICAgIHJvbGU6ICdjb21ib2JveCcsCiAgICAgICAgJ2FyaWEtbGFiZWwnOiBwcm9wcy5sYWJlbCwKICAgICAgICAnYXJpYS1hdXRvY29tcGxldGUnOiBwcm9wcy51c2VJbnB1dCA9PT0gdHJ1ZSA/ICdsaXN0JyA6ICdub25lJywKICAgICAgICAnYXJpYS1leHBhbmRlZCc6IG1lbnUudmFsdWUgPT09IHRydWUgPyAndHJ1ZScgOiAnZmFsc2UnLAogICAgICAgICdhcmlhLW93bnMnOiAiIi5jb25jYXQoc3RhdGUudGFyZ2V0VWlkLnZhbHVlLCAiX2xiIiksCiAgICAgICAgJ2FyaWEtY29udHJvbHMnOiAiIi5jb25jYXQoc3RhdGUudGFyZ2V0VWlkLnZhbHVlLCAiX2xiIikKICAgICAgfTsKICAgIH0pOwogICAgdmFyIGxpc3Rib3hBdHRycyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGF0dHJzID0gewogICAgICAgIGlkOiAiIi5jb25jYXQoc3RhdGUudGFyZ2V0VWlkLnZhbHVlLCAiX2xiIiksCiAgICAgICAgcm9sZTogJ2xpc3Rib3gnLAogICAgICAgICdhcmlhLW11bHRpc2VsZWN0YWJsZSc6IHByb3BzLm11bHRpcGxlID09PSB0cnVlID8gJ3RydWUnIDogJ2ZhbHNlJwogICAgICB9OwoKICAgICAgaWYgKG9wdGlvbkluZGV4LnZhbHVlID49IDApIHsKICAgICAgICBhdHRyc1snYXJpYS1hY3RpdmVkZXNjZW5kYW50J10gPSAiIi5jb25jYXQoc3RhdGUudGFyZ2V0VWlkLnZhbHVlLCAiXyIpLmNvbmNhdChvcHRpb25JbmRleC52YWx1ZSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBhdHRyczsKICAgIH0pOwogICAgdmFyIHNlbGVjdGVkU2NvcGUgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBpbm5lclZhbHVlLnZhbHVlLm1hcChmdW5jdGlvbiAob3B0LCBpKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGluZGV4OiBpLAogICAgICAgICAgb3B0OiBvcHQsCiAgICAgICAgICBodG1sOiBuZWVkc0h0bWxGbi52YWx1ZShvcHQpLAogICAgICAgICAgc2VsZWN0ZWQ6IHRydWUsCiAgICAgICAgICByZW1vdmVBdEluZGV4OiByZW1vdmVBdEluZGV4QW5kRm9jdXMsCiAgICAgICAgICB0b2dnbGVPcHRpb246IHRvZ2dsZU9wdGlvbiwKICAgICAgICAgIHRhYmluZGV4OiB0YWJpbmRleC52YWx1ZQogICAgICAgIH07CiAgICAgIH0pOwogICAgfSk7CiAgICB2YXIgb3B0aW9uU2NvcGUgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh2aXJ0dWFsU2Nyb2xsTGVuZ3RoLnZhbHVlID09PSAwKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CgogICAgICB2YXIgX3ZpcnR1YWxTY3JvbGxTbGljZVJhID0gdmlydHVhbFNjcm9sbFNsaWNlUmFuZ2UudmFsdWUsCiAgICAgICAgICBmcm9tID0gX3ZpcnR1YWxTY3JvbGxTbGljZVJhLmZyb20sCiAgICAgICAgICB0byA9IF92aXJ0dWFsU2Nyb2xsU2xpY2VSYS50bzsKICAgICAgcmV0dXJuIHByb3BzLm9wdGlvbnMuc2xpY2UoZnJvbSwgdG8pLm1hcChmdW5jdGlvbiAob3B0LCBpKSB7CiAgICAgICAgdmFyIGRpc2FibGUgPSBfaXNPcHRpb25EaXNhYmxlZC52YWx1ZShvcHQpID09PSB0cnVlOwogICAgICAgIHZhciBpbmRleCA9IGZyb20gKyBpOwogICAgICAgIHZhciBpdGVtUHJvcHMgPSB7CiAgICAgICAgICBjbGlja2FibGU6IHRydWUsCiAgICAgICAgICBhY3RpdmU6IGZhbHNlLAogICAgICAgICAgYWN0aXZlQ2xhc3M6IGNvbXB1dGVkT3B0aW9uc1NlbGVjdGVkQ2xhc3MudmFsdWUsCiAgICAgICAgICBtYW51YWxGb2N1czogdHJ1ZSwKICAgICAgICAgIGZvY3VzZWQ6IGZhbHNlLAogICAgICAgICAgZGlzYWJsZTogZGlzYWJsZSwKICAgICAgICAgIHRhYmluZGV4OiAtMSwKICAgICAgICAgIGRlbnNlOiBwcm9wcy5vcHRpb25zRGVuc2UsCiAgICAgICAgICBkYXJrOiBpc09wdGlvbnNEYXJrLnZhbHVlLAogICAgICAgICAgcm9sZTogJ29wdGlvbicsCiAgICAgICAgICBpZDogIiIuY29uY2F0KHN0YXRlLnRhcmdldFVpZC52YWx1ZSwgIl8iKS5jb25jYXQoaW5kZXgpLAogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgdG9nZ2xlT3B0aW9uKG9wdCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgaWYgKGRpc2FibGUgIT09IHRydWUpIHsKICAgICAgICAgIGlzT3B0aW9uU2VsZWN0ZWQob3B0KSA9PT0gdHJ1ZSAmJiAoaXRlbVByb3BzLmFjdGl2ZSA9IHRydWUpOwogICAgICAgICAgb3B0aW9uSW5kZXgudmFsdWUgPT09IGluZGV4ICYmIChpdGVtUHJvcHMuZm9jdXNlZCA9IHRydWUpOwogICAgICAgICAgaXRlbVByb3BzWydhcmlhLXNlbGVjdGVkJ10gPSBpdGVtUHJvcHMuYWN0aXZlID09PSB0cnVlID8gJ3RydWUnIDogJ2ZhbHNlJzsKCiAgICAgICAgICBpZiAoJHEucGxhdGZvcm0uaXMuZGVza3RvcCA9PT0gdHJ1ZSkgewogICAgICAgICAgICBpdGVtUHJvcHMub25Nb3VzZW1vdmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgc2V0T3B0aW9uSW5kZXgoaW5kZXgpOwogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGluZGV4OiBpbmRleCwKICAgICAgICAgIG9wdDogb3B0LAogICAgICAgICAgaHRtbDogbmVlZHNIdG1sRm4udmFsdWUob3B0KSwKICAgICAgICAgIGxhYmVsOiBfZ2V0T3B0aW9uTGFiZWwudmFsdWUob3B0KSwKICAgICAgICAgIHNlbGVjdGVkOiBpdGVtUHJvcHMuYWN0aXZlLAogICAgICAgICAgZm9jdXNlZDogaXRlbVByb3BzLmZvY3VzZWQsCiAgICAgICAgICB0b2dnbGVPcHRpb246IHRvZ2dsZU9wdGlvbiwKICAgICAgICAgIHNldE9wdGlvbkluZGV4OiBzZXRPcHRpb25JbmRleCwKICAgICAgICAgIGl0ZW1Qcm9wczogaXRlbVByb3BzCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9KTsKICAgIHZhciBkcm9wZG93bkFycm93SWNvbiA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHByb3BzLmRyb3Bkb3duSWNvbiAhPT0gdm9pZCAwID8gcHJvcHMuZHJvcGRvd25JY29uIDogJHEuaWNvblNldC5hcnJvdy5kcm9wZG93bjsKICAgIH0pOwogICAgdmFyIHNxdWFyZWRNZW51ID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gcHJvcHMub3B0aW9uc0NvdmVyID09PSBmYWxzZSAmJiBwcm9wcy5vdXRsaW5lZCAhPT0gdHJ1ZSAmJiBwcm9wcy5zdGFuZG91dCAhPT0gdHJ1ZSAmJiBwcm9wcy5ib3JkZXJsZXNzICE9PSB0cnVlICYmIHByb3BzLnJvdW5kZWQgIT09IHRydWU7CiAgICB9KTsKICAgIHZhciBjb21wdXRlZE9wdGlvbnNTZWxlY3RlZENsYXNzID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gcHJvcHMub3B0aW9uc1NlbGVjdGVkQ2xhc3MgIT09IHZvaWQgMCA/IHByb3BzLm9wdGlvbnNTZWxlY3RlZENsYXNzIDogcHJvcHMuY29sb3IgIT09IHZvaWQgMCA/ICJ0ZXh0LSIuY29uY2F0KHByb3BzLmNvbG9yKSA6ICcnOwogICAgfSk7IC8vIHJldHVybnMgbWV0aG9kIHRvIGdldCB2YWx1ZSBvZiBhbiBvcHRpb247CiAgICAvLyB0YWtlcyBpbnRvIGFjY291bnQgJ29wdGlvbi12YWx1ZScgcHJvcAoKICAgIHZhciBfZ2V0T3B0aW9uVmFsdWUgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBnZXRQcm9wVmFsdWVGbihwcm9wcy5vcHRpb25WYWx1ZSwgJ3ZhbHVlJyk7CiAgICB9KTsgLy8gcmV0dXJucyBtZXRob2QgdG8gZ2V0IGxhYmVsIG9mIGFuIG9wdGlvbjsKICAgIC8vIHRha2VzIGludG8gYWNjb3VudCAnb3B0aW9uLWxhYmVsJyBwcm9wCgoKICAgIHZhciBfZ2V0T3B0aW9uTGFiZWwgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBnZXRQcm9wVmFsdWVGbihwcm9wcy5vcHRpb25MYWJlbCwgJ2xhYmVsJyk7CiAgICB9KTsgLy8gcmV0dXJucyBtZXRob2QgdG8gdGVsbCBpZiBhbiBvcHRpb24gaXMgZGlzYWJsZWQ7CiAgICAvLyB0YWtlcyBpbnRvIGFjY291bnQgJ29wdGlvbi1kaXNhYmxlJyBwcm9wCgoKICAgIHZhciBfaXNPcHRpb25EaXNhYmxlZCA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGdldFByb3BWYWx1ZUZuKHByb3BzLm9wdGlvbkRpc2FibGUsICdkaXNhYmxlJyk7CiAgICB9KTsKCiAgICB2YXIgaW5uZXJPcHRpb25zVmFsdWUgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBpbm5lclZhbHVlLnZhbHVlLm1hcChmdW5jdGlvbiAob3B0KSB7CiAgICAgICAgcmV0dXJuIF9nZXRPcHRpb25WYWx1ZS52YWx1ZShvcHQpOwogICAgICB9KTsKICAgIH0pOwogICAgdmFyIGlucHV0Q29udHJvbEV2ZW50cyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGV2dCA9IHsKICAgICAgICBvbklucHV0OiBvbklucHV0LAogICAgICAgIC8vIFNhZmFyaSA8IDEwLjIgJiBVSVdlYlZpZXcgZG9lc24ndCBmaXJlIGNvbXBvc2l0aW9uZW5kIHdoZW4KICAgICAgICAvLyBzd2l0Y2hpbmcgZm9jdXMgYmVmb3JlIGNvbmZpcm1pbmcgY29tcG9zaXRpb24gY2hvaWNlCiAgICAgICAgLy8gdGhpcyBhbHNvIGZpeGVzIHRoZSBpc3N1ZSB3aGVyZSBzb21lIGJyb3dzZXJzIGUuZy4gaU9TIENocm9tZQogICAgICAgIC8vIGZpcmVzICJjaGFuZ2UiIGluc3RlYWQgb2YgImlucHV0IiBvbiBhdXRvY29tcGxldGUuCiAgICAgICAgb25DaGFuZ2U6IG9uQ29tcG9zaXRpb24sCiAgICAgICAgb25LZXlkb3duOiBvblRhcmdldEtleWRvd24sCiAgICAgICAgb25LZXl1cDogb25UYXJnZXRBdXRvY29tcGxldGUsCiAgICAgICAgb25LZXlwcmVzczogb25UYXJnZXRLZXlwcmVzcywKICAgICAgICBvbkZvY3VzOiBzZWxlY3RJbnB1dFRleHQsCiAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7CiAgICAgICAgICBoYXNEaWFsb2cgPT09IHRydWUgJiYgc3RvcChlKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGV2dC5vbkNvbXBvc2l0aW9uc3RhcnQgPSBldnQub25Db21wb3NpdGlvbnVwZGF0ZSA9IGV2dC5vbkNvbXBvc2l0aW9uZW5kID0gb25Db21wb3NpdGlvbjsKICAgICAgcmV0dXJuIGV2dDsKICAgIH0pOwogICAgd2F0Y2goaW5uZXJWYWx1ZSwgZnVuY3Rpb24gKHZhbCkgewogICAgICBpbm5lclZhbHVlQ2FjaGUgPSB2YWw7CgogICAgICBpZiAocHJvcHMudXNlSW5wdXQgPT09IHRydWUgJiYgcHJvcHMuZmlsbElucHV0ID09PSB0cnVlICYmIHByb3BzLm11bHRpcGxlICE9PSB0cnVlIC8vIFByZXZlbnQgcmUtZW50ZXJpbmcgaW4gZmlsdGVyIHdoaWxlIGZpbHRlcmluZwogICAgICAvLyBBbHNvIHByZXZlbnQgY2xlYXJpbmcgaW5wdXRWYWx1ZSB3aGlsZSBmaWx0ZXJpbmcKICAgICAgJiYgc3RhdGUuaW5uZXJMb2FkaW5nLnZhbHVlICE9PSB0cnVlICYmIChkaWFsb2cudmFsdWUgIT09IHRydWUgJiYgbWVudS52YWx1ZSAhPT0gdHJ1ZSB8fCBoYXNWYWx1ZS52YWx1ZSAhPT0gdHJ1ZSkpIHsKICAgICAgICB1c2VySW5wdXRWYWx1ZSAhPT0gdHJ1ZSAmJiByZXNldElucHV0VmFsdWUoKTsKCiAgICAgICAgaWYgKGRpYWxvZy52YWx1ZSA9PT0gdHJ1ZSB8fCBtZW51LnZhbHVlID09PSB0cnVlKSB7CiAgICAgICAgICBmaWx0ZXIoJycpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgewogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0pOwogICAgd2F0Y2goZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gcHJvcHMuZmlsbElucHV0OwogICAgfSwgcmVzZXRJbnB1dFZhbHVlKTsKICAgIHdhdGNoKG1lbnUsIHVwZGF0ZU1lbnUpOwoKICAgIGZ1bmN0aW9uIGdldEVtaXR0aW5nT3B0aW9uVmFsdWUob3B0KSB7CiAgICAgIHJldHVybiBwcm9wcy5lbWl0VmFsdWUgPT09IHRydWUgPyBfZ2V0T3B0aW9uVmFsdWUudmFsdWUob3B0KSA6IG9wdDsKICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmVBdEluZGV4KGluZGV4KSB7CiAgICAgIGlmIChpbmRleCA+IC0xICYmIGluZGV4IDwgaW5uZXJWYWx1ZS52YWx1ZS5sZW5ndGgpIHsKICAgICAgICBpZiAocHJvcHMubXVsdGlwbGUgPT09IHRydWUpIHsKICAgICAgICAgIHZhciBtb2RlbCA9IHByb3BzLm1vZGVsVmFsdWUuc2xpY2UoKTsKICAgICAgICAgIGVtaXQoJ3JlbW92ZScsIHsKICAgICAgICAgICAgaW5kZXg6IGluZGV4LAogICAgICAgICAgICB2YWx1ZTogbW9kZWwuc3BsaWNlKGluZGV4LCAxKVswXQogICAgICAgICAgfSk7CiAgICAgICAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIG1vZGVsKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCBudWxsKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmVBdEluZGV4QW5kRm9jdXMoaW5kZXgpIHsKICAgICAgcmVtb3ZlQXRJbmRleChpbmRleCk7CiAgICAgIHN0YXRlLmZvY3VzKCk7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkKG9wdCwgdW5pcXVlKSB7CiAgICAgIHZhciB2YWwgPSBnZXRFbWl0dGluZ09wdGlvblZhbHVlKG9wdCk7CgogICAgICBpZiAocHJvcHMubXVsdGlwbGUgIT09IHRydWUpIHsKICAgICAgICBwcm9wcy5maWxsSW5wdXQgPT09IHRydWUgJiYgdXBkYXRlSW5wdXRWYWx1ZShfZ2V0T3B0aW9uTGFiZWwudmFsdWUob3B0KSwgdHJ1ZSwgdHJ1ZSk7CiAgICAgICAgZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCB2YWwpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGlubmVyVmFsdWUudmFsdWUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgZW1pdCgnYWRkJywgewogICAgICAgICAgaW5kZXg6IDAsCiAgICAgICAgICB2YWx1ZTogdmFsCiAgICAgICAgfSk7CiAgICAgICAgZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCBwcm9wcy5tdWx0aXBsZSA9PT0gdHJ1ZSA/IFt2YWxdIDogdmFsKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh1bmlxdWUgPT09IHRydWUgJiYgaXNPcHRpb25TZWxlY3RlZChvcHQpID09PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAocHJvcHMubWF4VmFsdWVzICE9PSB2b2lkIDAgJiYgcHJvcHMubW9kZWxWYWx1ZS5sZW5ndGggPj0gcHJvcHMubWF4VmFsdWVzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgbW9kZWwgPSBwcm9wcy5tb2RlbFZhbHVlLnNsaWNlKCk7CiAgICAgIGVtaXQoJ2FkZCcsIHsKICAgICAgICBpbmRleDogbW9kZWwubGVuZ3RoLAogICAgICAgIHZhbHVlOiB2YWwKICAgICAgfSk7CiAgICAgIG1vZGVsLnB1c2godmFsKTsKICAgICAgZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCBtb2RlbCk7CiAgICB9CgogICAgZnVuY3Rpb24gdG9nZ2xlT3B0aW9uKG9wdCwga2VlcE9wZW4pIHsKICAgICAgaWYgKHN0YXRlLmVkaXRhYmxlLnZhbHVlICE9PSB0cnVlIHx8IG9wdCA9PT0gdm9pZCAwIHx8IF9pc09wdGlvbkRpc2FibGVkLnZhbHVlKG9wdCkgPT09IHRydWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBvcHRWYWx1ZSA9IF9nZXRPcHRpb25WYWx1ZS52YWx1ZShvcHQpOwoKICAgICAgaWYgKHByb3BzLm11bHRpcGxlICE9PSB0cnVlKSB7CiAgICAgICAgaWYgKGtlZXBPcGVuICE9PSB0cnVlKSB7CiAgICAgICAgICB1cGRhdGVJbnB1dFZhbHVlKHByb3BzLmZpbGxJbnB1dCA9PT0gdHJ1ZSA/IF9nZXRPcHRpb25MYWJlbC52YWx1ZShvcHQpIDogJycsIHRydWUsIHRydWUpOwogICAgICAgICAgaGlkZVBvcHVwKCk7CiAgICAgICAgfQoKICAgICAgICB0YXJnZXRSZWYudmFsdWUgIT09IG51bGwgJiYgdGFyZ2V0UmVmLnZhbHVlLmZvY3VzKCk7CgogICAgICAgIGlmIChpbm5lclZhbHVlLnZhbHVlLmxlbmd0aCA9PT0gMCB8fCBpc0RlZXBFcXVhbChfZ2V0T3B0aW9uVmFsdWUudmFsdWUoaW5uZXJWYWx1ZS52YWx1ZVswXSksIG9wdFZhbHVlKSAhPT0gdHJ1ZSkgewogICAgICAgICAgZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCBwcm9wcy5lbWl0VmFsdWUgPT09IHRydWUgPyBvcHRWYWx1ZSA6IG9wdCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIChoYXNEaWFsb2cgIT09IHRydWUgfHwgZGlhbG9nRmllbGRGb2N1c2VkLnZhbHVlID09PSB0cnVlKSAmJiBzdGF0ZS5mb2N1cygpOwogICAgICBzZWxlY3RJbnB1dFRleHQoKTsKCiAgICAgIGlmIChpbm5lclZhbHVlLnZhbHVlLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHZhciB2YWwgPSBwcm9wcy5lbWl0VmFsdWUgPT09IHRydWUgPyBvcHRWYWx1ZSA6IG9wdDsKICAgICAgICBlbWl0KCdhZGQnLCB7CiAgICAgICAgICBpbmRleDogMCwKICAgICAgICAgIHZhbHVlOiB2YWwKICAgICAgICB9KTsKICAgICAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIHByb3BzLm11bHRpcGxlID09PSB0cnVlID8gW3ZhbF0gOiB2YWwpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIG1vZGVsID0gcHJvcHMubW9kZWxWYWx1ZS5zbGljZSgpLAogICAgICAgICAgaW5kZXggPSBpbm5lck9wdGlvbnNWYWx1ZS52YWx1ZS5maW5kSW5kZXgoZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gaXNEZWVwRXF1YWwodiwgb3B0VmFsdWUpOwogICAgICB9KTsKCiAgICAgIGlmIChpbmRleCA+IC0xKSB7CiAgICAgICAgZW1pdCgncmVtb3ZlJywgewogICAgICAgICAgaW5kZXg6IGluZGV4LAogICAgICAgICAgdmFsdWU6IG1vZGVsLnNwbGljZShpbmRleCwgMSlbMF0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAocHJvcHMubWF4VmFsdWVzICE9PSB2b2lkIDAgJiYgbW9kZWwubGVuZ3RoID49IHByb3BzLm1heFZhbHVlcykgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIF92YWwgPSBwcm9wcy5lbWl0VmFsdWUgPT09IHRydWUgPyBvcHRWYWx1ZSA6IG9wdDsKCiAgICAgICAgZW1pdCgnYWRkJywgewogICAgICAgICAgaW5kZXg6IG1vZGVsLmxlbmd0aCwKICAgICAgICAgIHZhbHVlOiBfdmFsCiAgICAgICAgfSk7CiAgICAgICAgbW9kZWwucHVzaChfdmFsKTsKICAgICAgfQoKICAgICAgZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCBtb2RlbCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0T3B0aW9uSW5kZXgoaW5kZXgpIHsKICAgICAgaWYgKCRxLnBsYXRmb3JtLmlzLmRlc2t0b3AgIT09IHRydWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciB2YWwgPSBpbmRleCA+IC0xICYmIGluZGV4IDwgdmlydHVhbFNjcm9sbExlbmd0aC52YWx1ZSA/IGluZGV4IDogLTE7CgogICAgICBpZiAob3B0aW9uSW5kZXgudmFsdWUgIT09IHZhbCkgewogICAgICAgIG9wdGlvbkluZGV4LnZhbHVlID0gdmFsOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gbW92ZU9wdGlvblNlbGVjdGlvbigpIHsKICAgICAgdmFyIG9mZnNldCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMTsKICAgICAgdmFyIHNraXBJbnB1dFZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7CgogICAgICBpZiAobWVudS52YWx1ZSA9PT0gdHJ1ZSkgewogICAgICAgIHZhciBpbmRleCA9IG9wdGlvbkluZGV4LnZhbHVlOwoKICAgICAgICBkbyB7CiAgICAgICAgICBpbmRleCA9IG5vcm1hbGl6ZVRvSW50ZXJ2YWwoaW5kZXggKyBvZmZzZXQsIC0xLCB2aXJ0dWFsU2Nyb2xsTGVuZ3RoLnZhbHVlIC0gMSk7CiAgICAgICAgfSB3aGlsZSAoaW5kZXggIT09IC0xICYmIGluZGV4ICE9PSBvcHRpb25JbmRleC52YWx1ZSAmJiBfaXNPcHRpb25EaXNhYmxlZC52YWx1ZShwcm9wcy5vcHRpb25zW2luZGV4XSkgPT09IHRydWUpOwoKICAgICAgICBpZiAob3B0aW9uSW5kZXgudmFsdWUgIT09IGluZGV4KSB7CiAgICAgICAgICBzZXRPcHRpb25JbmRleChpbmRleCk7CiAgICAgICAgICBzY3JvbGxUbyhpbmRleCk7CgogICAgICAgICAgaWYgKHNraXBJbnB1dFZhbHVlICE9PSB0cnVlICYmIHByb3BzLnVzZUlucHV0ID09PSB0cnVlICYmIHByb3BzLmZpbGxJbnB1dCA9PT0gdHJ1ZSkgewogICAgICAgICAgICBzZXRJbnB1dFZhbHVlKGluZGV4ID49IDAgPyBfZ2V0T3B0aW9uTGFiZWwudmFsdWUocHJvcHMub3B0aW9uc1tpbmRleF0pIDogZGVmYXVsdElucHV0VmFsdWUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGdldE9wdGlvbih2YWx1ZSwgdmFsdWVDYWNoZSkgewogICAgICB2YXIgZm4gPSBmdW5jdGlvbiBmbihvcHQpIHsKICAgICAgICByZXR1cm4gaXNEZWVwRXF1YWwoX2dldE9wdGlvblZhbHVlLnZhbHVlKG9wdCksIHZhbHVlKTsKICAgICAgfTsKCiAgICAgIHJldHVybiBwcm9wcy5vcHRpb25zLmZpbmQoZm4pIHx8IHZhbHVlQ2FjaGUuZmluZChmbikgfHwgdmFsdWU7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UHJvcFZhbHVlRm4ocHJvcFZhbHVlLCBkZWZhdWx0VmFsKSB7CiAgICAgIHZhciB2YWwgPSBwcm9wVmFsdWUgIT09IHZvaWQgMCA/IHByb3BWYWx1ZSA6IGRlZmF1bHRWYWw7CiAgICAgIHJldHVybiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nID8gdmFsIDogZnVuY3Rpb24gKG9wdCkgewogICAgICAgIHJldHVybiBPYmplY3Qob3B0KSA9PT0gb3B0ICYmIHZhbCBpbiBvcHQgPyBvcHRbdmFsXSA6IG9wdDsKICAgICAgfTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc09wdGlvblNlbGVjdGVkKG9wdCkgewogICAgICB2YXIgdmFsID0gX2dldE9wdGlvblZhbHVlLnZhbHVlKG9wdCk7CgogICAgICByZXR1cm4gaW5uZXJPcHRpb25zVmFsdWUudmFsdWUuZmluZChmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiBpc0RlZXBFcXVhbCh2LCB2YWwpOwogICAgICB9KSAhPT0gdm9pZCAwOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlbGVjdElucHV0VGV4dCgpIHsKICAgICAgaWYgKHByb3BzLnVzZUlucHV0ID09PSB0cnVlICYmIHRhcmdldFJlZi52YWx1ZSAhPT0gbnVsbCkgewogICAgICAgIHRhcmdldFJlZi52YWx1ZS5zZWxlY3QoKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIG9uVGFyZ2V0S2V5dXAoZSkgewogICAgICAvLyBpZiBFU0MgYW5kIHdlIGhhdmUgYW4gb3BlbmVkIG1lbnUKICAgICAgLy8gdGhlbiBzdG9wIHByb3BhZ2F0aW9uIChtaWdodCBiZSBjYXVnaHQgYnkgYSBRRGlhbG9nCiAgICAgIC8vIGFuZCBzbyBpdCB3aWxsIGFsc28gY2xvc2UgdGhlIFFEaWFsb2csIHdoaWNoIGlzIHdyb25nKQogICAgICBpZiAoaXNLZXlDb2RlKGUsIDI3KSA9PT0gdHJ1ZSAmJiBtZW51LnZhbHVlID09PSB0cnVlKSB7CiAgICAgICAgc3RvcChlKTsgLy8gb24gRVNDIHdlIG5lZWQgdG8gY2xvc2UgdGhlIGRpYWxvZyBhbHNvCgogICAgICAgIGhpZGVQb3B1cCgpOwogICAgICAgIHJlc2V0SW5wdXRWYWx1ZSgpOwogICAgICB9CgogICAgICBlbWl0KCdrZXl1cCcsIGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIG9uVGFyZ2V0QXV0b2NvbXBsZXRlKGUpIHsKICAgICAgdmFyIHZhbHVlID0gZS50YXJnZXQudmFsdWU7CgogICAgICBpZiAoZS5rZXlDb2RlICE9PSB2b2lkIDApIHsKICAgICAgICBvblRhcmdldEtleXVwKGUpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZS50YXJnZXQudmFsdWUgPSAnJzsKICAgICAgY2xlYXJUaW1lb3V0KGlucHV0VGltZXIpOwogICAgICByZXNldElucHV0VmFsdWUoKTsKCiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLmxlbmd0aCA+IDApIHsKICAgICAgICB2YXIgbmVlZGxlID0gdmFsdWUudG9Mb2NhbGVMb3dlckNhc2UoKTsKCiAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gZm4ob3B0KSB7CiAgICAgICAgICByZXR1cm4gX2dldE9wdGlvblZhbHVlLnZhbHVlKG9wdCkudG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmVlZGxlOwogICAgICAgIH07CgogICAgICAgIHZhciBvcHRpb24gPSBwcm9wcy5vcHRpb25zLmZpbmQoZm4pOwoKICAgICAgICBpZiAob3B0aW9uICE9PSB2b2lkIDApIHsKICAgICAgICAgIGlmIChpbm5lclZhbHVlLnZhbHVlLmluZGV4T2Yob3B0aW9uKSA9PT0gLTEpIHsKICAgICAgICAgICAgdG9nZ2xlT3B0aW9uKG9wdGlvbik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBoaWRlUG9wdXAoKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgZm4gPSBmdW5jdGlvbiBmbihvcHQpIHsKICAgICAgICAgICAgcmV0dXJuIF9nZXRPcHRpb25MYWJlbC52YWx1ZShvcHQpLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5lZWRsZTsKICAgICAgICAgIH07CgogICAgICAgICAgb3B0aW9uID0gcHJvcHMub3B0aW9ucy5maW5kKGZuKTsKCiAgICAgICAgICBpZiAob3B0aW9uICE9PSB2b2lkIDApIHsKICAgICAgICAgICAgaWYgKGlubmVyVmFsdWUudmFsdWUuaW5kZXhPZihvcHRpb24pID09PSAtMSkgewogICAgICAgICAgICAgIHRvZ2dsZU9wdGlvbihvcHRpb24pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGhpZGVQb3B1cCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmaWx0ZXIodmFsdWUsIHRydWUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBzdGF0ZS5jbGVhclZhbHVlKGUpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gb25UYXJnZXRLZXlwcmVzcyhlKSB7CiAgICAgIGVtaXQoJ2tleXByZXNzJywgZSk7CiAgICB9CgogICAgZnVuY3Rpb24gb25UYXJnZXRLZXlkb3duKGUpIHsKICAgICAgZW1pdCgna2V5ZG93bicsIGUpOwoKICAgICAgaWYgKHNob3VsZElnbm9yZUtleShlKSA9PT0gdHJ1ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIG5ld1ZhbHVlTW9kZVZhbGlkID0gaW5wdXRWYWx1ZS52YWx1ZS5sZW5ndGggPiAwICYmIChwcm9wcy5uZXdWYWx1ZU1vZGUgIT09IHZvaWQgMCB8fCBwcm9wcy5vbk5ld1ZhbHVlICE9PSB2b2lkIDApOwogICAgICB2YXIgdGFiU2hvdWxkU2VsZWN0ID0gZS5zaGlmdEtleSAhPT0gdHJ1ZSAmJiBwcm9wcy5tdWx0aXBsZSAhPT0gdHJ1ZSAmJiAob3B0aW9uSW5kZXgudmFsdWUgPiAtMSB8fCBuZXdWYWx1ZU1vZGVWYWxpZCA9PT0gdHJ1ZSk7IC8vIGVzY2FwZQoKICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHsKICAgICAgICBwcmV2ZW50KGUpOyAvLyBwcmV2ZW50IGNsZWFyaW5nIHRoZSBpbnB1dFZhbHVlCgogICAgICAgIHJldHVybjsKICAgICAgfSAvLyB0YWIKCgogICAgICBpZiAoZS5rZXlDb2RlID09PSA5ICYmIHRhYlNob3VsZFNlbGVjdCA9PT0gZmFsc2UpIHsKICAgICAgICBjbG9zZU1lbnUoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChlLnRhcmdldCA9PT0gdm9pZCAwIHx8IGUudGFyZ2V0LmlkICE9PSBzdGF0ZS50YXJnZXRVaWQudmFsdWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gZG93bgoKCiAgICAgIGlmIChlLmtleUNvZGUgPT09IDQwICYmIHN0YXRlLmlubmVyTG9hZGluZy52YWx1ZSAhPT0gdHJ1ZSAmJiBtZW51LnZhbHVlID09PSBmYWxzZSkgewogICAgICAgIHN0b3BBbmRQcmV2ZW50KGUpOwogICAgICAgIHNob3dQb3B1cCgpOwogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBiYWNrc3BhY2UKCgogICAgICBpZiAoZS5rZXlDb2RlID09PSA4ICYmIHByb3BzLmhpZGVTZWxlY3RlZCAhPT0gdHJ1ZSAmJiBpbnB1dFZhbHVlLnZhbHVlLmxlbmd0aCA9PT0gMCkgewogICAgICAgIGlmIChwcm9wcy5tdWx0aXBsZSA9PT0gdHJ1ZSAmJiBBcnJheS5pc0FycmF5KHByb3BzLm1vZGVsVmFsdWUpID09PSB0cnVlKSB7CiAgICAgICAgICByZW1vdmVBdEluZGV4KHByb3BzLm1vZGVsVmFsdWUubGVuZ3RoIC0gMSk7CiAgICAgICAgfSBlbHNlIGlmIChwcm9wcy5tdWx0aXBsZSAhPT0gdHJ1ZSAmJiBwcm9wcy5tb2RlbFZhbHVlICE9PSBudWxsKSB7CiAgICAgICAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIG51bGwpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIGhvbWUsIGVuZCAtIDM2LCAzNQoKCiAgICAgIGlmICgoZS5rZXlDb2RlID09PSAzNSB8fCBlLmtleUNvZGUgPT09IDM2KSAmJiAodHlwZW9mIGlucHV0VmFsdWUudmFsdWUgIT09ICdzdHJpbmcnIHx8IGlucHV0VmFsdWUudmFsdWUubGVuZ3RoID09PSAwKSkgewogICAgICAgIHN0b3BBbmRQcmV2ZW50KGUpOwogICAgICAgIG9wdGlvbkluZGV4LnZhbHVlID0gLTE7CiAgICAgICAgbW92ZU9wdGlvblNlbGVjdGlvbihlLmtleUNvZGUgPT09IDM2ID8gMSA6IC0xLCBwcm9wcy5tdWx0aXBsZSk7CiAgICAgIH0gLy8gcGcgdXAsIHBnIGRvd24gLSAzMywgMzQKCgogICAgICBpZiAoKGUua2V5Q29kZSA9PT0gMzMgfHwgZS5rZXlDb2RlID09PSAzNCkgJiYgdmlydHVhbFNjcm9sbFNsaWNlU2l6ZUNvbXB1dGVkLnZhbHVlICE9PSB2b2lkIDApIHsKICAgICAgICBzdG9wQW5kUHJldmVudChlKTsKICAgICAgICBvcHRpb25JbmRleC52YWx1ZSA9IE1hdGgubWF4KC0xLCBNYXRoLm1pbih2aXJ0dWFsU2Nyb2xsTGVuZ3RoLnZhbHVlLCBvcHRpb25JbmRleC52YWx1ZSArIChlLmtleUNvZGUgPT09IDMzID8gLTEgOiAxKSAqIHZpcnR1YWxTY3JvbGxTbGljZVNpemVDb21wdXRlZC52YWx1ZS52aWV3KSk7CiAgICAgICAgbW92ZU9wdGlvblNlbGVjdGlvbihlLmtleUNvZGUgPT09IDMzID8gMSA6IC0xLCBwcm9wcy5tdWx0aXBsZSk7CiAgICAgIH0gLy8gdXAsIGRvd24KCgogICAgICBpZiAoZS5rZXlDb2RlID09PSAzOCB8fCBlLmtleUNvZGUgPT09IDQwKSB7CiAgICAgICAgc3RvcEFuZFByZXZlbnQoZSk7CiAgICAgICAgbW92ZU9wdGlvblNlbGVjdGlvbihlLmtleUNvZGUgPT09IDM4ID8gLTEgOiAxLCBwcm9wcy5tdWx0aXBsZSk7CiAgICAgIH0KCiAgICAgIHZhciBvcHRpb25zTGVuZ3RoID0gdmlydHVhbFNjcm9sbExlbmd0aC52YWx1ZTsgLy8gY2xlYXIgc2VhcmNoIGJ1ZmZlciBpZiBleHBpcmVkCgogICAgICBpZiAoc2VhcmNoQnVmZmVyID09PSB2b2lkIDAgfHwgc2VhcmNoQnVmZmVyRXhwIDwgRGF0ZS5ub3coKSkgewogICAgICAgIHNlYXJjaEJ1ZmZlciA9ICcnOwogICAgICB9IC8vIGtleWJvYXJkIHNlYXJjaCB3aGVuIG5vdCBoYXZpbmcgdXNlLWlucHV0CgoKICAgICAgaWYgKG9wdGlvbnNMZW5ndGggPiAwICYmIHByb3BzLnVzZUlucHV0ICE9PSB0cnVlICYmIGUua2V5ICE9PSB2b2lkIDAgJiYgZS5rZXkubGVuZ3RoID09PSAxIC8vIHByaW50YWJsZSBjaGFyCiAgICAgICYmIGUuYWx0S2V5ID09PSBlLmN0cmxLZXkgLy8gbm90IGtiZCBzaG9ydGN1dAogICAgICAmJiAoZS5rZXlDb2RlICE9PSAzMiB8fCBzZWFyY2hCdWZmZXIubGVuZ3RoID4gMCkgLy8gc3BhY2UgaW4gbWlkZGxlIG9mIHNlYXJjaAogICAgICApIHsKICAgICAgICBtZW51LnZhbHVlICE9PSB0cnVlICYmIHNob3dQb3B1cChlKTsKICAgICAgICB2YXIgY2hhciA9IGUua2V5LnRvTG9jYWxlTG93ZXJDYXNlKCksCiAgICAgICAgICAgIGtleVJlcGVhdCA9IHNlYXJjaEJ1ZmZlci5sZW5ndGggPT09IDEgJiYgc2VhcmNoQnVmZmVyWzBdID09PSBjaGFyOwogICAgICAgIHNlYXJjaEJ1ZmZlckV4cCA9IERhdGUubm93KCkgKyAxNTAwOwoKICAgICAgICBpZiAoa2V5UmVwZWF0ID09PSBmYWxzZSkgewogICAgICAgICAgc3RvcEFuZFByZXZlbnQoZSk7CiAgICAgICAgICBzZWFyY2hCdWZmZXIgKz0gY2hhcjsKICAgICAgICB9CgogICAgICAgIHZhciBzZWFyY2hSZSA9IG5ldyBSZWdFeHAoJ14nICsgc2VhcmNoQnVmZmVyLnNwbGl0KCcnKS5tYXAoZnVuY3Rpb24gKGwpIHsKICAgICAgICAgIHJldHVybiByZUVzY2FwZUxpc3QuaW5kZXhPZihsKSA+IC0xID8gJ1xcJyArIGwgOiBsOwogICAgICAgIH0pLmpvaW4oJy4qJyksICdpJyk7CiAgICAgICAgdmFyIGluZGV4ID0gb3B0aW9uSW5kZXgudmFsdWU7CgogICAgICAgIGlmIChrZXlSZXBlYXQgPT09IHRydWUgfHwgaW5kZXggPCAwIHx8IHNlYXJjaFJlLnRlc3QoX2dldE9wdGlvbkxhYmVsLnZhbHVlKHByb3BzLm9wdGlvbnNbaW5kZXhdKSkgIT09IHRydWUpIHsKICAgICAgICAgIGRvIHsKICAgICAgICAgICAgaW5kZXggPSBub3JtYWxpemVUb0ludGVydmFsKGluZGV4ICsgMSwgLTEsIG9wdGlvbnNMZW5ndGggLSAxKTsKICAgICAgICAgIH0gd2hpbGUgKGluZGV4ICE9PSBvcHRpb25JbmRleC52YWx1ZSAmJiAoX2lzT3B0aW9uRGlzYWJsZWQudmFsdWUocHJvcHMub3B0aW9uc1tpbmRleF0pID09PSB0cnVlIHx8IHNlYXJjaFJlLnRlc3QoX2dldE9wdGlvbkxhYmVsLnZhbHVlKHByb3BzLm9wdGlvbnNbaW5kZXhdKSkgIT09IHRydWUpKTsKICAgICAgICB9CgogICAgICAgIGlmIChvcHRpb25JbmRleC52YWx1ZSAhPT0gaW5kZXgpIHsKICAgICAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgc2V0T3B0aW9uSW5kZXgoaW5kZXgpOwogICAgICAgICAgICBzY3JvbGxUbyhpbmRleCk7CgogICAgICAgICAgICBpZiAoaW5kZXggPj0gMCAmJiBwcm9wcy51c2VJbnB1dCA9PT0gdHJ1ZSAmJiBwcm9wcy5maWxsSW5wdXQgPT09IHRydWUpIHsKICAgICAgICAgICAgICBzZXRJbnB1dFZhbHVlKF9nZXRPcHRpb25MYWJlbC52YWx1ZShwcm9wcy5vcHRpb25zW2luZGV4XSkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBlbnRlciwgc3BhY2UgKHdoZW4gbm90IHVzaW5nIHVzZS1pbnB1dCBhbmQgbm90IGluIHNlYXJjaCksIG9yIHRhYiAod2hlbiBub3QgdXNpbmcgbXVsdGlwbGUgYW5kIG9wdGlvbiBzZWxlY3RlZCkKICAgICAgLy8gc2FtZSB0YXJnZXQgaXMgY2hlY2tlZCBhYm92ZQoKCiAgICAgIGlmIChlLmtleUNvZGUgIT09IDEzICYmIChlLmtleUNvZGUgIT09IDMyIHx8IHByb3BzLnVzZUlucHV0ID09PSB0cnVlIHx8IHNlYXJjaEJ1ZmZlciAhPT0gJycpICYmIChlLmtleUNvZGUgIT09IDkgfHwgdGFiU2hvdWxkU2VsZWN0ID09PSBmYWxzZSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGUua2V5Q29kZSAhPT0gOSAmJiBzdG9wQW5kUHJldmVudChlKTsKCiAgICAgIGlmIChvcHRpb25JbmRleC52YWx1ZSA+IC0xICYmIG9wdGlvbkluZGV4LnZhbHVlIDwgb3B0aW9uc0xlbmd0aCkgewogICAgICAgIHRvZ2dsZU9wdGlvbihwcm9wcy5vcHRpb25zW29wdGlvbkluZGV4LnZhbHVlXSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAobmV3VmFsdWVNb2RlVmFsaWQgPT09IHRydWUpIHsKICAgICAgICB2YXIgZG9uZSA9IGZ1bmN0aW9uIGRvbmUodmFsLCBtb2RlKSB7CiAgICAgICAgICBpZiAobW9kZSkgewogICAgICAgICAgICBpZiAodmFsaWRhdGVOZXdWYWx1ZU1vZGUobW9kZSkgIT09IHRydWUpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1vZGUgPSBwcm9wcy5uZXdWYWx1ZU1vZGU7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHZhbCA9PT0gdm9pZCAwIHx8IHZhbCA9PT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgdXBkYXRlSW5wdXRWYWx1ZSgnJywgcHJvcHMubXVsdGlwbGUgIT09IHRydWUsIHRydWUpOwogICAgICAgICAgdmFyIGZuID0gbW9kZSA9PT0gJ3RvZ2dsZScgPyB0b2dnbGVPcHRpb24gOiBhZGQ7CiAgICAgICAgICBmbih2YWwsIG1vZGUgPT09ICdhZGQtdW5pcXVlJyk7CgogICAgICAgICAgaWYgKHByb3BzLm11bHRpcGxlICE9PSB0cnVlKSB7CiAgICAgICAgICAgIHRhcmdldFJlZi52YWx1ZSAhPT0gbnVsbCAmJiB0YXJnZXRSZWYudmFsdWUuZm9jdXMoKTsKICAgICAgICAgICAgaGlkZVBvcHVwKCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgaWYgKHByb3BzLm9uTmV3VmFsdWUgIT09IHZvaWQgMCkgewogICAgICAgICAgZW1pdCgnbmV3LXZhbHVlJywgaW5wdXRWYWx1ZS52YWx1ZSwgZG9uZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRvbmUoaW5wdXRWYWx1ZS52YWx1ZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAocHJvcHMubXVsdGlwbGUgIT09IHRydWUpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChtZW51LnZhbHVlID09PSB0cnVlKSB7CiAgICAgICAgY2xvc2VNZW51KCk7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGUuaW5uZXJMb2FkaW5nLnZhbHVlICE9PSB0cnVlKSB7CiAgICAgICAgc2hvd1BvcHVwKCk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZXRWaXJ0dWFsU2Nyb2xsRWwoKSB7CiAgICAgIHJldHVybiBoYXNEaWFsb2cgPT09IHRydWUgPyBtZW51Q29udGVudFJlZi52YWx1ZSA6IG1lbnVSZWYudmFsdWUgIT09IG51bGwgJiYgbWVudVJlZi52YWx1ZS5fX3FQb3J0YWxJbm5lclJlZi52YWx1ZSAhPT0gbnVsbCA/IG1lbnVSZWYudmFsdWUuX19xUG9ydGFsSW5uZXJSZWYudmFsdWUgOiB2b2lkIDA7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VmlydHVhbFNjcm9sbFRhcmdldCgpIHsKICAgICAgcmV0dXJuIGdldFZpcnR1YWxTY3JvbGxFbCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFNlbGVjdGlvbigpIHsKICAgICAgaWYgKHByb3BzLmhpZGVTZWxlY3RlZCA9PT0gdHJ1ZSkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQoKICAgICAgaWYgKHNsb3RzWydzZWxlY3RlZC1pdGVtJ10gIT09IHZvaWQgMCkgewogICAgICAgIHJldHVybiBzZWxlY3RlZFNjb3BlLnZhbHVlLm1hcChmdW5jdGlvbiAoc2NvcGUpIHsKICAgICAgICAgIHJldHVybiBzbG90c1snc2VsZWN0ZWQtaXRlbSddKHNjb3BlKTsKICAgICAgICB9KS5zbGljZSgpOwogICAgICB9CgogICAgICBpZiAoc2xvdHMuc2VsZWN0ZWQgIT09IHZvaWQgMCkgewogICAgICAgIHJldHVybiBbXS5jb25jYXQoc2xvdHMuc2VsZWN0ZWQoKSk7CiAgICAgIH0KCiAgICAgIGlmIChwcm9wcy51c2VDaGlwcyA9PT0gdHJ1ZSkgewogICAgICAgIHJldHVybiBzZWxlY3RlZFNjb3BlLnZhbHVlLm1hcChmdW5jdGlvbiAoc2NvcGUsIGkpIHsKICAgICAgICAgIHJldHVybiBoKFFDaGlwLCB7CiAgICAgICAgICAgIGtleTogJ29wdGlvbi0nICsgaSwKICAgICAgICAgICAgcmVtb3ZhYmxlOiBzdGF0ZS5lZGl0YWJsZS52YWx1ZSA9PT0gdHJ1ZSAmJiBfaXNPcHRpb25EaXNhYmxlZC52YWx1ZShzY29wZS5vcHQpICE9PSB0cnVlLAogICAgICAgICAgICBkZW5zZTogdHJ1ZSwKICAgICAgICAgICAgdGV4dENvbG9yOiBwcm9wcy5jb2xvciwKICAgICAgICAgICAgdGFiaW5kZXg6IHRhYmluZGV4LnZhbHVlLAogICAgICAgICAgICBvblJlbW92ZTogZnVuY3Rpb24gb25SZW1vdmUoKSB7CiAgICAgICAgICAgICAgc2NvcGUucmVtb3ZlQXRJbmRleChpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gaCgnc3BhbicsIF9kZWZpbmVQcm9wZXJ0eSh7CiAgICAgICAgICAgICAgY2xhc3M6ICdlbGxpcHNpcycKICAgICAgICAgICAgfSwgc2NvcGUuaHRtbCA9PT0gdHJ1ZSA/ICdpbm5lckhUTUwnIDogJ3RleHRDb250ZW50JywgX2dldE9wdGlvbkxhYmVsLnZhbHVlKHNjb3BlLm9wdCkpKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gW2goJ3NwYW4nLCBfZGVmaW5lUHJvcGVydHkoe30sIHZhbHVlQXNIdG1sLnZhbHVlID09PSB0cnVlID8gJ2lubmVySFRNTCcgOiAndGV4dENvbnRlbnQnLCBwcm9wcy5kaXNwbGF5VmFsdWUgIT09IHZvaWQgMCA/IHByb3BzLmRpc3BsYXlWYWx1ZSA6IHNlbGVjdGVkU3RyaW5nLnZhbHVlKSldOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEFsbE9wdGlvbnMoKSB7CiAgICAgIGlmIChub09wdGlvbnMudmFsdWUgPT09IHRydWUpIHsKICAgICAgICByZXR1cm4gc2xvdHNbJ25vLW9wdGlvbiddICE9PSB2b2lkIDAgPyBzbG90c1snbm8tb3B0aW9uJ10oewogICAgICAgICAgaW5wdXRWYWx1ZTogaW5wdXRWYWx1ZS52YWx1ZQogICAgICAgIH0pIDogdm9pZCAwOwogICAgICB9CgogICAgICB2YXIgZm4gPSBzbG90cy5vcHRpb24gIT09IHZvaWQgMCA/IHNsb3RzLm9wdGlvbiA6IGZ1bmN0aW9uIChzY29wZSkgewogICAgICAgIHJldHVybiBoKFFJdGVtLCBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgIGtleTogc2NvcGUuaW5kZXgKICAgICAgICB9LCBzY29wZS5pdGVtUHJvcHMpLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gaChRSXRlbVNlY3Rpb24sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGgoUUl0ZW1MYWJlbCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBoKCdzcGFuJywgX2RlZmluZVByb3BlcnR5KHt9LCBzY29wZS5odG1sID09PSB0cnVlID8gJ2lubmVySFRNTCcgOiAndGV4dENvbnRlbnQnLCBzY29wZS5sYWJlbCkpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9OwogICAgICB2YXIgb3B0aW9ucyA9IHBhZFZpcnR1YWxTY3JvbGwoJ2RpdicsIG9wdGlvblNjb3BlLnZhbHVlLm1hcChmbikpOwoKICAgICAgaWYgKHNsb3RzWydiZWZvcmUtb3B0aW9ucyddICE9PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0gc2xvdHNbJ2JlZm9yZS1vcHRpb25zJ10oKS5jb25jYXQob3B0aW9ucyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBoTWVyZ2VTbG90KHNsb3RzWydhZnRlci1vcHRpb25zJ10sIG9wdGlvbnMpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldElucHV0KGZyb21EaWFsb2csIGlzVGFyZ2V0KSB7CiAgICAgIHZhciBkYXRhID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoewogICAgICAgIHJlZjogaXNUYXJnZXQgPT09IHRydWUgPyB0YXJnZXRSZWYgOiB2b2lkIDAsCiAgICAgICAga2V5OiAnaV90JywKICAgICAgICBjbGFzczogY29tcHV0ZWRJbnB1dENsYXNzLnZhbHVlLAogICAgICAgIHN0eWxlOiBwcm9wcy5pbnB1dFN0eWxlLAogICAgICAgIHZhbHVlOiBpbnB1dFZhbHVlLnZhbHVlICE9PSB2b2lkIDAgPyBpbnB1dFZhbHVlLnZhbHVlIDogJycsCiAgICAgICAgLy8gcmVxdWlyZWQgZm9yIEFuZHJvaWQgaW4gb3JkZXIgdG8gc2hvdyBFTlRFUiBrZXkgd2hlbiBpbiBmb3JtCiAgICAgICAgdHlwZTogJ3NlYXJjaCcKICAgICAgfSwgY29tYm9ib3hBdHRycy52YWx1ZSksIHN0YXRlLnNwbGl0QXR0cnMuYXR0cmlidXRlcy52YWx1ZSksIHt9LCB7CiAgICAgICAgaWQ6IHN0YXRlLnRhcmdldFVpZC52YWx1ZSwKICAgICAgICBtYXhsZW5ndGg6IHByb3BzLm1heGxlbmd0aCwKICAgICAgICBhdXRvY29tcGxldGU6IHByb3BzLmF1dG9jb21wbGV0ZSwKICAgICAgICAnZGF0YS1hdXRvZm9jdXMnOiBmcm9tRGlhbG9nICE9PSB0cnVlICYmIHByb3BzLmF1dG9mb2N1cyA9PT0gdHJ1ZSB8fCB2b2lkIDAsCiAgICAgICAgZGlzYWJsZWQ6IHByb3BzLmRpc2FibGUgPT09IHRydWUsCiAgICAgICAgcmVhZG9ubHk6IHByb3BzLnJlYWRvbmx5ID09PSB0cnVlCiAgICAgIH0sIGlucHV0Q29udHJvbEV2ZW50cy52YWx1ZSk7CgogICAgICBpZiAoZnJvbURpYWxvZyAhPT0gdHJ1ZSAmJiBoYXNEaWFsb2cgPT09IHRydWUpIHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhLmNsYXNzKSA9PT0gdHJ1ZSkgewogICAgICAgICAgZGF0YS5jbGFzc1swXSArPSAnIG5vLXBvaW50ZXItZXZlbnRzJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGF0YS5jbGFzcyArPSAnIG5vLXBvaW50ZXItZXZlbnRzJzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBoKCdpbnB1dCcsIGRhdGEpOwogICAgfQoKICAgIGZ1bmN0aW9uIG9uSW5wdXQoZSkgewogICAgICBjbGVhclRpbWVvdXQoaW5wdXRUaW1lcik7CgogICAgICBpZiAoZSAmJiBlLnRhcmdldCAmJiBlLnRhcmdldC5jb21wb3NpbmcgPT09IHRydWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHNldElucHV0VmFsdWUoZS50YXJnZXQudmFsdWUgfHwgJycpOyAvLyBtYXJrIGl0IGhlcmUgYXMgdXNlciBpbnB1dCBzbyB0aGF0IGlmIHVwZGF0ZUlucHV0VmFsdWUgaXMgY2FsbGVkCiAgICAgIC8vIGJlZm9yZSBmaWx0ZXIgaXMgY2FsbGVkIHRoZSBpbmRpY2F0b3IgaXMgcmVzZXQKCiAgICAgIHVzZXJJbnB1dFZhbHVlID0gdHJ1ZTsKICAgICAgZGVmYXVsdElucHV0VmFsdWUgPSBpbnB1dFZhbHVlLnZhbHVlOwoKICAgICAgaWYgKHN0YXRlLmZvY3VzZWQudmFsdWUgIT09IHRydWUgJiYgKGhhc0RpYWxvZyAhPT0gdHJ1ZSB8fCBkaWFsb2dGaWVsZEZvY3VzZWQudmFsdWUgPT09IHRydWUpKSB7CiAgICAgICAgc3RhdGUuZm9jdXMoKTsKICAgICAgfQoKICAgICAgaWYgKHByb3BzLm9uRmlsdGVyICE9PSB2b2lkIDApIHsKICAgICAgICBpbnB1dFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBmaWx0ZXIoaW5wdXRWYWx1ZS52YWx1ZSk7CiAgICAgICAgfSwgcHJvcHMuaW5wdXREZWJvdW5jZSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZXRJbnB1dFZhbHVlKHZhbCkgewogICAgICBpZiAoaW5wdXRWYWx1ZS52YWx1ZSAhPT0gdmFsKSB7CiAgICAgICAgaW5wdXRWYWx1ZS52YWx1ZSA9IHZhbDsKICAgICAgICBlbWl0KCdpbnB1dC12YWx1ZScsIHZhbCk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVJbnB1dFZhbHVlKHZhbCwgbm9GaWx0ZXJpbmcsIGludGVybmFsKSB7CiAgICAgIHVzZXJJbnB1dFZhbHVlID0gaW50ZXJuYWwgIT09IHRydWU7CgogICAgICBpZiAocHJvcHMudXNlSW5wdXQgPT09IHRydWUpIHsKICAgICAgICBzZXRJbnB1dFZhbHVlKHZhbCk7CgogICAgICAgIGlmIChub0ZpbHRlcmluZyA9PT0gdHJ1ZSB8fCBpbnRlcm5hbCAhPT0gdHJ1ZSkgewogICAgICAgICAgZGVmYXVsdElucHV0VmFsdWUgPSB2YWw7CiAgICAgICAgfQoKICAgICAgICBub0ZpbHRlcmluZyAhPT0gdHJ1ZSAmJiBmaWx0ZXIodmFsKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGZpbHRlcih2YWwsIGtlZXBDbG9zZWQpIHsKICAgICAgaWYgKHByb3BzLm9uRmlsdGVyID09PSB2b2lkIDAgfHwga2VlcENsb3NlZCAhPT0gdHJ1ZSAmJiBzdGF0ZS5mb2N1c2VkLnZhbHVlICE9PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoc3RhdGUuaW5uZXJMb2FkaW5nLnZhbHVlID09PSB0cnVlKSB7CiAgICAgICAgZW1pdCgnZmlsdGVyLWFib3J0Jyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdGUuaW5uZXJMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICBpbm5lckxvYWRpbmdJbmRpY2F0b3IudmFsdWUgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAodmFsICE9PSAnJyAmJiBwcm9wcy5tdWx0aXBsZSAhPT0gdHJ1ZSAmJiBpbm5lclZhbHVlLnZhbHVlLmxlbmd0aCA+IDAgJiYgdXNlcklucHV0VmFsdWUgIT09IHRydWUgJiYgdmFsID09PSBfZ2V0T3B0aW9uTGFiZWwudmFsdWUoaW5uZXJWYWx1ZS52YWx1ZVswXSkpIHsKICAgICAgICB2YWwgPSAnJzsKICAgICAgfQoKICAgICAgdmFyIGxvY2FsRmlsdGVySWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBtZW51LnZhbHVlID09PSB0cnVlICYmIChtZW51LnZhbHVlID0gZmFsc2UpOwogICAgICB9LCAxMCk7CiAgICAgIGNsZWFyVGltZW91dChmaWx0ZXJJZCk7CiAgICAgIGZpbHRlcklkID0gbG9jYWxGaWx0ZXJJZDsKICAgICAgZW1pdCgnZmlsdGVyJywgdmFsLCBmdW5jdGlvbiAoZm4sIGFmdGVyRm4pIHsKICAgICAgICBpZiAoKGtlZXBDbG9zZWQgPT09IHRydWUgfHwgc3RhdGUuZm9jdXNlZC52YWx1ZSA9PT0gdHJ1ZSkgJiYgZmlsdGVySWQgPT09IGxvY2FsRmlsdGVySWQpIHsKICAgICAgICAgIGNsZWFyVGltZW91dChmaWx0ZXJJZCk7CiAgICAgICAgICB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicgJiYgZm4oKTsgLy8gaGlkZSBpbmRpY2F0b3IgdG8gYWxsb3cgYXJyb3cgdG8gYW5pbWF0ZQoKICAgICAgICAgIGlubmVyTG9hZGluZ0luZGljYXRvci52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICBzdGF0ZS5pbm5lckxvYWRpbmcudmFsdWUgPSBmYWxzZTsKCiAgICAgICAgICAgIGlmIChzdGF0ZS5lZGl0YWJsZS52YWx1ZSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIGlmIChrZWVwQ2xvc2VkID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICBtZW51LnZhbHVlID09PSB0cnVlICYmIGhpZGVQb3B1cCgpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAobWVudS52YWx1ZSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgdXBkYXRlTWVudSh0cnVlKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbWVudS52YWx1ZSA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICB0eXBlb2YgYWZ0ZXJGbiA9PT0gJ2Z1bmN0aW9uJyAmJiBuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgYWZ0ZXJGbihwcm94eSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHN0YXRlLmZvY3VzZWQudmFsdWUgPT09IHRydWUgJiYgZmlsdGVySWQgPT09IGxvY2FsRmlsdGVySWQpIHsKICAgICAgICAgIGNsZWFyVGltZW91dChmaWx0ZXJJZCk7CiAgICAgICAgICBzdGF0ZS5pbm5lckxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgIGlubmVyTG9hZGluZ0luZGljYXRvci52YWx1ZSA9IGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgbWVudS52YWx1ZSA9PT0gdHJ1ZSAmJiAobWVudS52YWx1ZSA9IGZhbHNlKTsKICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TWVudSgpIHsKICAgICAgcmV0dXJuIGgoUU1lbnUsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7CiAgICAgICAgcmVmOiBtZW51UmVmLAogICAgICAgIGNsYXNzOiBtZW51Q29udGVudENsYXNzLnZhbHVlLAogICAgICAgIHN0eWxlOiBwcm9wcy5wb3B1cENvbnRlbnRTdHlsZSwKICAgICAgICBtb2RlbFZhbHVlOiBtZW51LnZhbHVlLAogICAgICAgIGZpdDogcHJvcHMubWVudVNocmluayAhPT0gdHJ1ZSwKICAgICAgICBjb3ZlcjogcHJvcHMub3B0aW9uc0NvdmVyID09PSB0cnVlICYmIG5vT3B0aW9ucy52YWx1ZSAhPT0gdHJ1ZSAmJiBwcm9wcy51c2VJbnB1dCAhPT0gdHJ1ZSwKICAgICAgICBhbmNob3I6IHByb3BzLm1lbnVBbmNob3IsCiAgICAgICAgc2VsZjogcHJvcHMubWVudVNlbGYsCiAgICAgICAgb2Zmc2V0OiBwcm9wcy5tZW51T2Zmc2V0LAogICAgICAgIGRhcms6IGlzT3B0aW9uc0RhcmsudmFsdWUsCiAgICAgICAgbm9QYXJlbnRFdmVudDogdHJ1ZSwKICAgICAgICBub1JlZm9jdXM6IHRydWUsCiAgICAgICAgbm9Gb2N1czogdHJ1ZSwKICAgICAgICBzcXVhcmU6IHNxdWFyZWRNZW51LnZhbHVlLAogICAgICAgIHRyYW5zaXRpb25TaG93OiBwcm9wcy50cmFuc2l0aW9uU2hvdywKICAgICAgICB0cmFuc2l0aW9uSGlkZTogcHJvcHMudHJhbnNpdGlvbkhpZGUsCiAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiBwcm9wcy50cmFuc2l0aW9uRHVyYXRpb24sCiAgICAgICAgc2VwYXJhdGVDbG9zZVBvcHVwOiB0cnVlCiAgICAgIH0sIGxpc3Rib3hBdHRycy52YWx1ZSksIHt9LCB7CiAgICAgICAgb25TY3JvbGxQYXNzaXZlOiBvblZpcnR1YWxTY3JvbGxFdnQsCiAgICAgICAgb25CZWZvcmVTaG93OiBvbkNvbnRyb2xQb3B1cFNob3csCiAgICAgICAgb25CZWZvcmVIaWRlOiBvbk1lbnVCZWZvcmVIaWRlLAogICAgICAgIG9uU2hvdzogb25NZW51U2hvdwogICAgICB9KSwgZ2V0QWxsT3B0aW9ucyk7CiAgICB9CgogICAgZnVuY3Rpb24gb25NZW51QmVmb3JlSGlkZShlKSB7CiAgICAgIG9uQ29udHJvbFBvcHVwSGlkZShlKTsKICAgICAgY2xvc2VNZW51KCk7CiAgICB9CgogICAgZnVuY3Rpb24gb25NZW51U2hvdygpIHsKICAgICAgc2V0VmlydHVhbFNjcm9sbFNpemUoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvbkRpYWxvZ0ZpZWxkRm9jdXMoZSkgewogICAgICBzdG9wKGUpOwogICAgICB0YXJnZXRSZWYudmFsdWUgIT09IG51bGwgJiYgdGFyZ2V0UmVmLnZhbHVlLmZvY3VzKCk7CiAgICAgIGRpYWxvZ0ZpZWxkRm9jdXNlZC52YWx1ZSA9IHRydWU7CiAgICAgIHdpbmRvdy5zY3JvbGxUbyh3aW5kb3cucGFnZVhPZmZzZXQgfHwgd2luZG93LnNjcm9sbFggfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0IHx8IDAsIDApOwogICAgfQoKICAgIGZ1bmN0aW9uIG9uRGlhbG9nRmllbGRCbHVyKGUpIHsKICAgICAgc3RvcChlKTsKICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIGRpYWxvZ0ZpZWxkRm9jdXNlZC52YWx1ZSA9IGZhbHNlOwogICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXREaWFsb2coKSB7CiAgICAgIHZhciBjb250ZW50ID0gW2goUUZpZWxkLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7CiAgICAgICAgY2xhc3M6ICJjb2wtYXV0byAiLmNvbmNhdChzdGF0ZS5maWVsZENsYXNzLnZhbHVlKQogICAgICB9LCBpbm5lckZpZWxkUHJvcHMudmFsdWUpLCB7fSwgewogICAgICAgIGZvcjogc3RhdGUudGFyZ2V0VWlkLnZhbHVlLAogICAgICAgIGRhcms6IGlzT3B0aW9uc0RhcmsudmFsdWUsCiAgICAgICAgc3F1YXJlOiB0cnVlLAogICAgICAgIGxvYWRpbmc6IGlubmVyTG9hZGluZ0luZGljYXRvci52YWx1ZSwKICAgICAgICBpdGVtQWxpZ25lZDogZmFsc2UsCiAgICAgICAgZmlsbGVkOiB0cnVlLAogICAgICAgIHN0YWNrTGFiZWw6IGlucHV0VmFsdWUudmFsdWUubGVuZ3RoID4gMAogICAgICB9LCBzdGF0ZS5zcGxpdEF0dHJzLmxpc3RlbmVycy52YWx1ZSksIHt9LCB7CiAgICAgICAgb25Gb2N1czogb25EaWFsb2dGaWVsZEZvY3VzLAogICAgICAgIG9uQmx1cjogb25EaWFsb2dGaWVsZEJsdXIKICAgICAgfSksIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc2xvdHMpLCB7fSwgewogICAgICAgIHJhd0NvbnRyb2w6IGZ1bmN0aW9uIHJhd0NvbnRyb2woKSB7CiAgICAgICAgICByZXR1cm4gc3RhdGUuZ2V0Q29udHJvbCh0cnVlKTsKICAgICAgICB9LAogICAgICAgIGJlZm9yZTogdm9pZCAwLAogICAgICAgIGFmdGVyOiB2b2lkIDAKICAgICAgfSkpXTsKICAgICAgbWVudS52YWx1ZSA9PT0gdHJ1ZSAmJiBjb250ZW50LnB1c2goaCgnZGl2JywgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHsKICAgICAgICByZWY6IG1lbnVDb250ZW50UmVmLAogICAgICAgIGNsYXNzOiBtZW51Q29udGVudENsYXNzLnZhbHVlICsgJyBzY3JvbGwnLAogICAgICAgIHN0eWxlOiBwcm9wcy5wb3B1cENvbnRlbnRTdHlsZQogICAgICB9LCBsaXN0Ym94QXR0cnMudmFsdWUpLCB7fSwgewogICAgICAgIG9uQ2xpY2s6IHByZXZlbnQsCiAgICAgICAgb25TY3JvbGxQYXNzaXZlOiBvblZpcnR1YWxTY3JvbGxFdnQKICAgICAgfSksIGdldEFsbE9wdGlvbnMoKSkpOwogICAgICByZXR1cm4gaChRRGlhbG9nLCB7CiAgICAgICAgcmVmOiBkaWFsb2dSZWYsCiAgICAgICAgbW9kZWxWYWx1ZTogZGlhbG9nLnZhbHVlLAogICAgICAgIHBvc2l0aW9uOiBwcm9wcy51c2VJbnB1dCA9PT0gdHJ1ZSA/ICd0b3AnIDogdm9pZCAwLAogICAgICAgIHRyYW5zaXRpb25TaG93OiB0cmFuc2l0aW9uU2hvd0NvbXB1dGVkLAogICAgICAgIHRyYW5zaXRpb25IaWRlOiBwcm9wcy50cmFuc2l0aW9uSGlkZSwKICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb246IHByb3BzLnRyYW5zaXRpb25EdXJhdGlvbiwKICAgICAgICBvbkJlZm9yZVNob3c6IG9uQ29udHJvbFBvcHVwU2hvdywKICAgICAgICBvbkJlZm9yZUhpZGU6IG9uRGlhbG9nQmVmb3JlSGlkZSwKICAgICAgICBvbkhpZGU6IG9uRGlhbG9nSGlkZSwKICAgICAgICBvblNob3c6IG9uRGlhbG9nU2hvdwogICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGgoJ2RpdicsIHsKICAgICAgICAgIGNsYXNzOiAncS1zZWxlY3RfX2RpYWxvZycgKyAoaXNPcHRpb25zRGFyay52YWx1ZSA9PT0gdHJ1ZSA/ICcgcS1zZWxlY3RfX2RpYWxvZy0tZGFyayBxLWRhcmsnIDogJycpICsgKGRpYWxvZ0ZpZWxkRm9jdXNlZC52YWx1ZSA9PT0gdHJ1ZSA/ICcgcS1zZWxlY3RfX2RpYWxvZy0tZm9jdXNlZCcgOiAnJykKICAgICAgICB9LCBjb250ZW50KTsKICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gb25EaWFsb2dCZWZvcmVIaWRlKGUpIHsKICAgICAgb25Db250cm9sUG9wdXBIaWRlKGUpOwoKICAgICAgaWYgKGRpYWxvZ1JlZi52YWx1ZSAhPT0gbnVsbCkgewogICAgICAgIGRpYWxvZ1JlZi52YWx1ZS5fX3VwZGF0ZVJlZm9jdXNUYXJnZXQoc3RhdGUucm9vdFJlZi52YWx1ZS5xdWVyeVNlbGVjdG9yKCcucS1maWVsZF9fbmF0aXZlID4gW3RhYmluZGV4XTpsYXN0LWNoaWxkJykpOwogICAgICB9CgogICAgICBzdGF0ZS5mb2N1c2VkLnZhbHVlID0gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gb25EaWFsb2dIaWRlKGUpIHsKICAgICAgaGlkZVBvcHVwKCk7CiAgICAgIHN0YXRlLmZvY3VzZWQudmFsdWUgPT09IGZhbHNlICYmIGVtaXQoJ2JsdXInLCBlKTsKICAgICAgcmVzZXRJbnB1dFZhbHVlKCk7CiAgICB9CgogICAgZnVuY3Rpb24gb25EaWFsb2dTaG93KCkgewogICAgICB2YXIgZWwgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50OwoKICAgICAgaWYgKChlbCA9PT0gbnVsbCB8fCBlbC5pZCAhPT0gc3RhdGUudGFyZ2V0VWlkLnZhbHVlKSAmJiB0YXJnZXRSZWYudmFsdWUgIT09IG51bGwgJiYgdGFyZ2V0UmVmLnZhbHVlICE9PSBlbCkgewogICAgICAgIHRhcmdldFJlZi52YWx1ZS5mb2N1cygpOwogICAgICB9CgogICAgICBzZXRWaXJ0dWFsU2Nyb2xsU2l6ZSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsb3NlTWVudSgpIHsKICAgICAgaWYgKGRpYWxvZy52YWx1ZSA9PT0gdHJ1ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgb3B0aW9uSW5kZXgudmFsdWUgPSAtMTsKCiAgICAgIGlmIChtZW51LnZhbHVlID09PSB0cnVlKSB7CiAgICAgICAgbWVudS52YWx1ZSA9IGZhbHNlOwogICAgICB9CgogICAgICBpZiAoc3RhdGUuZm9jdXNlZC52YWx1ZSA9PT0gZmFsc2UpIHsKICAgICAgICBjbGVhclRpbWVvdXQoZmlsdGVySWQpOwogICAgICAgIGZpbHRlcklkID0gdm9pZCAwOwoKICAgICAgICBpZiAoc3RhdGUuaW5uZXJMb2FkaW5nLnZhbHVlID09PSB0cnVlKSB7CiAgICAgICAgICBlbWl0KCdmaWx0ZXItYWJvcnQnKTsKICAgICAgICAgIHN0YXRlLmlubmVyTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgaW5uZXJMb2FkaW5nSW5kaWNhdG9yLnZhbHVlID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2hvd1BvcHVwKGUpIHsKICAgICAgaWYgKHN0YXRlLmVkaXRhYmxlLnZhbHVlICE9PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoaGFzRGlhbG9nID09PSB0cnVlKSB7CiAgICAgICAgc3RhdGUub25Db250cm9sRm9jdXNpbihlKTsKICAgICAgICBkaWFsb2cudmFsdWUgPSB0cnVlOwogICAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHN0YXRlLmZvY3VzKCk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdGUuZm9jdXMoKTsKICAgICAgfQoKICAgICAgaWYgKHByb3BzLm9uRmlsdGVyICE9PSB2b2lkIDApIHsKICAgICAgICBmaWx0ZXIoaW5wdXRWYWx1ZS52YWx1ZSk7CiAgICAgIH0gZWxzZSBpZiAobm9PcHRpb25zLnZhbHVlICE9PSB0cnVlIHx8IHNsb3RzWyduby1vcHRpb24nXSAhPT0gdm9pZCAwKSB7CiAgICAgICAgbWVudS52YWx1ZSA9IHRydWU7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBoaWRlUG9wdXAoKSB7CiAgICAgIGRpYWxvZy52YWx1ZSA9IGZhbHNlOwogICAgICBjbG9zZU1lbnUoKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZXNldElucHV0VmFsdWUoKSB7CiAgICAgIHByb3BzLnVzZUlucHV0ID09PSB0cnVlICYmIHVwZGF0ZUlucHV0VmFsdWUocHJvcHMubXVsdGlwbGUgIT09IHRydWUgJiYgcHJvcHMuZmlsbElucHV0ID09PSB0cnVlICYmIGlubmVyVmFsdWUudmFsdWUubGVuZ3RoID4gMCA/IF9nZXRPcHRpb25MYWJlbC52YWx1ZShpbm5lclZhbHVlLnZhbHVlWzBdKSB8fCAnJyA6ICcnLCB0cnVlLCB0cnVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVNZW51KHNob3cpIHsKICAgICAgdmFyIG9wdGlvbkluZGV4ID0gLTE7CgogICAgICBpZiAoc2hvdyA9PT0gdHJ1ZSkgewogICAgICAgIGlmIChpbm5lclZhbHVlLnZhbHVlLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHZhciB2YWwgPSBfZ2V0T3B0aW9uVmFsdWUudmFsdWUoaW5uZXJWYWx1ZS52YWx1ZVswXSk7CgogICAgICAgICAgb3B0aW9uSW5kZXggPSBwcm9wcy5vcHRpb25zLmZpbmRJbmRleChmdW5jdGlvbiAodikgewogICAgICAgICAgICByZXR1cm4gaXNEZWVwRXF1YWwoX2dldE9wdGlvblZhbHVlLnZhbHVlKHYpLCB2YWwpOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBsb2NhbFJlc2V0VmlydHVhbFNjcm9sbChvcHRpb25JbmRleCk7CiAgICAgIH0KCiAgICAgIHNldE9wdGlvbkluZGV4KG9wdGlvbkluZGV4KTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVNZW51UG9zaXRpb24oKSB7CiAgICAgIGlmIChkaWFsb2cudmFsdWUgPT09IGZhbHNlICYmIG1lbnVSZWYudmFsdWUgIT09IG51bGwpIHsKICAgICAgICBtZW51UmVmLnZhbHVlLnVwZGF0ZVBvc2l0aW9uKCk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBvbkNvbnRyb2xQb3B1cFNob3coZSkgewogICAgICBlICE9PSB2b2lkIDAgJiYgc3RvcChlKTsKICAgICAgZW1pdCgncG9wdXAtc2hvdycsIGUpOwogICAgICBzdGF0ZS5oYXNQb3B1cE9wZW4gPSB0cnVlOwogICAgICBzdGF0ZS5vbkNvbnRyb2xGb2N1c2luKGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIG9uQ29udHJvbFBvcHVwSGlkZShlKSB7CiAgICAgIGUgIT09IHZvaWQgMCAmJiBzdG9wKGUpOwogICAgICBlbWl0KCdwb3B1cC1oaWRlJywgZSk7CiAgICAgIHN0YXRlLmhhc1BvcHVwT3BlbiA9IGZhbHNlOwogICAgICBzdGF0ZS5vbkNvbnRyb2xGb2N1c291dChlKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVQcmVTdGF0ZSgpIHsKICAgICAgaGFzRGlhbG9nID0gJHEucGxhdGZvcm0uaXMubW9iaWxlICE9PSB0cnVlICYmIHByb3BzLmJlaGF2aW9yICE9PSAnZGlhbG9nJyA/IGZhbHNlIDogcHJvcHMuYmVoYXZpb3IgIT09ICdtZW51JyAmJiAocHJvcHMudXNlSW5wdXQgPT09IHRydWUgPyBzbG90c1snbm8tb3B0aW9uJ10gIT09IHZvaWQgMCB8fCBwcm9wcy5vbkZpbHRlciAhPT0gdm9pZCAwIHx8IG5vT3B0aW9ucy52YWx1ZSA9PT0gZmFsc2UgOiB0cnVlKTsKICAgICAgdHJhbnNpdGlvblNob3dDb21wdXRlZCA9ICRxLnBsYXRmb3JtLmlzLmlvcyA9PT0gdHJ1ZSAmJiBoYXNEaWFsb2cgPT09IHRydWUgJiYgcHJvcHMudXNlSW5wdXQgPT09IHRydWUgPyAnZmFkZScgOiBwcm9wcy50cmFuc2l0aW9uU2hvdzsKICAgIH0KCiAgICBvbkJlZm9yZVVwZGF0ZSh1cGRhdGVQcmVTdGF0ZSk7CiAgICBvblVwZGF0ZWQodXBkYXRlTWVudVBvc2l0aW9uKTsKICAgIHVwZGF0ZVByZVN0YXRlKCk7CiAgICBvbkJlZm9yZVVubW91bnQoZnVuY3Rpb24gKCkgewogICAgICBjbGVhclRpbWVvdXQoaW5wdXRUaW1lcik7CiAgICB9KTsgLy8gZXhwb3NlIHB1YmxpYyBtZXRob2RzCgogICAgT2JqZWN0LmFzc2lnbihwcm94eSwgewogICAgICBzaG93UG9wdXA6IHNob3dQb3B1cCwKICAgICAgaGlkZVBvcHVwOiBoaWRlUG9wdXAsCiAgICAgIHJlbW92ZUF0SW5kZXg6IHJlbW92ZUF0SW5kZXgsCiAgICAgIGFkZDogYWRkLAogICAgICB0b2dnbGVPcHRpb246IHRvZ2dsZU9wdGlvbiwKICAgICAgc2V0T3B0aW9uSW5kZXg6IHNldE9wdGlvbkluZGV4LAogICAgICBtb3ZlT3B0aW9uU2VsZWN0aW9uOiBtb3ZlT3B0aW9uU2VsZWN0aW9uLAogICAgICBmaWx0ZXI6IGZpbHRlciwKICAgICAgdXBkYXRlTWVudVBvc2l0aW9uOiB1cGRhdGVNZW51UG9zaXRpb24sCiAgICAgIHVwZGF0ZUlucHV0VmFsdWU6IHVwZGF0ZUlucHV0VmFsdWUsCiAgICAgIGlzT3B0aW9uU2VsZWN0ZWQ6IGlzT3B0aW9uU2VsZWN0ZWQsCiAgICAgIGdldEVtaXR0aW5nT3B0aW9uVmFsdWU6IGdldEVtaXR0aW5nT3B0aW9uVmFsdWUsCiAgICAgIGlzT3B0aW9uRGlzYWJsZWQ6IGZ1bmN0aW9uIGlzT3B0aW9uRGlzYWJsZWQoKSB7CiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIF9pc09wdGlvbkRpc2FibGVkLnZhbHVlLmFwcGx5KG51bGwsIGFyZ3MpOwogICAgICB9LAogICAgICBnZXRPcHRpb25WYWx1ZTogZnVuY3Rpb24gZ2V0T3B0aW9uVmFsdWUoKSB7CiAgICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7CiAgICAgICAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gX2dldE9wdGlvblZhbHVlLnZhbHVlLmFwcGx5KG51bGwsIGFyZ3MpOwogICAgICB9LAogICAgICBnZXRPcHRpb25MYWJlbDogZnVuY3Rpb24gZ2V0T3B0aW9uTGFiZWwoKSB7CiAgICAgICAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4zKSwgX2tleTMgPSAwOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7CiAgICAgICAgICBhcmdzW19rZXkzXSA9IGFyZ3VtZW50c1tfa2V5M107CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gX2dldE9wdGlvbkxhYmVsLnZhbHVlLmFwcGx5KG51bGwsIGFyZ3MpOwogICAgICB9CiAgICB9KTsKICAgIE9iamVjdC5hc3NpZ24oc3RhdGUsIHsKICAgICAgaW5uZXJWYWx1ZTogaW5uZXJWYWx1ZSwKICAgICAgZmllbGRDbGFzczogY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAicS1zZWxlY3QgcS1maWVsZC0tYXV0by1oZWlnaHQgcS1zZWxlY3QtLXdpdGgiLmNvbmNhdChwcm9wcy51c2VJbnB1dCAhPT0gdHJ1ZSA/ICdvdXQnIDogJycsICItaW5wdXQiKSArICIgcS1zZWxlY3QtLXdpdGgiLmNvbmNhdChwcm9wcy51c2VDaGlwcyAhPT0gdHJ1ZSA/ICdvdXQnIDogJycsICItY2hpcHMiKSArICIgcS1zZWxlY3QtLSIuY29uY2F0KHByb3BzLm11bHRpcGxlID09PSB0cnVlID8gJ211bHRpcGxlJyA6ICdzaW5nbGUnKTsKICAgICAgfSksCiAgICAgIGlucHV0UmVmOiBpbnB1dFJlZiwKICAgICAgdGFyZ2V0UmVmOiB0YXJnZXRSZWYsCiAgICAgIGhhc1ZhbHVlOiBoYXNWYWx1ZSwKICAgICAgc2hvd1BvcHVwOiBzaG93UG9wdXAsCiAgICAgIGZsb2F0aW5nTGFiZWw6IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gKHByb3BzLmhpZGVTZWxlY3RlZCA9PT0gdHJ1ZSA/IGlucHV0VmFsdWUudmFsdWUubGVuZ3RoID4gMCA6IGhhc1ZhbHVlLnZhbHVlID09PSB0cnVlKSB8fCBmaWVsZFZhbHVlSXNGaWxsZWQocHJvcHMuZGlzcGxheVZhbHVlKTsKICAgICAgfSksCiAgICAgIGdldENvbnRyb2xDaGlsZDogZnVuY3Rpb24gZ2V0Q29udHJvbENoaWxkKCkgewogICAgICAgIGlmIChzdGF0ZS5lZGl0YWJsZS52YWx1ZSAhPT0gZmFsc2UgJiYgKGRpYWxvZy52YWx1ZSA9PT0gdHJ1ZSAvLyBkaWFsb2cgYWx3YXlzIGhhcyBtZW51IGRpc3BsYXllZCwgc28gbmVlZCB0byByZW5kZXIgaXQKICAgICAgICB8fCBub09wdGlvbnMudmFsdWUgIT09IHRydWUgfHwgc2xvdHNbJ25vLW9wdGlvbiddICE9PSB2b2lkIDApKSB7CiAgICAgICAgICByZXR1cm4gaGFzRGlhbG9nID09PSB0cnVlID8gZ2V0RGlhbG9nKCkgOiBnZXRNZW51KCk7CiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5oYXNQb3B1cE9wZW4gPT09IHRydWUpIHsKICAgICAgICAgIC8vIGV4cGxpY2l0bHkgc2V0IGl0IG90aGVyd2lzZSBUQUIgd2lsbCBub3QgYmx1ciBjb21wb25lbnQKICAgICAgICAgIHN0YXRlLmhhc1BvcHVwT3BlbiA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgY29udHJvbEV2ZW50czogewogICAgICAgIG9uRm9jdXNpbjogZnVuY3Rpb24gb25Gb2N1c2luKGUpIHsKICAgICAgICAgIHN0YXRlLm9uQ29udHJvbEZvY3VzaW4oZSk7CiAgICAgICAgfSwKICAgICAgICBvbkZvY3Vzb3V0OiBmdW5jdGlvbiBvbkZvY3Vzb3V0KGUpIHsKICAgICAgICAgIHN0YXRlLm9uQ29udHJvbEZvY3Vzb3V0KGUsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmVzZXRJbnB1dFZhbHVlKCk7CiAgICAgICAgICAgIGNsb3NlTWVudSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHsKICAgICAgICAgIC8vIGxhYmVsIGZyb20gUUZpZWxkIHdpbGwgcHJvcGFnYXRlIGNsaWNrIG9uIHRoZSBpbnB1dAogICAgICAgICAgcHJldmVudChlKTsKCiAgICAgICAgICBpZiAoaGFzRGlhbG9nICE9PSB0cnVlICYmIG1lbnUudmFsdWUgPT09IHRydWUpIHsKICAgICAgICAgICAgY2xvc2VNZW51KCk7CiAgICAgICAgICAgIHRhcmdldFJlZi52YWx1ZSAhPT0gbnVsbCAmJiB0YXJnZXRSZWYudmFsdWUuZm9jdXMoKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHNob3dQb3B1cChlKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGdldENvbnRyb2w6IGZ1bmN0aW9uIGdldENvbnRyb2woZnJvbURpYWxvZykgewogICAgICAgIHZhciBjaGlsZCA9IGdldFNlbGVjdGlvbigpOwogICAgICAgIHZhciBpc1RhcmdldCA9IGZyb21EaWFsb2cgPT09IHRydWUgfHwgZGlhbG9nLnZhbHVlICE9PSB0cnVlIHx8IGhhc0RpYWxvZyAhPT0gdHJ1ZTsKCiAgICAgICAgaWYgKHByb3BzLnVzZUlucHV0ID09PSB0cnVlKSB7CiAgICAgICAgICBjaGlsZC5wdXNoKGdldElucHV0KGZyb21EaWFsb2csIGlzVGFyZ2V0KSk7CiAgICAgICAgfSAvLyB0aGVyZSBjYW4gYmUgb25seSBvbmUgKHdoZW4gZGlhbG9nIGlzIG9wZW5lZCB0aGUgY29udHJvbCBpbiBkaWFsb2cgc2hvdWxkIGJlIHRhcmdldCkKICAgICAgICBlbHNlIGlmIChzdGF0ZS5lZGl0YWJsZS52YWx1ZSA9PT0gdHJ1ZSAmJiBpc1RhcmdldCA9PT0gdHJ1ZSkgewogICAgICAgICAgY2hpbGQucHVzaChoKCdkaXYnLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICByZWY6IHRhcmdldFJlZiwKICAgICAgICAgICAga2V5OiAnZF90JywKICAgICAgICAgICAgY2xhc3M6ICduby1vdXRsaW5lJywKICAgICAgICAgICAgaWQ6IHN0YXRlLnRhcmdldFVpZC52YWx1ZQogICAgICAgICAgfSwgY29tYm9ib3hBdHRycy52YWx1ZSksIHt9LCB7CiAgICAgICAgICAgIG9uS2V5ZG93bjogb25UYXJnZXRLZXlkb3duLAogICAgICAgICAgICBvbktleXVwOiBvblRhcmdldEtleXVwLAogICAgICAgICAgICBvbktleXByZXNzOiBvblRhcmdldEtleXByZXNzCiAgICAgICAgICB9KSkpOwoKICAgICAgICAgIGlmICh0eXBlb2YgcHJvcHMuYXV0b2NvbXBsZXRlID09PSAnc3RyaW5nJyAmJiBwcm9wcy5hdXRvY29tcGxldGUubGVuZ3RoID4gMCkgewogICAgICAgICAgICBjaGlsZC5wdXNoKGgoJ2lucHV0JywgewogICAgICAgICAgICAgIGNsYXNzOiAncS1zZWxlY3RfX2F1dG9jb21wbGV0ZS1pbnB1dCBuby1vdXRsaW5lJywKICAgICAgICAgICAgICBhdXRvY29tcGxldGU6IHByb3BzLmF1dG9jb21wbGV0ZSwKICAgICAgICAgICAgICBvbktleXVwOiBvblRhcmdldEF1dG9jb21wbGV0ZQogICAgICAgICAgICB9KSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAobmFtZVByb3AudmFsdWUgIT09IHZvaWQgMCAmJiBwcm9wcy5kaXNhYmxlICE9PSB0cnVlICYmIGlubmVyT3B0aW9uc1ZhbHVlLnZhbHVlLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHZhciBvcHRzID0gaW5uZXJPcHRpb25zVmFsdWUudmFsdWUubWFwKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICByZXR1cm4gaCgnb3B0aW9uJywgewogICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICAgICAgICBzZWxlY3RlZDogdHJ1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgY2hpbGQucHVzaChoKCdzZWxlY3QnLCB7CiAgICAgICAgICAgIGNsYXNzOiAnaGlkZGVuJywKICAgICAgICAgICAgbmFtZTogbmFtZVByb3AudmFsdWUsCiAgICAgICAgICAgIG11bHRpcGxlOiBwcm9wcy5tdWx0aXBsZQogICAgICAgICAgfSwgb3B0cykpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGgoJ2RpdicsIF9vYmplY3RTcHJlYWQoewogICAgICAgICAgY2xhc3M6ICdxLWZpZWxkX19uYXRpdmUgcm93IGl0ZW1zLWNlbnRlcicKICAgICAgICB9LCBzdGF0ZS5zcGxpdEF0dHJzLmF0dHJpYnV0ZXMudmFsdWUpLCBjaGlsZCk7CiAgICAgIH0sCiAgICAgIGdldElubmVyQXBwZW5kOiBmdW5jdGlvbiBnZXRJbm5lckFwcGVuZCgpIHsKICAgICAgICByZXR1cm4gcHJvcHMubG9hZGluZyAhPT0gdHJ1ZSAmJiBpbm5lckxvYWRpbmdJbmRpY2F0b3IudmFsdWUgIT09IHRydWUgJiYgcHJvcHMuaGlkZURyb3Bkb3duSWNvbiAhPT0gdHJ1ZSA/IFtoKFFJY29uLCB7CiAgICAgICAgICBjbGFzczogJ3Etc2VsZWN0X19kcm9wZG93bi1pY29uJyArIChtZW51LnZhbHVlID09PSB0cnVlID8gJyByb3RhdGUtMTgwJyA6ICcnKSwKICAgICAgICAgIG5hbWU6IGRyb3Bkb3duQXJyb3dJY29uLnZhbHVlCiAgICAgICAgfSldIDogbnVsbDsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gdXNlRmllbGQoc3RhdGUpOwogIH0KfSk7"},{"version":3,"sources":["/app/node_modules/quasar/src/components/select/QSelect.js"],"names":["h","ref","computed","watch","onBeforeUpdate","onUpdated","onBeforeUnmount","nextTick","getCurrentInstance","QField","QIcon","QChip","QItem","QItemSection","QItemLabel","QMenu","QDialog","useField","useFieldState","useFieldProps","useFieldEmits","fieldValueIsFilled","useVirtualScroll","useVirtualScrollProps","useFormProps","useFormInputNameAttr","useKeyComposition","createComponent","isDeepEqual","stop","prevent","stopAndPrevent","normalizeToInterval","shouldIgnoreKey","isKeyCode","hMergeSlot","validateNewValueMode","v","includes","reEscapeList","fieldPropsList","Object","keys","name","inheritAttrs","props","modelValue","required","multiple","Boolean","displayValue","String","Number","displayValueHtml","dropdownIcon","options","type","Array","default","optionValue","Function","optionLabel","optionDisable","hideSelected","hideDropdownIcon","fillInput","maxValues","optionsDense","optionsDark","optionsSelectedClass","optionsHtml","optionsCover","menuShrink","menuAnchor","menuSelf","menuOffset","popupContentClass","popupContentStyle","useInput","useChips","newValueMode","validator","mapOptions","emitValue","inputDebounce","inputClass","inputStyle","tabindex","autocomplete","transitionShow","transitionHide","transitionDuration","behavior","virtualScrollItemSize","onNewValue","onFilter","emits","setup","slots","emit","proxy","$q","menu","dialog","optionIndex","inputValue","dialogFieldFocused","innerLoadingIndicator","inputTimer","innerValueCache","hasDialog","userInputValue","filterId","defaultInputValue","transitionShowComputed","searchBuffer","searchBufferExp","inputRef","targetRef","menuRef","dialogRef","menuContentRef","nameProp","onComposition","onInput","virtualScrollLength","isArray","length","virtualScrollItemSizeComputed","dense","getVirtualScrollTarget","getVirtualScrollEl","virtualScrollSliceRange","virtualScrollSliceSizeComputed","localResetVirtualScroll","padVirtualScroll","onVirtualScrollEvt","scrollTo","setVirtualScrollSize","state","innerValue","mapNull","val","cache","values","map","getOption","filter","innerFieldProps","acc","forEach","key","isOptionsDark","isDark","value","hasValue","computedInputClass","cls","menuContentClass","virtualScrollHorizontal","noOptions","selectedString","opt","getOptionLabel","join","needsHtmlFn","html","valueAsHtml","some","focused","comboboxAttrs","role","label","targetUid","listboxAttrs","attrs","id","selectedScope","i","index","selected","removeAtIndex","removeAtIndexAndFocus","toggleOption","optionScope","from","to","slice","disable","isOptionDisabled","itemProps","clickable","active","activeClass","computedOptionsSelectedClass","manualFocus","dark","onClick","isOptionSelected","platform","is","desktop","onMousemove","setOptionIndex","dropdownArrowIcon","iconSet","arrow","dropdown","squaredMenu","outlined","standout","borderless","rounded","color","getOptionValue","getPropValueFn","innerOptionsValue","inputControlEvents","evt","onChange","onKeydown","onTargetKeydown","onKeyup","onTargetAutocomplete","onKeypress","onTargetKeypress","onFocus","selectInputText","e","onCompositionstart","onCompositionupdate","onCompositionend","innerLoading","resetInputValue","immediate","updateMenu","getEmittingOptionValue","model","splice","focus","add","unique","updateInputValue","push","keepOpen","editable","optValue","hidePopup","findIndex","moveOptionSelection","offset","skipInputValue","setInputValue","valueCache","fn","find","propValue","defaultVal","select","onTargetKeyup","target","keyCode","clearTimeout","needle","toLocaleLowerCase","option","indexOf","clearValue","newValueModeValid","tabShouldSelect","shiftKey","closeMenu","showPopup","Math","max","min","view","optionsLength","Date","now","altKey","ctrlKey","char","keyRepeat","searchRe","RegExp","split","l","test","done","mode","__qPortalInnerRef","getSelection","scope","concat","removable","textColor","onRemove","class","getAllOptions","getInput","fromDialog","isTarget","data","style","splitAttrs","attributes","maxlength","autofocus","disabled","readonly","composing","setTimeout","noFiltering","internal","keepClosed","localFilterId","afterFn","getMenu","fit","cover","anchor","self","noParentEvent","noRefocus","noFocus","square","separateClosePopup","onScrollPassive","onBeforeShow","onControlPopupShow","onBeforeHide","onMenuBeforeHide","onShow","onMenuShow","onControlPopupHide","onDialogFieldFocus","window","pageXOffset","scrollX","document","body","scrollLeft","onDialogFieldBlur","getDialog","content","fieldClass","for","loading","itemAligned","filled","stackLabel","listeners","onBlur","rawControl","getControl","before","after","position","onDialogBeforeHide","onHide","onDialogHide","onDialogShow","__updateRefocusTarget","rootRef","querySelector","el","activeElement","onControlFocusin","show","updateMenuPosition","updatePosition","hasPopupOpen","onControlFocusout","updatePreState","mobile","ios","assign","args","apply","floatingLabel","getControlChild","controlEvents","onFocusin","onFocusout","child","opts","getInnerAppend"],"mappings":"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","sourcesContent":["import { h, ref, computed, watch, onBeforeUpdate, onUpdated, onBeforeUnmount, nextTick, getCurrentInstance } from 'vue'\n\nimport QField from '../field/QField.js'\nimport QIcon from '../icon/QIcon.js'\nimport QChip from '../chip/QChip.js'\n\nimport QItem from '../item/QItem.js'\nimport QItemSection from '../item/QItemSection.js'\nimport QItemLabel from '../item/QItemLabel.js'\n\nimport QMenu from '../menu/QMenu.js'\nimport QDialog from '../dialog/QDialog.js'\n\nimport useField, { useFieldState, useFieldProps, useFieldEmits, fieldValueIsFilled } from '../../composables/private/use-field.js'\nimport { useVirtualScroll, useVirtualScrollProps } from '../virtual-scroll/use-virtual-scroll.js'\nimport { useFormProps, useFormInputNameAttr } from '../../composables/private/use-form.js'\nimport useKeyComposition from '../../composables/private/use-key-composition.js'\n\nimport { createComponent } from '../../utils/private/create.js'\nimport { isDeepEqual } from '../../utils/private/is.js'\nimport { stop, prevent, stopAndPrevent } from '../../utils/event.js'\nimport { normalizeToInterval } from '../../utils/format.js'\nimport { shouldIgnoreKey, isKeyCode } from '../../utils/private/key-composition.js'\nimport { hMergeSlot } from '../../utils/private/render.js'\n\nconst validateNewValueMode = v => [ 'add', 'add-unique', 'toggle' ].includes(v)\nconst reEscapeList = '.*+?^${}()|[]\\\\'\nconst fieldPropsList = Object.keys(useFieldProps)\n\nexport default createComponent({\n  name: 'QSelect',\n\n  inheritAttrs: false,\n\n  props: {\n    ...useVirtualScrollProps,\n    ...useFormProps,\n    ...useFieldProps,\n\n    modelValue: {\n      required: true\n    },\n\n    multiple: Boolean,\n\n    displayValue: [ String, Number ],\n    displayValueHtml: Boolean,\n    dropdownIcon: String,\n\n    options: {\n      type: Array,\n      default: () => []\n    },\n\n    optionValue: [ Function, String ],\n    optionLabel: [ Function, String ],\n    optionDisable: [ Function, String ],\n\n    hideSelected: Boolean,\n    hideDropdownIcon: Boolean,\n    fillInput: Boolean,\n\n    maxValues: [ Number, String ],\n\n    optionsDense: Boolean,\n    optionsDark: {\n      type: Boolean,\n      default: null\n    },\n    optionsSelectedClass: String,\n    optionsHtml: Boolean,\n\n    optionsCover: Boolean,\n\n    menuShrink: Boolean,\n    menuAnchor: String,\n    menuSelf: String,\n    menuOffset: Array,\n\n    popupContentClass: String,\n    popupContentStyle: [ String, Array, Object ],\n\n    useInput: Boolean,\n    useChips: Boolean,\n\n    newValueMode: {\n      type: String,\n      validator: validateNewValueMode\n    },\n\n    mapOptions: Boolean,\n    emitValue: Boolean,\n\n    inputDebounce: {\n      type: [ Number, String ],\n      default: 500\n    },\n\n    inputClass: [ Array, String, Object ],\n    inputStyle: [ Array, String, Object ],\n\n    tabindex: {\n      type: [ String, Number ],\n      default: 0\n    },\n\n    autocomplete: String,\n\n    transitionShow: String,\n    transitionHide: String,\n    transitionDuration: [ String, Number ],\n\n    behavior: {\n      type: String,\n      validator: v => [ 'default', 'menu', 'dialog' ].includes(v),\n      default: 'default'\n    },\n\n    virtualScrollItemSize: {\n      type: [ Number, String ],\n      default: void 0\n    },\n\n    onNewValue: Function,\n    onFilter: Function\n  },\n\n  emits: [\n    ...useFieldEmits,\n    'add', 'remove', 'input-value',\n    'keyup', 'keypress', 'keydown',\n    'filter-abort'\n  ],\n\n  setup (props, { slots, emit }) {\n    const { proxy } = getCurrentInstance()\n    const { $q } = proxy\n\n    const menu = ref(false)\n    const dialog = ref(false)\n    const optionIndex = ref(-1)\n    const inputValue = ref('')\n    const dialogFieldFocused = ref(false)\n    const innerLoadingIndicator = ref(false)\n\n    let inputTimer, innerValueCache,\n      hasDialog, userInputValue, filterId, defaultInputValue,\n      transitionShowComputed, searchBuffer, searchBufferExp\n\n    const inputRef = ref(null)\n    const targetRef = ref(null)\n    const menuRef = ref(null)\n    const dialogRef = ref(null)\n    const menuContentRef = ref(null)\n\n    const nameProp = useFormInputNameAttr(props)\n\n    const onComposition = useKeyComposition(onInput)\n\n    const virtualScrollLength = computed(() => (\n      Array.isArray(props.options)\n        ? props.options.length\n        : 0\n    ))\n\n    const virtualScrollItemSizeComputed = computed(() => (\n      props.virtualScrollItemSize === void 0\n        ? (props.dense === true ? 24 : 48)\n        : props.virtualScrollItemSize\n    ))\n\n    const {\n      virtualScrollSliceRange,\n      virtualScrollSliceSizeComputed,\n      localResetVirtualScroll,\n      padVirtualScroll,\n      onVirtualScrollEvt,\n      scrollTo,\n      setVirtualScrollSize\n    } = useVirtualScroll({\n      virtualScrollLength, getVirtualScrollTarget, getVirtualScrollEl,\n      virtualScrollItemSizeComputed\n    })\n\n    const state = useFieldState()\n\n    const innerValue = computed(() => {\n      const\n        mapNull = props.mapOptions === true && props.multiple !== true,\n        val = props.modelValue !== void 0 && (props.modelValue !== null || mapNull === true)\n          ? (props.multiple === true && Array.isArray(props.modelValue) ? props.modelValue : [ props.modelValue ])\n          : []\n\n      if (props.mapOptions === true && Array.isArray(props.options) === true) {\n        const cache = props.mapOptions === true && innerValueCache !== void 0\n          ? innerValueCache\n          : []\n        const values = val.map(v => getOption(v, cache))\n\n        return props.modelValue === null && mapNull === true\n          ? values.filter(v => v !== null)\n          : values\n      }\n\n      return val\n    })\n\n    const innerFieldProps = computed(() => {\n      const acc = {}\n      fieldPropsList.forEach(key => {\n        const val = props[ key ]\n        if (val !== void 0) {\n          acc[ key ] = val\n        }\n      })\n      return acc\n    })\n\n    const isOptionsDark = computed(() => (\n      props.optionsDark === null\n        ? state.isDark.value\n        : props.optionsDark\n    ))\n\n    const hasValue = computed(() => fieldValueIsFilled(innerValue.value))\n\n    const computedInputClass = computed(() => {\n      let cls = 'q-field__input q-placeholder col'\n\n      if (props.hideSelected === true || innerValue.value.length === 0) {\n        return [ cls, props.inputClass ]\n      }\n\n      cls += ' q-field__input--padding'\n\n      return props.inputClass === void 0\n        ? cls\n        : [ cls, props.inputClass ]\n    })\n\n    const menuContentClass = computed(() =>\n      (props.virtualScrollHorizontal === true ? 'q-virtual-scroll--horizontal' : '')\n      + (props.popupContentClass ? ' ' + props.popupContentClass : '')\n    )\n\n    const noOptions = computed(() => virtualScrollLength.value === 0)\n\n    const selectedString = computed(() =>\n      innerValue.value\n        .map(opt => getOptionLabel.value(opt))\n        .join(', ')\n    )\n\n    const needsHtmlFn = computed(() => (\n      props.optionsHtml === true\n        ? () => true\n        : opt => opt !== void 0 && opt !== null && opt.html === true\n    ))\n\n    const valueAsHtml = computed(() => (\n      props.displayValueHtml === true || (\n        props.displayValue === void 0 && (\n          props.optionsHtml === true\n          || innerValue.value.some(needsHtmlFn.value)\n        )\n      )\n    ))\n\n    const tabindex = computed(() => (state.focused.value === true ? props.tabindex : -1))\n\n    const comboboxAttrs = computed(() => ({\n      tabindex: props.tabindex,\n      role: 'combobox',\n      'aria-label': props.label,\n      'aria-autocomplete': props.useInput === true ? 'list' : 'none',\n      'aria-expanded': menu.value === true ? 'true' : 'false',\n      'aria-owns': `${ state.targetUid.value }_lb`,\n      'aria-controls': `${ state.targetUid.value }_lb`\n    }))\n\n    const listboxAttrs = computed(() => {\n      const attrs = {\n        id: `${ state.targetUid.value }_lb`,\n        role: 'listbox',\n        'aria-multiselectable': props.multiple === true ? 'true' : 'false'\n      }\n\n      if (optionIndex.value >= 0) {\n        attrs[ 'aria-activedescendant' ] = `${ state.targetUid.value }_${ optionIndex.value }`\n      }\n\n      return attrs\n    })\n\n    const selectedScope = computed(() => {\n      return innerValue.value.map((opt, i) => ({\n        index: i,\n        opt,\n        html: needsHtmlFn.value(opt),\n        selected: true,\n        removeAtIndex: removeAtIndexAndFocus,\n        toggleOption,\n        tabindex: tabindex.value\n      }))\n    })\n\n    const optionScope = computed(() => {\n      if (virtualScrollLength.value === 0) {\n        return []\n      }\n\n      const { from, to } = virtualScrollSliceRange.value\n\n      return props.options.slice(from, to).map((opt, i) => {\n        const disable = isOptionDisabled.value(opt) === true\n        const index = from + i\n\n        const itemProps = {\n          clickable: true,\n          active: false,\n          activeClass: computedOptionsSelectedClass.value,\n          manualFocus: true,\n          focused: false,\n          disable,\n          tabindex: -1,\n          dense: props.optionsDense,\n          dark: isOptionsDark.value,\n          role: 'option',\n          id: `${ state.targetUid.value }_${ index }`,\n          onClick: () => { toggleOption(opt) }\n        }\n\n        if (disable !== true) {\n          isOptionSelected(opt) === true && (itemProps.active = true)\n          optionIndex.value === index && (itemProps.focused = true)\n\n          itemProps[ 'aria-selected' ] = itemProps.active === true ? 'true' : 'false'\n\n          if ($q.platform.is.desktop === true) {\n            itemProps.onMousemove = () => { setOptionIndex(index) }\n          }\n        }\n\n        return {\n          index,\n          opt,\n          html: needsHtmlFn.value(opt),\n          label: getOptionLabel.value(opt),\n          selected: itemProps.active,\n          focused: itemProps.focused,\n          toggleOption,\n          setOptionIndex,\n          itemProps\n        }\n      })\n    })\n\n    const dropdownArrowIcon = computed(() => (\n      props.dropdownIcon !== void 0\n        ? props.dropdownIcon\n        : $q.iconSet.arrow.dropdown\n    ))\n\n    const squaredMenu = computed(() =>\n      props.optionsCover === false\n      && props.outlined !== true\n      && props.standout !== true\n      && props.borderless !== true\n      && props.rounded !== true\n    )\n\n    const computedOptionsSelectedClass = computed(() => (\n      props.optionsSelectedClass !== void 0\n        ? props.optionsSelectedClass\n        : (props.color !== void 0 ? `text-${ props.color }` : '')\n    ))\n\n    // returns method to get value of an option;\n    // takes into account 'option-value' prop\n    const getOptionValue = computed(() => getPropValueFn(props.optionValue, 'value'))\n\n    // returns method to get label of an option;\n    // takes into account 'option-label' prop\n    const getOptionLabel = computed(() => getPropValueFn(props.optionLabel, 'label'))\n\n    // returns method to tell if an option is disabled;\n    // takes into account 'option-disable' prop\n    const isOptionDisabled = computed(() => getPropValueFn(props.optionDisable, 'disable'))\n\n    const innerOptionsValue = computed(() => innerValue.value.map(opt => getOptionValue.value(opt)))\n\n    const inputControlEvents = computed(() => {\n      const evt = {\n        onInput,\n        // Safari < 10.2 & UIWebView doesn't fire compositionend when\n        // switching focus before confirming composition choice\n        // this also fixes the issue where some browsers e.g. iOS Chrome\n        // fires \"change\" instead of \"input\" on autocomplete.\n        onChange: onComposition,\n        onKeydown: onTargetKeydown,\n        onKeyup: onTargetAutocomplete,\n        onKeypress: onTargetKeypress,\n        onFocus: selectInputText,\n        onClick (e) { hasDialog === true && stop(e) }\n      }\n\n      evt.onCompositionstart = evt.onCompositionupdate = evt.onCompositionend = onComposition\n\n      return evt\n    })\n\n    watch(innerValue, val => {\n      innerValueCache = val\n\n      if (\n        props.useInput === true\n        && props.fillInput === true\n        && props.multiple !== true\n        // Prevent re-entering in filter while filtering\n        // Also prevent clearing inputValue while filtering\n        && state.innerLoading.value !== true\n        && ((dialog.value !== true && menu.value !== true) || hasValue.value !== true)\n      ) {\n        userInputValue !== true && resetInputValue()\n        if (dialog.value === true || menu.value === true) {\n          filter('')\n        }\n      }\n    }, { immediate: true })\n\n    watch(() => props.fillInput, resetInputValue)\n\n    watch(menu, updateMenu)\n\n    function getEmittingOptionValue (opt) {\n      return props.emitValue === true\n        ? getOptionValue.value(opt)\n        : opt\n    }\n\n    function removeAtIndex (index) {\n      if (index > -1 && index < innerValue.value.length) {\n        if (props.multiple === true) {\n          const model = props.modelValue.slice()\n          emit('remove', { index, value: model.splice(index, 1)[ 0 ] })\n          emit('update:modelValue', model)\n        }\n        else {\n          emit('update:modelValue', null)\n        }\n      }\n    }\n\n    function removeAtIndexAndFocus (index) {\n      removeAtIndex(index)\n      state.focus()\n    }\n\n    function add (opt, unique) {\n      const val = getEmittingOptionValue(opt)\n\n      if (props.multiple !== true) {\n        props.fillInput === true && updateInputValue(\n          getOptionLabel.value(opt),\n          true,\n          true\n        )\n\n        emit('update:modelValue', val)\n        return\n      }\n\n      if (innerValue.value.length === 0) {\n        emit('add', { index: 0, value: val })\n        emit('update:modelValue', props.multiple === true ? [ val ] : val)\n        return\n      }\n\n      if (unique === true && isOptionSelected(opt) === true) {\n        return\n      }\n\n      if (props.maxValues !== void 0 && props.modelValue.length >= props.maxValues) {\n        return\n      }\n\n      const model = props.modelValue.slice()\n\n      emit('add', { index: model.length, value: val })\n      model.push(val)\n      emit('update:modelValue', model)\n    }\n\n    function toggleOption (opt, keepOpen) {\n      if (state.editable.value !== true || opt === void 0 || isOptionDisabled.value(opt) === true) {\n        return\n      }\n\n      const optValue = getOptionValue.value(opt)\n\n      if (props.multiple !== true) {\n        if (keepOpen !== true) {\n          updateInputValue(\n            props.fillInput === true ? getOptionLabel.value(opt) : '',\n            true,\n            true\n          )\n\n          hidePopup()\n        }\n\n        targetRef.value !== null && targetRef.value.focus()\n\n        if (\n          innerValue.value.length === 0\n          || isDeepEqual(getOptionValue.value(innerValue.value[ 0 ]), optValue) !== true\n        ) {\n          emit('update:modelValue', props.emitValue === true ? optValue : opt)\n        }\n        return\n      }\n\n      (hasDialog !== true || dialogFieldFocused.value === true) && state.focus()\n\n      selectInputText()\n\n      if (innerValue.value.length === 0) {\n        const val = props.emitValue === true ? optValue : opt\n        emit('add', { index: 0, value: val })\n        emit('update:modelValue', props.multiple === true ? [ val ] : val)\n        return\n      }\n\n      const\n        model = props.modelValue.slice(),\n        index = innerOptionsValue.value.findIndex(v => isDeepEqual(v, optValue))\n\n      if (index > -1) {\n        emit('remove', { index, value: model.splice(index, 1)[ 0 ] })\n      }\n      else {\n        if (props.maxValues !== void 0 && model.length >= props.maxValues) {\n          return\n        }\n\n        const val = props.emitValue === true ? optValue : opt\n\n        emit('add', { index: model.length, value: val })\n        model.push(val)\n      }\n\n      emit('update:modelValue', model)\n    }\n\n    function setOptionIndex (index) {\n      if ($q.platform.is.desktop !== true) { return }\n\n      const val = index > -1 && index < virtualScrollLength.value\n        ? index\n        : -1\n\n      if (optionIndex.value !== val) {\n        optionIndex.value = val\n      }\n    }\n\n    function moveOptionSelection (offset = 1, skipInputValue) {\n      if (menu.value === true) {\n        let index = optionIndex.value\n        do {\n          index = normalizeToInterval(\n            index + offset,\n            -1,\n            virtualScrollLength.value - 1\n          )\n        }\n        while (index !== -1 && index !== optionIndex.value && isOptionDisabled.value(props.options[ index ]) === true)\n\n        if (optionIndex.value !== index) {\n          setOptionIndex(index)\n          scrollTo(index)\n\n          if (skipInputValue !== true && props.useInput === true && props.fillInput === true) {\n            setInputValue(index >= 0\n              ? getOptionLabel.value(props.options[ index ])\n              : defaultInputValue\n            )\n          }\n        }\n      }\n    }\n\n    function getOption (value, valueCache) {\n      const fn = opt => isDeepEqual(getOptionValue.value(opt), value)\n      return props.options.find(fn) || valueCache.find(fn) || value\n    }\n\n    function getPropValueFn (propValue, defaultVal) {\n      const val = propValue !== void 0\n        ? propValue\n        : defaultVal\n\n      return typeof val === 'function'\n        ? val\n        : opt => (Object(opt) === opt && val in opt ? opt[ val ] : opt)\n    }\n\n    function isOptionSelected (opt) {\n      const val = getOptionValue.value(opt)\n      return innerOptionsValue.value.find(v => isDeepEqual(v, val)) !== void 0\n    }\n\n    function selectInputText () {\n      if (props.useInput === true && targetRef.value !== null) {\n        targetRef.value.select()\n      }\n    }\n\n    function onTargetKeyup (e) {\n      // if ESC and we have an opened menu\n      // then stop propagation (might be caught by a QDialog\n      // and so it will also close the QDialog, which is wrong)\n      if (isKeyCode(e, 27) === true && menu.value === true) {\n        stop(e)\n        // on ESC we need to close the dialog also\n        hidePopup()\n        resetInputValue()\n      }\n\n      emit('keyup', e)\n    }\n\n    function onTargetAutocomplete (e) {\n      const { value } = e.target\n\n      if (e.keyCode !== void 0) {\n        onTargetKeyup(e)\n        return\n      }\n\n      e.target.value = ''\n      clearTimeout(inputTimer)\n      resetInputValue()\n\n      if (typeof value === 'string' && value.length > 0) {\n        const needle = value.toLocaleLowerCase()\n\n        let fn = opt => getOptionValue.value(opt).toLocaleLowerCase() === needle\n        let option = props.options.find(fn)\n\n        if (option !== void 0) {\n          if (innerValue.value.indexOf(option) === -1) {\n            toggleOption(option)\n          }\n          else {\n            hidePopup()\n          }\n        }\n        else {\n          fn = opt => getOptionLabel.value(opt).toLocaleLowerCase() === needle\n          option = props.options.find(fn)\n\n          if (option !== void 0) {\n            if (innerValue.value.indexOf(option) === -1) {\n              toggleOption(option)\n            }\n            else {\n              hidePopup()\n            }\n          }\n          else {\n            filter(value, true)\n          }\n        }\n      }\n      else {\n        state.clearValue(e)\n      }\n    }\n\n    function onTargetKeypress (e) {\n      emit('keypress', e)\n    }\n\n    function onTargetKeydown (e) {\n      emit('keydown', e)\n\n      if (shouldIgnoreKey(e) === true) {\n        return\n      }\n\n      const newValueModeValid = inputValue.value.length > 0\n        && (props.newValueMode !== void 0 || props.onNewValue !== void 0)\n\n      const tabShouldSelect = e.shiftKey !== true\n        && props.multiple !== true\n        && (optionIndex.value > -1 || newValueModeValid === true)\n\n      // escape\n      if (e.keyCode === 27) {\n        prevent(e) // prevent clearing the inputValue\n        return\n      }\n\n      // tab\n      if (e.keyCode === 9 && tabShouldSelect === false) {\n        closeMenu()\n        return\n      }\n\n      if (e.target === void 0 || e.target.id !== state.targetUid.value) { return }\n\n      // down\n      if (\n        e.keyCode === 40\n        && state.innerLoading.value !== true\n        && menu.value === false\n      ) {\n        stopAndPrevent(e)\n        showPopup()\n        return\n      }\n\n      // backspace\n      if (\n        e.keyCode === 8\n        && props.hideSelected !== true\n        && inputValue.value.length === 0\n      ) {\n        if (props.multiple === true && Array.isArray(props.modelValue) === true) {\n          removeAtIndex(props.modelValue.length - 1)\n        }\n        else if (props.multiple !== true && props.modelValue !== null) {\n          emit('update:modelValue', null)\n        }\n        return\n      }\n\n      // home, end - 36, 35\n      if (\n        (e.keyCode === 35 || e.keyCode === 36)\n        && (typeof inputValue.value !== 'string' || inputValue.value.length === 0)\n      ) {\n        stopAndPrevent(e)\n        optionIndex.value = -1\n        moveOptionSelection(e.keyCode === 36 ? 1 : -1, props.multiple)\n      }\n\n      // pg up, pg down - 33, 34\n      if (\n        (e.keyCode === 33 || e.keyCode === 34)\n        && virtualScrollSliceSizeComputed.value !== void 0\n      ) {\n        stopAndPrevent(e)\n        optionIndex.value = Math.max(\n          -1,\n          Math.min(\n            virtualScrollLength.value,\n            optionIndex.value + (e.keyCode === 33 ? -1 : 1) * virtualScrollSliceSizeComputed.value.view\n          )\n        )\n        moveOptionSelection(e.keyCode === 33 ? 1 : -1, props.multiple)\n      }\n\n      // up, down\n      if (e.keyCode === 38 || e.keyCode === 40) {\n        stopAndPrevent(e)\n        moveOptionSelection(e.keyCode === 38 ? -1 : 1, props.multiple)\n      }\n\n      const optionsLength = virtualScrollLength.value\n\n      // clear search buffer if expired\n      if (searchBuffer === void 0 || searchBufferExp < Date.now()) {\n        searchBuffer = ''\n      }\n\n      // keyboard search when not having use-input\n      if (\n        optionsLength > 0\n        && props.useInput !== true\n        && e.key !== void 0\n        && e.key.length === 1 // printable char\n        && e.altKey === e.ctrlKey // not kbd shortcut\n        && (e.keyCode !== 32 || searchBuffer.length > 0) // space in middle of search\n      ) {\n        menu.value !== true && showPopup(e)\n\n        const\n          char = e.key.toLocaleLowerCase(),\n          keyRepeat = searchBuffer.length === 1 && searchBuffer[ 0 ] === char\n\n        searchBufferExp = Date.now() + 1500\n        if (keyRepeat === false) {\n          stopAndPrevent(e)\n          searchBuffer += char\n        }\n\n        const searchRe = new RegExp('^' + searchBuffer.split('').map(l => (reEscapeList.indexOf(l) > -1 ? '\\\\' + l : l)).join('.*'), 'i')\n\n        let index = optionIndex.value\n\n        if (keyRepeat === true || index < 0 || searchRe.test(getOptionLabel.value(props.options[ index ])) !== true) {\n          do {\n            index = normalizeToInterval(index + 1, -1, optionsLength - 1)\n          }\n          while (index !== optionIndex.value && (\n            isOptionDisabled.value(props.options[ index ]) === true\n            || searchRe.test(getOptionLabel.value(props.options[ index ])) !== true\n          ))\n        }\n\n        if (optionIndex.value !== index) {\n          nextTick(() => {\n            setOptionIndex(index)\n            scrollTo(index)\n\n            if (index >= 0 && props.useInput === true && props.fillInput === true) {\n              setInputValue(getOptionLabel.value(props.options[ index ]))\n            }\n          })\n        }\n\n        return\n      }\n\n      // enter, space (when not using use-input and not in search), or tab (when not using multiple and option selected)\n      // same target is checked above\n      if (\n        e.keyCode !== 13\n        && (e.keyCode !== 32 || props.useInput === true || searchBuffer !== '')\n        && (e.keyCode !== 9 || tabShouldSelect === false)\n      ) { return }\n\n      e.keyCode !== 9 && stopAndPrevent(e)\n\n      if (optionIndex.value > -1 && optionIndex.value < optionsLength) {\n        toggleOption(props.options[ optionIndex.value ])\n        return\n      }\n\n      if (newValueModeValid === true) {\n        const done = (val, mode) => {\n          if (mode) {\n            if (validateNewValueMode(mode) !== true) {\n              return\n            }\n          }\n          else {\n            mode = props.newValueMode\n          }\n\n          if (val === void 0 || val === null) {\n            return\n          }\n\n          updateInputValue('', props.multiple !== true, true)\n\n          const fn = mode === 'toggle' ? toggleOption : add\n          fn(val, mode === 'add-unique')\n\n          if (props.multiple !== true) {\n            targetRef.value !== null && targetRef.value.focus()\n            hidePopup()\n          }\n        }\n\n        if (props.onNewValue !== void 0) {\n          emit('new-value', inputValue.value, done)\n        }\n        else {\n          done(inputValue.value)\n        }\n\n        if (props.multiple !== true) {\n          return\n        }\n      }\n\n      if (menu.value === true) {\n        closeMenu()\n      }\n      else if (state.innerLoading.value !== true) {\n        showPopup()\n      }\n    }\n\n    function getVirtualScrollEl () {\n      return hasDialog === true\n        ? menuContentRef.value\n        : (\n            menuRef.value !== null && menuRef.value.__qPortalInnerRef.value !== null\n              ? menuRef.value.__qPortalInnerRef.value\n              : void 0\n          )\n    }\n\n    function getVirtualScrollTarget () {\n      return getVirtualScrollEl()\n    }\n\n    function getSelection () {\n      if (props.hideSelected === true) {\n        return []\n      }\n\n      if (slots[ 'selected-item' ] !== void 0) {\n        return selectedScope.value.map(scope => slots[ 'selected-item' ](scope)).slice()\n      }\n\n      if (slots.selected !== void 0) {\n        return [].concat(slots.selected())\n      }\n\n      if (props.useChips === true) {\n        return selectedScope.value.map((scope, i) => h(QChip, {\n          key: 'option-' + i,\n          removable: state.editable.value === true && isOptionDisabled.value(scope.opt) !== true,\n          dense: true,\n          textColor: props.color,\n          tabindex: tabindex.value,\n          onRemove () { scope.removeAtIndex(i) }\n        }, () => h('span', {\n          class: 'ellipsis',\n          [ scope.html === true ? 'innerHTML' : 'textContent' ]: getOptionLabel.value(scope.opt)\n        })))\n      }\n\n      return [\n        h('span', {\n          [ valueAsHtml.value === true ? 'innerHTML' : 'textContent' ]: props.displayValue !== void 0\n            ? props.displayValue\n            : selectedString.value\n        })\n      ]\n    }\n\n    function getAllOptions () {\n      if (noOptions.value === true) {\n        return slots[ 'no-option' ] !== void 0\n          ? slots[ 'no-option' ]({ inputValue: inputValue.value })\n          : void 0\n      }\n\n      const fn = slots.option !== void 0\n        ? slots.option\n        : scope => {\n          return h(QItem, {\n            key: scope.index,\n            ...scope.itemProps\n          }, () => {\n            return h(\n              QItemSection,\n              () => h(\n                QItemLabel,\n                () => h('span', {\n                  [ scope.html === true ? 'innerHTML' : 'textContent' ]: scope.label\n                })\n              )\n            )\n          })\n        }\n\n      let options = padVirtualScroll('div', optionScope.value.map(fn))\n\n      if (slots[ 'before-options' ] !== void 0) {\n        options = slots[ 'before-options' ]().concat(options)\n      }\n\n      return hMergeSlot(slots[ 'after-options' ], options)\n    }\n\n    function getInput (fromDialog, isTarget) {\n      const data = {\n        ref: isTarget === true ? targetRef : void 0,\n        key: 'i_t',\n        class: computedInputClass.value,\n        style: props.inputStyle,\n        value: inputValue.value !== void 0 ? inputValue.value : '',\n        // required for Android in order to show ENTER key when in form\n        type: 'search',\n        ...comboboxAttrs.value,\n        ...state.splitAttrs.attributes.value,\n        id: state.targetUid.value,\n        maxlength: props.maxlength,\n        autocomplete: props.autocomplete,\n        'data-autofocus': (fromDialog !== true && props.autofocus === true) || void 0,\n        disabled: props.disable === true,\n        readonly: props.readonly === true,\n        ...inputControlEvents.value\n      }\n\n      if (fromDialog !== true && hasDialog === true) {\n        if (Array.isArray(data.class) === true) {\n          data.class[ 0 ] += ' no-pointer-events'\n        }\n        else {\n          data.class += ' no-pointer-events'\n        }\n      }\n\n      return h('input', data)\n    }\n\n    function onInput (e) {\n      clearTimeout(inputTimer)\n\n      if (e && e.target && e.target.composing === true) {\n        return\n      }\n\n      setInputValue(e.target.value || '')\n      // mark it here as user input so that if updateInputValue is called\n      // before filter is called the indicator is reset\n      userInputValue = true\n      defaultInputValue = inputValue.value\n\n      if (\n        state.focused.value !== true\n        && (hasDialog !== true || dialogFieldFocused.value === true)\n      ) {\n        state.focus()\n      }\n\n      if (props.onFilter !== void 0) {\n        inputTimer = setTimeout(() => {\n          filter(inputValue.value)\n        }, props.inputDebounce)\n      }\n    }\n\n    function setInputValue (val) {\n      if (inputValue.value !== val) {\n        inputValue.value = val\n        emit('input-value', val)\n      }\n    }\n\n    function updateInputValue (val, noFiltering, internal) {\n      userInputValue = internal !== true\n\n      if (props.useInput === true) {\n        setInputValue(val)\n\n        if (noFiltering === true || internal !== true) {\n          defaultInputValue = val\n        }\n\n        noFiltering !== true && filter(val)\n      }\n    }\n\n    function filter (val, keepClosed) {\n      if (props.onFilter === void 0 || (keepClosed !== true && state.focused.value !== true)) {\n        return\n      }\n\n      if (state.innerLoading.value === true) {\n        emit('filter-abort')\n      }\n      else {\n        state.innerLoading.value = true\n        innerLoadingIndicator.value = true\n      }\n\n      if (\n        val !== ''\n        && props.multiple !== true\n        && innerValue.value.length > 0\n        && userInputValue !== true\n        && val === getOptionLabel.value(innerValue.value[ 0 ])\n      ) {\n        val = ''\n      }\n\n      const localFilterId = setTimeout(() => {\n        menu.value === true && (menu.value = false)\n      }, 10)\n\n      clearTimeout(filterId)\n      filterId = localFilterId\n\n      emit(\n        'filter',\n        val,\n        (fn, afterFn) => {\n          if ((keepClosed === true || state.focused.value === true) && filterId === localFilterId) {\n            clearTimeout(filterId)\n\n            typeof fn === 'function' && fn()\n\n            // hide indicator to allow arrow to animate\n            innerLoadingIndicator.value = false\n\n            nextTick(() => {\n              state.innerLoading.value = false\n\n              if (state.editable.value === true) {\n                if (keepClosed === true) {\n                  menu.value === true && hidePopup()\n                }\n                else if (menu.value === true) {\n                  updateMenu(true)\n                }\n                else {\n                  menu.value = true\n                }\n              }\n\n              typeof afterFn === 'function' && nextTick(() => { afterFn(proxy) })\n            })\n          }\n        },\n        () => {\n          if (state.focused.value === true && filterId === localFilterId) {\n            clearTimeout(filterId)\n            state.innerLoading.value = false\n            innerLoadingIndicator.value = false\n          }\n          menu.value === true && (menu.value = false)\n        }\n      )\n    }\n\n    function getMenu () {\n      return h(QMenu, {\n        ref: menuRef,\n        class: menuContentClass.value,\n        style: props.popupContentStyle,\n        modelValue: menu.value,\n        fit: props.menuShrink !== true,\n        cover: props.optionsCover === true && noOptions.value !== true && props.useInput !== true,\n        anchor: props.menuAnchor,\n        self: props.menuSelf,\n        offset: props.menuOffset,\n        dark: isOptionsDark.value,\n        noParentEvent: true,\n        noRefocus: true,\n        noFocus: true,\n        square: squaredMenu.value,\n        transitionShow: props.transitionShow,\n        transitionHide: props.transitionHide,\n        transitionDuration: props.transitionDuration,\n        separateClosePopup: true,\n        ...listboxAttrs.value,\n        onScrollPassive: onVirtualScrollEvt,\n        onBeforeShow: onControlPopupShow,\n        onBeforeHide: onMenuBeforeHide,\n        onShow: onMenuShow\n      }, getAllOptions)\n    }\n\n    function onMenuBeforeHide (e) {\n      onControlPopupHide(e)\n      closeMenu()\n    }\n\n    function onMenuShow () {\n      setVirtualScrollSize()\n    }\n\n    function onDialogFieldFocus (e) {\n      stop(e)\n      targetRef.value !== null && targetRef.value.focus()\n      dialogFieldFocused.value = true\n      window.scrollTo(window.pageXOffset || window.scrollX || document.body.scrollLeft || 0, 0)\n    }\n\n    function onDialogFieldBlur (e) {\n      stop(e)\n      nextTick(() => {\n        dialogFieldFocused.value = false\n      })\n    }\n\n    function getDialog () {\n      const content = [\n        h(QField, {\n          class: `col-auto ${ state.fieldClass.value }`,\n          ...innerFieldProps.value,\n          for: state.targetUid.value,\n          dark: isOptionsDark.value,\n          square: true,\n          loading: innerLoadingIndicator.value,\n          itemAligned: false,\n          filled: true,\n          stackLabel: inputValue.value.length > 0,\n          ...state.splitAttrs.listeners.value,\n          onFocus: onDialogFieldFocus,\n          onBlur: onDialogFieldBlur\n        }, {\n          ...slots,\n          rawControl: () => state.getControl(true),\n          before: void 0,\n          after: void 0\n        })\n      ]\n\n      menu.value === true && content.push(\n        h('div', {\n          ref: menuContentRef,\n          class: menuContentClass.value + ' scroll',\n          style: props.popupContentStyle,\n          ...listboxAttrs.value,\n          onClick: prevent,\n          onScrollPassive: onVirtualScrollEvt\n        }, getAllOptions())\n      )\n\n      return h(QDialog, {\n        ref: dialogRef,\n        modelValue: dialog.value,\n        position: props.useInput === true ? 'top' : void 0,\n        transitionShow: transitionShowComputed,\n        transitionHide: props.transitionHide,\n        transitionDuration: props.transitionDuration,\n        onBeforeShow: onControlPopupShow,\n        onBeforeHide: onDialogBeforeHide,\n        onHide: onDialogHide,\n        onShow: onDialogShow\n      }, () => h('div', {\n        class: 'q-select__dialog'\n          + (isOptionsDark.value === true ? ' q-select__dialog--dark q-dark' : '')\n          + (dialogFieldFocused.value === true ? ' q-select__dialog--focused' : '')\n      }, content))\n    }\n\n    function onDialogBeforeHide (e) {\n      onControlPopupHide(e)\n\n      if (dialogRef.value !== null) {\n        dialogRef.value.__updateRefocusTarget(\n          state.rootRef.value.querySelector('.q-field__native > [tabindex]:last-child')\n        )\n      }\n\n      state.focused.value = false\n    }\n\n    function onDialogHide (e) {\n      hidePopup()\n      state.focused.value === false && emit('blur', e)\n      resetInputValue()\n    }\n\n    function onDialogShow () {\n      const el = document.activeElement\n      if (\n        (el === null || el.id !== state.targetUid.value)\n        && targetRef.value !== null\n        && targetRef.value !== el\n      ) {\n        targetRef.value.focus()\n      }\n\n      setVirtualScrollSize()\n    }\n\n    function closeMenu () {\n      if (dialog.value === true) {\n        return\n      }\n\n      optionIndex.value = -1\n\n      if (menu.value === true) {\n        menu.value = false\n      }\n\n      if (state.focused.value === false) {\n        clearTimeout(filterId)\n        filterId = void 0\n\n        if (state.innerLoading.value === true) {\n          emit('filter-abort')\n          state.innerLoading.value = false\n          innerLoadingIndicator.value = false\n        }\n      }\n    }\n\n    function showPopup (e) {\n      if (state.editable.value !== true) {\n        return\n      }\n\n      if (hasDialog === true) {\n        state.onControlFocusin(e)\n        dialog.value = true\n        nextTick(() => {\n          state.focus()\n        })\n      }\n      else {\n        state.focus()\n      }\n\n      if (props.onFilter !== void 0) {\n        filter(inputValue.value)\n      }\n      else if (noOptions.value !== true || slots[ 'no-option' ] !== void 0) {\n        menu.value = true\n      }\n    }\n\n    function hidePopup () {\n      dialog.value = false\n      closeMenu()\n    }\n\n    function resetInputValue () {\n      props.useInput === true && updateInputValue(\n        props.multiple !== true && props.fillInput === true && innerValue.value.length > 0\n          ? getOptionLabel.value(innerValue.value[ 0 ]) || ''\n          : '',\n        true,\n        true\n      )\n    }\n\n    function updateMenu (show) {\n      let optionIndex = -1\n\n      if (show === true) {\n        if (innerValue.value.length > 0) {\n          const val = getOptionValue.value(innerValue.value[ 0 ])\n          optionIndex = props.options.findIndex(v => isDeepEqual(getOptionValue.value(v), val))\n        }\n\n        localResetVirtualScroll(optionIndex)\n      }\n\n      setOptionIndex(optionIndex)\n    }\n\n    function updateMenuPosition () {\n      if (dialog.value === false && menuRef.value !== null) {\n        menuRef.value.updatePosition()\n      }\n    }\n\n    function onControlPopupShow (e) {\n      e !== void 0 && stop(e)\n      emit('popup-show', e)\n      state.hasPopupOpen = true\n      state.onControlFocusin(e)\n    }\n\n    function onControlPopupHide (e) {\n      e !== void 0 && stop(e)\n      emit('popup-hide', e)\n      state.hasPopupOpen = false\n      state.onControlFocusout(e)\n    }\n\n    function updatePreState () {\n      hasDialog = $q.platform.is.mobile !== true && props.behavior !== 'dialog'\n        ? false\n        : props.behavior !== 'menu' && (\n          props.useInput === true\n            ? slots[ 'no-option' ] !== void 0 || props.onFilter !== void 0 || noOptions.value === false\n            : true\n        )\n\n      transitionShowComputed = $q.platform.is.ios === true && hasDialog === true && props.useInput === true\n        ? 'fade'\n        : props.transitionShow\n    }\n\n    onBeforeUpdate(updatePreState)\n    onUpdated(updateMenuPosition)\n\n    updatePreState()\n\n    onBeforeUnmount(() => {\n      clearTimeout(inputTimer)\n    })\n\n    // expose public methods\n    Object.assign(proxy, {\n      showPopup, hidePopup,\n      removeAtIndex, add, toggleOption,\n      setOptionIndex, moveOptionSelection,\n      filter, updateMenuPosition, updateInputValue,\n      isOptionSelected,\n      getEmittingOptionValue,\n      isOptionDisabled: (...args) => isOptionDisabled.value.apply(null, args),\n      getOptionValue: (...args) => getOptionValue.value.apply(null, args),\n      getOptionLabel: (...args) => getOptionLabel.value.apply(null, args)\n    })\n\n    Object.assign(state, {\n      innerValue,\n\n      fieldClass: computed(() =>\n        `q-select q-field--auto-height q-select--with${ props.useInput !== true ? 'out' : '' }-input`\n        + ` q-select--with${ props.useChips !== true ? 'out' : '' }-chips`\n        + ` q-select--${ props.multiple === true ? 'multiple' : 'single' }`\n      ),\n\n      inputRef,\n      targetRef,\n      hasValue,\n      showPopup,\n\n      floatingLabel: computed(() =>\n        (props.hideSelected === true\n          ? inputValue.value.length > 0\n          : hasValue.value === true\n        )\n        || fieldValueIsFilled(props.displayValue)\n      ),\n\n      getControlChild: () => {\n        if (\n          state.editable.value !== false && (\n            dialog.value === true // dialog always has menu displayed, so need to render it\n            || noOptions.value !== true\n            || slots[ 'no-option' ] !== void 0\n          )\n        ) {\n          return hasDialog === true ? getDialog() : getMenu()\n        }\n        else if (state.hasPopupOpen === true) {\n          // explicitly set it otherwise TAB will not blur component\n          state.hasPopupOpen = false\n        }\n      },\n\n      controlEvents: {\n        onFocusin (e) { state.onControlFocusin(e) },\n        onFocusout (e) {\n          state.onControlFocusout(e, () => {\n            resetInputValue()\n            closeMenu()\n          })\n        },\n        onClick (e) {\n          // label from QField will propagate click on the input\n          prevent(e)\n\n          if (hasDialog !== true && menu.value === true) {\n            closeMenu()\n            targetRef.value !== null && targetRef.value.focus()\n            return\n          }\n\n          showPopup(e)\n        }\n      },\n\n      getControl: fromDialog => {\n        const child = getSelection()\n        const isTarget = fromDialog === true || dialog.value !== true || hasDialog !== true\n\n        if (props.useInput === true) {\n          child.push(getInput(fromDialog, isTarget))\n        }\n        // there can be only one (when dialog is opened the control in dialog should be target)\n        else if (state.editable.value === true && isTarget === true) {\n          child.push(\n            h('div', {\n              ref: targetRef,\n              key: 'd_t',\n              class: 'no-outline',\n              id: state.targetUid.value,\n              ...comboboxAttrs.value,\n              onKeydown: onTargetKeydown,\n              onKeyup: onTargetKeyup,\n              onKeypress: onTargetKeypress\n            })\n          )\n\n          if (typeof props.autocomplete === 'string' && props.autocomplete.length > 0) {\n            child.push(\n              h('input', {\n                class: 'q-select__autocomplete-input no-outline',\n                autocomplete: props.autocomplete,\n                onKeyup: onTargetAutocomplete\n              })\n            )\n          }\n        }\n\n        if (nameProp.value !== void 0 && props.disable !== true && innerOptionsValue.value.length > 0) {\n          const opts = innerOptionsValue.value.map(value => h('option', { value, selected: true }))\n\n          child.push(\n            h('select', {\n              class: 'hidden',\n              name: nameProp.value,\n              multiple: props.multiple\n            }, opts)\n          )\n        }\n\n        return h('div', {\n          class: 'q-field__native row items-center',\n          ...state.splitAttrs.attributes.value\n        }, child)\n      },\n\n      getInnerAppend: () => (\n        props.loading !== true && innerLoadingIndicator.value !== true && props.hideDropdownIcon !== true\n          ? [\n              h(QIcon, {\n                class: 'q-select__dropdown-icon' + (menu.value === true ? ' rotate-180' : ''),\n                name: dropdownArrowIcon.value\n              })\n            ]\n          : null\n      )\n    })\n\n    return useField(state)\n  }\n})\n"]}]}